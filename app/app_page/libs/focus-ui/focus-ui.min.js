/*! Focus UI v2.4.2 | http://www.focus-ui.com | 2023-07-20 | Licensed to Cisco */
!function(l,f){"use strict";function ze(e){return mt($,e)}function Fe(e,t){Ne(e)?Ct(e,function(e,t){$.hasOwnProperty(e)||($[e]=t)}):$.hasOwnProperty(e)||($[e]=t)}function je(){this._array=[],this._map={}}function u(e){var n,t=e&&e.forEach?e:[].slice.call(arguments),r=!1,i=("object"==typeof t[0]&&(r=t.length,n=[],t.forEach(function(t){["x","y","z"].forEach(function(e){void 0!==t[e]&&n.push(t[e])})}),t=n),!1),o=t.length;if(r){if(4<r){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==o&&8!==o&&9!==o&&12!==o&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");for(var a=!i&&(9===o||12===o)||e&&e[0]&&void 0!==e[0].z,s=[],l=0,c=(this._3d=a)?3:2;l<o;l+=c){var d={x:t[l],y:t[l+1]};a&&(d.z=t[l+2]),s.push(d)}this.order=s.length-1,this.points=s,r=["x","y"],a&&r.push("z"),this.dims=r,this.dimlen=r.length,function(e){for(var t=e.order,n=e.points,r=p.align(n,{p1:n[0],p2:n[t]}),i=0;i<r.length;i++)if(1e-4<p.abs(r[i].y))return e._linear=!1;e._linear=!0}(this),this._t1=0,this._t2=1,this.update()}function t(e){this instanceof t||Re.throwError("Instance must be constructed via new"),this.__zid__=Re.guid(),this.__props__={},this.__getProps__={},Ne(e)&&Ct(e,function(e,t){ut(t)?this[e]=t:this.__initSetProperty(e,t)},this)}function e(){this._typeListenersMap=A.create(null)}function w(){this._dispatcher=new e,w.superClass.constructor.apply(this,arguments)}function n(){n.superClass.constructor.apply(this,arguments)}function r(){var e,t;this._dataArrayMap=new je,e=dt(arguments[0])?(t=arguments[0],Y(arguments,1)):arguments,r.superClass.constructor.apply(this,e),t&&t.forEach(this.add,this)}function qe(){this._rootArrayMap=new je,qe.superClass.constructor.apply(this,arguments)}function $e(e){return{_isCheck_:!0,isCheckable:function(e){return!1!==this.getDataViewProperty(e,"checkable")},_updateCheckProvider:function(){this._removeCheckProviderListener(),this._provider&&(!1!==this.getProperty("model_check")?this._checkProvider=this._provider.getCheckProvider():(this._checkProvider||(this._checkProvider=new ir(this._provider)),this._checkProvider.setProvider(this._provider)),this._addCheckProviderListener())},_removeCheckProviderListener:function(){this._checkProvider&&this._checkProvider.removeProviderChangeListener(this._handleCheckProviderChange,this)},_addCheckProviderListener:function(){this._checkProvider.addProviderChangeListener(this._handleCheckProviderChange,this)},_handleCheckProviderChange:function(e){var t=e.type;"add"===t?this._onCheckAdd(e.data):"remove"===t?this._onCheckRemove(e.data):"clear"===t?this._onCheckClear(e.data):"set"===t&&this._onCheckSet(e.data),this._onCheckChange(e)},_addCheckNeedUpdateData:function(e){this._addNeedUpdateData(e,!0,!0)},_onCheckAdd:function(e){this._addCheckNeedUpdateData(e),this._callOn("onCheckAdd","on.check.add",e,[e])},onCheckAdd:function(e,t){this.addListener("on.check.add",e,t)},_onCheckRemove:function(e){this._addCheckNeedUpdateData(e),this._callOn("onCheckRemove","on.check.remove",e,[e])},onCheckRemove:function(e,t){this.addListener("on.check.remove",e,t)},_onCheckClear:function(e){e.forEach(this._addCheckNeedUpdateData,this),this._callOn("onCheckClear","on.check.clear",e,[e])},onCheckClear:function(e,t){this.addListener("on.check.clear",e,t)},_onCheckSet:function(e){e.forEach(this._addCheckNeedUpdateData,this),this._callOn("onCheckSet","on.check.set",e,[e])},onCheckSet:function(e,t){this.addListener("on.check.set",e,t)},_onCheckChange:function(e){this._update(),this._callOn("onCheckChange","on.check.change",e,[e])},onCheckChange:function(e,t){this.addListener("on.check.change",e,t)},check:function(e,t){e=this._getModelDataArr(e);return!0===t?this._addCheck(e):this._setCheck(e)},uncheck:function(e){e=this._getModelDataArr(e);0!==e.length&&this._removeCheck(e)},addCheck:function(e){e=this._getModelDataArr(e);if(0!==e.length)return this._addCheck(e)},removeCheck:function(e){e=this._getModelDataArr(e);0!==e.length&&this._removeCheck(e)},setCheck:function(e){e=this._getModelDataArr(e);this._setCheck(e)},checkAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=gt(t,this._isVisible,this)),this._checkProvider.set(this._filterCheckableData(t))},clearCheck:function(){return this._checkProvider.clear.apply(this._checkProvider,arguments)},uncheckAll:function(){return this._checkProvider.clear.apply(this._checkProvider,arguments)},getChecked:function(e){return this._checkProvider.toArray.apply(this._checkProvider,arguments)},getLastChecked:function(){return this._checkProvider.getLast.apply(this._checkProvider,arguments)},isChecked:function(e){return!!(e=this._getModelData(e))&&this._checkProvider.contains(e)},toggleCheck:function(e){(e=this._getModelData(e))&&(this.isChecked(e)?this.removeCheck(e):this.addCheck(e))},_addCheck:function(e){return this._checkProvider.add(this._filterCheckableData(e))},_removeCheck:function(e){e.forEach(function(e){this._checkProvider.remove(e)},this)},_setCheck:function(e){return this._checkProvider.set(this._filterCheckableData(e))},_filterCheckableData:function(e){return e.filter(function(e){return this.isCheckable(e)&&!this.isDisabled(e)},this)}}}function i(e){return{_getControllerRoot:function(){return this._root},setControllers:function(e){this._controllerArray.forEach(function(e){e.remove()}),this._controllerArray=pt([],e),this._controllerArray.forEach(function(e){e.add(this)},this),this._onControllerChange("set")},addController:function(e){this._controllerArray.push(e),e.add(this),this._onControllerChange("add")},removeController:function(e){var t=this._controllerArray.indexOf(e);0<=t&&(e.remove(),this._controllerArray.splice(t,1),this._onControllerChange("remove"))},clearController:function(){0<this._controllerArray.length&&(this._controllerArray.forEach(function(e){e.remove()}),this._controllerArray=[],this._onControllerChange("clear"))},_onControllerChange:function(e){},_onDataClick:function(e,t){this._callOn("onDataClick","on.data.click",{data:e,event:t},[e,t])},onDataClick:function(e,t){this.addListener("on.data.click",e,t)},_onDataDblClick:function(e,t){this._callOn("onDataDblClick","on.data.dblclick",{data:e,event:t},[e,t])},onDataDblClick:function(e,t){this.addListener("on.data.dblclick",e,t)}}}function Xe(e){return{_isExpand_:!0,_isExpandable:function(e){return this.isExpandable(e)},isExpandable:function(e){return!1!==this.getDataViewProperty(e,"expandable")},_isAccordion:function(){return!0===this.getProperty("accordion")},_updateExpandProvider:function(){this._removeExpandProviderListener(),this._provider&&(!1!==this.getProperty("model_expand")?this._expandProvider=this._provider.getExpandProvider():(this._expandProvider||(this._expandProvider=new ir(this._provider)),this._expandProvider.setProvider(this._provider)),this._addExpandProviderListener())},_removeExpandProviderListener:function(){this._expandProvider&&this._expandProvider.removeProviderChangeListener(this._handleExpandProviderChange,this)},_addExpandProviderListener:function(){this._expandProvider.addProviderChangeListener(this._handleExpandProviderChange,this)},_handleExpandProviderChange:function(e){var t=e.type;"add"===t?this._onExpandAdd(e.data):"remove"===t?this._onExpandRemove(e.data):"clear"===t?this._onExpandClear(e.data):"set"===t&&this._onExpandSet(e.data),this._onExpandChange(e)},_addExpandNeedUpdateData:function(e){this._addNeedUpdateData(e,!1,!0)},_onExpandAdd:function(t){var e,n;this._addExpandNeedUpdateData(t),this._callOn("onExpand","on.expand.add",t,[t]),this._isAccordion()&&(e=this._expandProvider.toArray(),n=Qn.getAncestorArray(t),e.forEach(function(e){e!==t&&n.indexOf(e)<0&&this.collapse(e)},this))},onExpand:function(e,t){this.addListener("on.expand.add",e,t)},_onExpandRemove:function(e){this._addExpandNeedUpdateData(e,!1),this._callOn("onCollapse","on.expand.remove",e,[e])},onCollapse:function(e,t){this.addListener("on.expand.remove",e,t)},_onExpandClear:function(e){e.forEach(this._addExpandNeedUpdateData,this),this._callOn("onCollapseAll","on.expand.clear",e,[e])},onCollapseAll:function(e,t){this.addListener("on.expand.clear",e,t)},_onExpandSet:function(e){e.forEach(this._addExpandNeedUpdateData,this),this._callOn("onExpandSet","on.expand.set",e,[e])},onExpandSet:function(e,t){this.addListener("on.expand.set",e,t)},_onExpandChange:function(e){this._update(),this._callOn("onExpandChange","on.expand.change",e,[e])},onExpandChange:function(e,t){this.addListener("on.expand.change",e,t)},getExpanded:function(e){return this._expandProvider.toArray.apply(this._expandProvider,arguments)},expand:function(e,t){var n=this._getModelDataArr(e);if(0!==n.length)return 1===n.length&&!0===t&&n.forEach(function(e){pt(n,Qn.getAncestorArray(e))}),this._addExpand(n)},collapse:function(e,t){var n=this._getModelDataArr(e);if(0!==n.length)return!0===t&&n.forEach(function(e){pt(n,Qn.getAddedDescendantArray(e))}),this._removeExpand(n)},expandAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=gt(t,this._isVisible_,this)),this._expandProvider.set(this._filterExpandableData(t))},collapseAll:function(){return this._expandProvider.clear.apply(this._expandProvider,arguments)},isExpanded:function(e){return!!(e=this._getModelData(e))&&this._expandProvider.contains(e)},toggleExpand:function(e){(e=this._getModelData(e))&&(this.isExpanded(e)?this.collapse(e):this.expand(e))},_addExpand:function(e){return this._expandProvider.add(this._filterExpandableData(e))},_removeExpand:function(e){e.forEach(function(e){this._expandProvider.remove(e)},this)},_filterExpandableData:function(e){return e.filter(function(e){return this._isExpandable(e)&&!this.isDisabled(e)},this)},_isDataAncestorExpanded:function(e){e=Qn.getAncestorArray(e);if(0===e.length)return!0;var t=!0;return e.forEach(function(e){this.isExpanded(e)||(t=!1)},this),t}}}function Ke(t){return{_onDataRemove:function(e){t.superClass._onDataRemove.apply(this,arguments),this._removeHover(e,!1)},_onDataClear:function(){t.superClass._onDataClear.apply(this,arguments),this._clearHover(!1)},_onModelChange:function(e){t.superClass._onModelChange.apply(this,arguments),"set_provider"===e&&this._clearHover(!1)},setHoverData:function(e){this._setHoverData(this._getModelData(e),!0)},getHoverData:function(){return this._hoverData},isHover:function(e){return!!(e=this._getModelData(e))&&this._hoverData===e},hasHover:function(){return null!=this._hoverData},_isHoverable:function(e){return this.isHoverable(e)},isHoverable:function(e){return!0===this.getDataViewProperty(e,"hoverable")},_removeHover:function(e,t){e===this._hoverData&&this._setHoverData(null,t)},_clearHover:function(e){this._setHoverData(null,e)},_setHoverData:function(e,t,n){this._hoverData!==e&&((t=!1!==t)&&this._hoverData&&this._onHoverChange(this._hoverData,!1,n),this._hoverData=e,t&&this._hoverData&&this._onHoverChange(this._hoverData,!0,n))},_onHoverChange:function(e,t,n){this._addHoverNeedUpdateData(e),this._update(),this._callOn("onHoverChange","on.hover.change",{data:e,event:n,isHover:t},[e,t])},onHoverChange:function(e,t){this.addListener("on.hover.change",e,t)},_addHoverNeedUpdateData:function(e){this._addNeedUpdateData(e,!1,!1)}}}function o(e){return{setProvider:function(e){this._provider!==e&&(Jn.isProvider(e)||Re.throwError("Only z.Provider instance is allowed"),this._removeProviderListener(),this._provider=e,this._addProviderListener(),this._beforeModelChange("set_provider"),this._onProviderChange(),this._onModelChange("set_provider"))},getProvider:function(){return this._provider},_onProviderChange:function(){},_removeProviderListener:function(){this._provider&&(this._provider.removeProviderChangeListener(this._handleProviderChange,this),this._provider.removeDataChangeListener(this._handleProviderDataChange,this),this._provider.removeIndexChangeListener(this._handleProviderDataIndexChange,this))},_addProviderListener:function(){this._provider.addProviderChangeListener(this._handleProviderChange,this),this._provider.addDataChangeListener(this._handleProviderDataChange,this),this._provider.addIndexChangeListener(this._handleProviderDataIndexChange,this)},_handleProviderChange:function(e){this._beforeModelChange("provider",e);var t=e.type;"add"===t?this._onDataAdd(e.data):"remove"===t?this._onDataRemove(e.data):"clear"===t&&this._onDataClear(e.data),this._onModelChange("provider",e)},_handleProviderDataChange:function(e){this._beforeModelChange("data",e),this._onDataChange(e.data,e),this._onModelChange("data",e)},_handleProviderDataIndexChange:function(e){this._beforeModelChange("index",e),this._onDataIndexChange(e.data,e),this._onModelChange("index",e)},_beforeModelChange:function(e,t){},_onModelChange:function(e,t){this._update(),this._callOn("onModelChange","on.model.change",{type:e,event:t},[e,t])},onModelChange:function(e,t){this.addListener("on.model.change",e,t)},offModelChange:function(e,t){this.removeListener("on.model.change",e,t)},_onDataAdd:function(e){this._callOn("onDataAdd","on.data.add",e,[e])},onDataAdd:function(e,t){this.addListener("on.data.add",e,t)},_onDataRemove:function(e){this._callOn("onDataRemove","on.data.remove",e,[e])},onDataRemove:function(e,t){this.addListener("on.data.remove",e,t)},_onDataClear:function(e){this._callOn("onDataClear","on.data.clear",e,[e])},onDataClear:function(e,t){this.addListener("on.data.clear",e,t)},_onDataIndexChange:function(e,t){this._callOn("onDataIndexChange","on.data.index.change",{data:e,event:t},[e,t])},onDataIndexChange:function(e,t){this.addListener("on.data.index.change",e,t)},_onDataChange:function(e,t){this._callOn("onDataChange","on.data.change",{data:e,event:t},[e,t])},onDataChange:function(e,t){this.addListener("on.data.change",e,t)},setData:function(e,t){var n;Zn(e)?n=e:(dt(e)||(e=[e]),n=new qe,e=or.parseJSON(e),!0===t&&e.forEach(function(e){e._bind(e.get("_$z_data"))}),n.add(e)),this.setProvider(n)},addData:function(e,t){return Yn(e)||(dt(e)||(e=[e]),Yn(e[0])||(e=or.parseJSON(e,null,this.getDataArray()))),1<arguments.length?this._provider.add(e,t):this._provider.add(e)},removeData:function(e){e=this._getModelDataArr(e);0!==e.length&&e.forEach(function(e){this._provider.remove(e)},this)},clearData:function(){return this._provider.clear.apply(this._provider,arguments)},containsData:function(e){return!!(e=Yn(e)?e:this._provider.find.apply(this._provider,arguments))&&this._provider.contains.apply(this._provider,arguments)},findData:function(e,t){return this._provider.find.apply(this._provider,arguments)},filterData:function(e,t){return this._provider.filter.apply(this._provider,arguments)},eachData:function(e,t){if(this._provider)return this._provider.each.apply(this._provider,arguments)},hEachData:function(e,t){if(this._provider)return this._provider.hEach.apply(this._provider,arguments)},getDataArray:function(e){return this._provider.toArray.apply(this._provider,arguments)},getRootDataArray:function(e){return this._provider.toRootArray.apply(this._provider,arguments)},getDataSize:function(){return this._provider.size.apply(this._provider,arguments)},_getModelDataArr:function(e,t){var n=[];return Yn(e)?n.push(e):dt(e)?e.forEach(function(e){Yn(e)?n.push(e):!Ne(e)||(e=this.findData(e))&&n.push(e)},this):Ne(e)&&(e=this.findData(e))&&n.push(e),t?gt(n,t):n},_getModelData:function(e){return Yn(e)?e:Ne(e)?this.findData(e):void 0}}}function a(e){return{_isMovable:function(e){return this.isMovable(e)},isMovable:function(e){return!1!==this.getDataViewProperty(e,"movable")}}}function d(e){return{_doViewOnResizeUpdate:function(e,t,n){if("onresize"===e)return!0===n&&An.removeResizeListener(this._root,this._handleViewResize,this),!0===t&&An.addResizeListener(this._root,this._handleViewResize,this),!0},_handleViewResize:function(){this._callBatch(this._doBatchResizeUpdate,"onresize_cb_")},_doBatchResizeUpdate:function(){var e=this.getRootSize();0<e.width&&0<e.height&&this._doResizeUpdate(),this._onViewResize()},_onViewResize:function(){this._callOn("onViewResize","on.view.resize",{},[])},onViewResize:function(e,t){this.addListener("on.view.resize",e,t)},_doResizeUpdate:function(){},getRootSize:function(){return{width:this._root.clientWidth,height:this._root.clientHeight}}}}function h(e){return{_doUpdateDataRenderer:function(e){e=this.getDataRenderer(e);e&&e.update()},getDataRenderProperty:function(e,t){return e.getProperty(t)},_addDataRenderer:function(e){var t=this.createDataRenderer(e);t&&(this._rendererArrayMap.add(e.id(),t),this._addDataRendererImpl(e,t))},_addDataRendererImpl:function(e,t){},_removeDataRenderer:function(e){var t=this._rendererArrayMap.get(e.id());t&&(this._rendererArrayMap.remove(e.id()),this._removeDataRendererImpl(e,t),t.dispose())},_removeDataRendererImpl:function(e,t){},_clearDataRendererImpl:function(){},_updateDataRenderer:function(e,t){var n=this._rendererArrayMap.get(e.id());n&&this._updateDataRendererImpl(e,n,"parent"===t.property)},_updateDataRendererImpl:function(e,t,n){},_initAllDataRenderer:function(){this.getDataArray(!1).forEach(function(e){var t=this.createDataRenderer(e);t&&(this._rendererArrayMap.add(e.id(),t),this._addDataRendererImpl(e,t))},this)},_reorderAllDataRenderer:function(){},getDataRenderer:function(e){return this._rendererArrayMap.get(e.id())},createDataRenderer:function(e){var t=this.getDataRendererClass(e);return xt.createInstance(t,[this,e])},getDataRendererClass:function(e){}}}function _(e){return{isSelectable:function(e){return!1!==this.getDataViewProperty(e,"selectable")},getSelectMode:function(){return this.getProperty("select_mode")},_updateSelectProvider:function(){this._removeSelectProviderListener(),this._provider&&(!1!==this.getProperty("model_select")?this._selectProvider=this._provider.getSelectProvider():(this._selectProvider||(this._selectProvider=new ir(this._provider)),this._selectProvider.setProvider(this._provider)),this._addSelectProviderListener())},_removeSelectProviderListener:function(){this._selectProvider&&this._selectProvider.removeProviderChangeListener(this._handleSelectProviderChange,this)},_addSelectProviderListener:function(){this._selectProvider.addProviderChangeListener(this._handleSelectProviderChange,this)},_handleSelectProviderChange:function(e){var t=e.type;"add"===t?this._onSelectAdd(e.data):"remove"===t?this._onSelectRemove(e.data):"clear"===t?this._onSelectClear(e.data):"set"===t&&this._onSelectSet(e.data),this._onSelectChange(e)},_addSelectNeedUpdateData:function(e){this._addNeedUpdateData(e,!1,!1)},_onSelectAdd:function(e){this._addSelectNeedUpdateData(e),this._callOn("onSelectAdd","on.select.add",e,[e])},onSelectAdd:function(e,t){this.addListener("on.select.add",e,t)},_onSelectRemove:function(e){this._addSelectNeedUpdateData(e),this._callOn("onSelectRemove","on.select.remove",e,[e])},onSelectRemove:function(e,t){this.addListener("on.select.remove",e,t)},_onSelectClear:function(e){e.forEach(this._addSelectNeedUpdateData,this),this._callOn("onSelectClear","on.select.clear",e,[e])},onSelectClear:function(e,t){this.addListener("on.select.clear",e,t)},_onSelectSet:function(e){e.forEach(this._addSelectNeedUpdateData,this),this._callOn("onSelectSet","on.select.set",e,[e])},onSelectSet:function(e,t){this.addListener("on.select.set",e,t)},_onSelectChange:function(e){this._update(),this._callOn("onSelectChange","on.select.change",e,[e]),this._callBatch(this._onSelectBatchChange,"select_batch_cb_")},onSelectChange:function(e,t){this.addListener("on.select.change",e,t)},_onSelectBatchChange:function(){var e=this.getSelected();this._callOn("onSelectBatchChange","on.select.batch.change",e,[e]),0<e.length&&!0===this.getProperty("make_visible_on_select")&&this.makeVisible(this.getLastSelected())},onSelectBatchChange:function(e,t){this.addListener("on.select.batch.change",e,t)},select:function(e,t){e=this._getModelDataArr(e);return!0===t?this._addSelect(e):this._setSelect(e)},unselect:function(e){e=this._getModelDataArr(e);if(0!==e.length)return this._removeSelect(e)},addSelect:function(e){e=this._getModelDataArr(e);if(0!==e.length)return this._addSelect(e)},removeSelect:function(e){e=this._getModelDataArr(e);if(0!==e.length)return this._removeSelect(e)},setSelect:function(e){e=this._getModelDataArr(e);return this._setSelect(e)},selectAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=gt(t,this._isVisible,this)),this._selectProvider.set(this._filterSelectableData(t))},clearSelect:function(){return this._selectProvider.clear.apply(this._selectProvider,arguments)},getSelected:function(e){return this._selectProvider.toArray.apply(this._selectProvider,arguments)},getLastSelected:function(){return this._selectProvider.getLast.apply(this._selectProvider,arguments)},isSelected:function(e){return!!(e=this._getModelData(e))&&this._selectProvider.contains(e)},_addSelect:function(e){return this._selectProvider.add(this._filterSelectableData(e))},_removeSelect:function(e){e.forEach(function(e){this._selectProvider.remove(e)},this)},_setSelect:function(e){return this._selectProvider.set(this._filterSelectableData(e))},_filterSelectableData:function(e){return e.filter(function(e){return this.isSelectable(e)&&!this.isDisabled(e)},this)}}}function g(e){return{_isVisible:function(e){return this._isVisible_(e)},_isVisible_:function(e){return this.containsData(e)&&this.isVisible(e)&&this._isFilterVisible(e)},isVisible:function(e){return!1!==this.getDataViewProperty(e,"visible")},_isFilterVisible:function(t){var n=!0;return 0<this._dataVisibleFilterArray.length&&ft(this._dataVisibleFilterArray,function(e){if(!1===e(t))return n=!1}),n},addVisibleFilter:function(e){this._dataVisibleFilterArray.push(e),this._update()},removeVisibleFilter:function(e){vt(this._dataVisibleFilterArray,e),this._update()},clearVisibleFilter:function(){this._dataVisibleFilterArray.length=0,this._update()}}}function Je(){var e=nr(arguments,"appendTo"),t=M("div");this._root=t,this._controllerArray=[],Je.superClass.constructor.apply(this,arguments),!0===this.getProperty("onresize")&&!1===this.hasProperty("onresize")&&An.addResizeListener(t,this._handleViewResize,this),this._appendToUpdate(),He(t,"visibility","hidden"),e&&this.appendTo(e),wt(function(){tn(t,"visibility")},20)}function Ye(){var e=nr(arguments,"data");this._dataVisibleFilterArray=[],Ye.superClass.constructor.apply(this,arguments),Zn(e)?this.setProvider(e):(this.setProvider(new qe),e&&this.setData(e))}function y(){this._rendererArrayMap=new je,this._needUpdateDataArray=[],this._needUpdateDataADMap={},y.superClass.constructor.apply(this,arguments)}function Ze(){Ze.superClass.constructor.apply(this,arguments)}function v(e,t){this._view=e,this._data=t,this._renderConfig={}}function Qe(){Qe.superClass.constructor.apply(this,arguments),He(this.getRenderer(),"display","none"),this.getRenderer().setAttribute("__z_did_",this._data.id())}function et(){this._typeMap={}}function C(e){return{resetTransform:function(){this.set({zoom:1,translate_x:0,translate_y:0})},zoomIn:function(e){var t=this.getProperty("zoom")*this.getProperty("zoom_factor");!1!==e?this._zoomCenter(t):this.zoomByPoint(t,{x:0,y:0})},zoomOut:function(e){var t=this.getProperty("zoom")/this.getProperty("zoom_factor");!1!==e?this._zoomCenter(t):this._zoomByPoint(t,{x:0,y:0})},zoomCenter:function(e){this._zoomCenter(e)},zoomByPoint:function(e,t){this._zoomByPoint(e,t)},translate:function(e,t){var n=ke.getArgsPoint.apply(null,arguments);n&&(this.setProperty("translate_x",n.x),this.setProperty("translate_y",n.y))},_zoomCenter:function(e){var t=this.getRootSize(),n=t.width/2,t=t.height/2;this._zoomByPoint(e,{x:n,y:t})},_zoomByPoint:function(e,t){t=t||{x:0,y:0},e=this._getZoom(e);var n,r=this.getProperty("zoom");e!==r&&(this.set("zoom",e),n=t.x,t=t.y,e=e/r,this.translate(n-(n-this.getProperty("translate_x"))*e,t-(t-this.getProperty("translate_y"))*e))},_getZoom:function(e){var t=this.get("min_zoom"),n=this.get("max_zoom");return e<t?t:n<e?n:e},getTransformedPoint:function(e){var t;return sr(e)?t=e:bn.isPointerEvent(e)&&(t=this.getEventRelativePoint(e)),this._getTransformedPoint(t)},getTransformedRect:function(e){var t=this._getTransformedPoint({x:e.x,y:e.y}),e=this._getTransformedPoint({x:e.x+e.width,y:e.y+e.height});return{x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y}},getEventRelativePoint:function(e){var e=hn.getEventWindowOffset(e),t=hn.getElementWindowOffset(this.getRoot());return{x:e.x-t.x,y:e.y-t.y}},getDataWindowBounds:function(e,t){return this._getDataRelativeBounds(e,t,hn.getElementWindowOffset(this.getRoot()))},getDataPageBounds:function(e,t){return this._getDataRelativeBounds(e,t,hn.getElementPageOffset(this.getRoot()))},_getDataRelativeBounds:function(e,t,n){var e=e.getBounds(this,t=!1!==t?!0:t);return e?(t=this._getRelativePoint({x:e.x,y:e.y}),e=this._getRelativePoint({x:e.x+e.width,y:e.y+e.height}),{x:t.x+(n=n||{x:0,y:0}).x,y:t.y+n.y,width:e.x-t.x,height:e.y-t.y}):null},_getTransformedPoint:function(e){if(null==e)return null;var t=this.get("zoom");return{x:(e.x-this.getProperty("translate_x"))/t,y:(e.y-this.getProperty("translate_y"))/t}},_getRelativePoint:function(e){if(null==e)return null;var t=this.get("zoom");return{x:e.x*t+this.getProperty("translate_x"),y:e.y*t+this.getProperty("translate_y")}}}}function b(e){return{_initControllerCanvas:function(){this._controllerCanvas=We("canvas"),this._controllerC2d=this._controllerCanvas.getContext("2d"),this._controllerDrawArray=[],this._appendCanvas(this._controllerCanvas)},addControllerDraw:function(e,t){this._controllerDrawArray.push({draw:e,context:t}),this.updateControllerCanvas()},removeControllerDraw:function(t,n){he(this._controllerDrawArray,function(e){return e.draw===t&&e.context===n}),this.updateControllerCanvas()},updateControllerCanvas:function(){this._drawControllerCanvas()},_drawControllerCanvas:function(){zn.clear(this._controllerCanvas);var t=this._controllerC2d,e=(t.save(),E);1!==e&&t.scale(e,e),this._controllerDrawArray.forEach(function(e){e.draw.apply(e.context,[t])}),t.restore()}}}function x(){x.superClass.constructor.apply(this,arguments)}function P(){P.superClass.constructor.apply(this,arguments)}function R(){this._initCanvasView(),R.superClass.constructor.apply(this,arguments);var e=this.getRoot();He(e,"width","100%"),He(e,"height","100%"),He(e,"overflow","hidden"),He(e,"position","relative"),this._appendCanvas(this._dataCanvas),this.addController(new x)}var D,tt={version:"2.4.0"},A=l.Object,k=l.Array,L=l.String,nt=l.document,S=l.Math,rt=l.parseInt,it=l.parseFloat,E=l.devicePixelRatio||1,T=A.prototype.toString,V=k.prototype.push,O=k.prototype.slice,I=A.keys,M=nt.createElement.bind(nt),B=S.PI,z=S.pow,N=S.sqrt,U=S.atan2,ot=S.abs,at=S.max,st=S.min,G=S.cos,H=S.sin,W=S.acos,F=S.tan,lt=S.floor,ct=S.ceil,j=S.round,q=S.random,$=("function"!=typeof A.assign&&A.defineProperty(A,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=A(e),r=arguments.length,i=1;i<r;i++){var o=arguments[i];if(null!=o)for(var a in o)A.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},writable:!0,configurable:!0}),L.prototype.startsWith||(L.prototype.startsWith=function(e,t){t=0<t?0|t:0;return this.substring(t,t+e.length)===e}),L.prototype.endsWith||(L.prototype.endsWith=function(e,t){return(t===f||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&S.floor(e)===e}),{}),X=(l.FOCUS_UI_DEFAULTS&&A.assign($,l.FOCUS_UI_DEFAULTS),{capitalize:function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},replaceVars:function(e,n,t){return Ne(n)?(t=t||/{{(.+?)}}/,t=new RegExp(t,"g"),e.replace(t,function(e,t){t=mt(n,t);return Ne(t)?JSON.stringify(t):t})):e}}),K=X.capitalize,J={getArgsArray:function(e,t,n){var r=arguments.length;return r<3&&(n=e.length),O.call(e,t=r<2?0:t,n)}},Y=J.getArgsArray,Z="fu_model",Q="fu_data",ee="fu_provider",te="fu_view",ne="fu_gview",re="fu_node",ie="fu_link",oe="fu_group",ae="fu_subview",se="fu_linksubview",le={isArray:function(e){return k.isArray(e)},isString:function(e){return le.isPrimitiveType(e,"String")},isBoolean:function(e){return le.isPrimitiveType(e,"Boolean")},isObject:function(e){return le.isPrimitiveType(e,"Object")},isFunction:function(e){return le.isPrimitiveType(e,"Function")},isNumber:function(e){return le.isPrimitiveType(e,"Number")},isPrimitiveType:function(e,t){return!!t&&(t="[object "+t+"]",T.apply(e)===t)}},dt=le.isArray,ht=le.isString,ce=le.isBoolean,Ne=le.isObject,ut=le.isFunction,_t=le.isNumber,de={merge:function(e){for(var t=arguments.length,n=1;n<t;n++)V.apply(e,arguments[n]);return e},each:function(e,t,n){var r=e.length;if(0!==r)for(var i=0;i<r;i++)if(!1===t.apply(n,[e[i],i]))return},filter:function(e,t,n){return e.filter(t,n)},find:function(e,t,n){var r=e.length;if(0!==r){for(var i=0;i<r;i++)if(!0===t.apply(n,[e[i],i]))return e[i];return f}},removeItem:function(e,t,n){var r=e.length;if(0!==r){for(var i=0;i<r;i++){var o=e[i];if(!0===t.apply(n,[o,i]))return e.splice(i,1),o}return f}},toMap:function(e,t,n){var r={};return ut(t)?e.forEach(function(e){r[t.apply(n,[e])]=e}):e.forEach(function(e){r[e[t]]=e}),r},_removeByItem:function(e,t,n){var r=e.length,i=0;if(!0===n)for(i=r-1;-1<i;i--)e[i]===t&&e.splice(i,1);else for(i=0;i<r;i++)if(e[i]===t)return e.splice(i,1),e;return e}},pt=de.merge,ft=de.each,gt=de.filter,yt=de.find,he=de.removeItem,ue=de.toMap,vt=de._removeByItem,_e={merge:function(){return A.assign.apply(null,arguments)},deepMerge:function(t){for(var e=arguments.length,n={},r=1;r<e;r++){var i=arguments[r];I(i).forEach(function(e){_e.createKVMap(n,e,i[e])})}return I(n).forEach(function(e){_e.setDeepValue(t,e,n[e])}),t},getDeepKVMap:function(t){var n={};return I(t).forEach(function(e){_e.createKVMap(n,e,t[e])}),n},createKVMap:function(t,e,n){var r;Ne(n)?(r=e+".",I(n).forEach(function(e){_e.createKVMap(t,r+e,n[e])})):t[e]=n},each:function(e,t,n){for(var r=I(e),i=r.length,o=0;o<i;o++){var a=r[o];if(!1===t.apply(n,[a,e[a]]))return}},filter:function(e,t,n){for(var r=I(e),i=r.length,o={},a=0;a<i;a++){var s=r[a],l=e[s];!0===t.apply(n,[s,l])&&(o[s]=l)}return o},hasDeepValue:function(e,t,n){var r=t.split(n=n||"."),i=r.length;if(1===i)return e.hasOwnProperty(t);var o=r[0];if(!e.hasOwnProperty(o))return!1;var a=e[o],s=i-1;if(!Ne(a))return!1;for(var l=1;l<i;){if(o=r[l],!a.hasOwnProperty(o))return!1;if(a=a[o],l!==s&&!Ne(a))return!1;l++}return!0},getDeepValue:function(e,t,n){var r=t.split(n=n||"."),i=r.length;if(1===i)return e[t];var o=r[0];if(e.hasOwnProperty(o)){var a=e[o],s=i-1;if(Ne(a))for(var l=1;l<i;){if(o=r[l],!a.hasOwnProperty(o)){a=f;break}if(a=a[o],l!==s&&!Ne(a)){a=f;break}l++}else a=f}else a=f;return a},setDeepValue:function(e,t,n,r){var i=t.split(r=r||"."),r=i.length;if(1!==r){for(var o=e[l=i[0]],a=(Ne(o)||(e[l]=o={}),1),s=r-1;a<s;){var l,c=o[l=i[a]];Ne(c)||(o[l]=c={}),o=c,a++}o[i[s]]=n}else e[t]=n},getValues:function(e){for(var t=I(e),n=t.length,r=[],i=0;i<n;i++)r.push(e[t[i]]);return r}},Ue=(A.values&&(_e.getValues=function(e){return A.values(e)}),_e.merge),pe=_e.deepMerge,Ct=_e.each,fe=_e.filter,ge=_e.hasDeepValue,mt=_e.getDeepValue,ye=_e.setDeepValue,bt=_e.getValues,ve={i18n_map:A.create(null),i18n_count:0,getLabel:function(e,t){t=ve.i18n_map[t||ve.getLocal()];if(t){t=mt(t,e);if(null!=t)return t}return""},setLocal:function(e){ve.local=e},getLocal:function(){return ve.local},add:function(e,t,n){var r=ve.i18n_map[e];r?!0===n?Ne(t)?ve.i18n_map[e]=t:(delete ve.i18n_map[e],ve.i18n_count--):pe(r,t):Ne(t)&&(ve.i18n_map[e]=t,0===ve.i18n_count&&null==ve.local&&ve.setLocal(e),ve.i18n_count++)}},xt={extend:function(l,e,t){function n(){}n.prototype=e.prototype,l.prototype=new n,(l.prototype.constructor=l).superClass=e.prototype,l.__zsuperClass_=e,t&&Ct(t,function(e,t){if(0===e.indexOf("___z"))if("___zdefaults_"===e)t&&Ct(t,function(e,t){xt.setClassDefault(l,e,t)});else for(var n="",r=("___zsg"===e?n="get":"___zsi"===e&&(n="is"),t.length),i=0;i<r;i++){var o,a,s=t[i];!s||(s=s.trim())&&(o=xt.getSetFuncName(s),a=xt.getGetFuncName(s,n),l.prototype[o]=xt.createSetFunc(s),l.prototype[a]=xt.createGetFunc(s))}else"__className_"===e?(xt.__classNameMap[t]=l).__className_=t:l.prototype[e]=t})},getSetFuncName:function(e){var e=e.split("_"),t="set";return e.forEach(function(e){t+=K(e)}),t},getGetFuncName:function(e,t){var e=e.split("_"),n=t;return e.forEach(function(e){n+=K(e)}),n},createSetFunc:function(t){return function(e){this.setProperty(t,e)}},createGetFunc:function(e){return function(){return this.getProperty(e)}},getClassDefault:function(e,t){var n=e.___zdefaults_;return null!=n&&n.hasOwnProperty(t)?n[t]:e.__zsuperClass_?xt.getClassDefault(e.__zsuperClass_,t):null},setClassDefault:function(e,t,n){var r=e.___zdefaults_;null==r&&(e.___zdefaults_=r={}),r[t]=n},_setClassDefault:function(n,e,t){var r=arguments.length;2===r?Ct(e,function(e,t){xt.setClassDefault(n,e,t)}):2<r&&xt.setClassDefault(n,e,t)},_extendPrototype:function(n,e,t){var r=arguments.length;2===r?Ct(e,function(e,t){n.prototype[e]=t}):2<r&&(n.prototype[e]=t)},__classNameMap:{},createInstance:function(e,t){return(e=e&&(ht(e)?xt.getClassByName(e):e))?2===arguments.length?xt.__createInstance(e,t):new e:null},__createInstance:function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);case 9:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]);case 10:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]);case 11:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10]);case 12:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]);case 13:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12]);case 14:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13]);case 15:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14]);case 16:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[14]);default:throw new Error("So many parameters(>16) are not supported...")}},getClassByName:function(e){if(xt.__classNameMap.hasOwnProperty(e))return xt.__classNameMap[e];var t=e.split("."),n=t.length,e=null;if(0<n){for(var r=l[t[0]],i=1;r&&i<n;)r=r[t[i]],i++;e=r}return e},newClass:function(e,t,n,r){function i(){i.superClass.constructor.apply(this,arguments),t.apply(this,arguments)}return xt.extend(i,e||A,n),r&&Ct(r,function(e,t){xt.setClassDefault(i,e,t)}),i}},Ge=xt.extend,Ce=(Ge(je,A,{add:function(e,t,n){if(!0===this.has(e)){var r=this._map[e];if(r===t)return;vt(this._array,r)}this._map[e]=t,3<=arguments.length?this._array.splice(n,0,t):this._array.push(t)},remove:function(e){var t;return!0===this.has(e)&&(t=this._map[e],delete this._map[e],vt(this._array,t)),t},clear:function(){this._array.length=0,this._map={}},has:function(e){return this._map.hasOwnProperty(e)},get:function(e){return this._map[e]},keys:function(){return I(this._map)},size:function(){return this._array.length},toArray:function(e){return!1===e?this._array:pt([],this._array)},eachObject:function(e,t){return Ct(this._map,e,t)},eachArray:function(e,t){return ft(this._array,e,t)},findArray:function(e,t){return yt(this._array,e,t)},filterArray:function(e,t){return gt(this._array,e,t)}}),l.setTimeout),me=l.clearTimeout,Pt={__callLaterListMap:new je,__callIntervalListMap:new je,__callRAFIntervalListMap:new je,callBatch:function(e,t){var n=(t=t||{}).object||t.context||l,r=t.key||"_call_batch_key";return!0!==n[r]&&(n[r]=!0,Pt.callRAFLater(function(){e.apply(t.context),!1!==t.reset&&delete n[r]}),!0)},callLater:function(t,e,n){function r(){var e=r.id;null!=e&&(t.apply(n,[]),Pt.__deleteCallLater(e))}var i=Re.guid(),o=(r.id=i,Pt.__setTimeout(r,e));return Pt.__callLaterListMap.add(i,{id:i,timeout_id:o,later_callBack:r,callBack:t,delay:e,context:n}),i},cancelCallLater:function(t,n,r){ut(t)?Pt.__callLaterListMap.eachArray(function(e){return e.callBack!==t||e.delay!==n||e.context!==r||(Pt.__deleteCallLater(e.id),!1)}):Pt.__deleteCallLater(t)},callInterval:function(t,n,r,e,i){var o;if(!0!==e||!1!==t.apply(r))return e=Re.guid(),o=function(){var e=o.id;null!=e&&(!0===i&&nt&&"visible"!==nt.visibilityState||!1!==t.apply(r,arguments)?Pt.__setTimeout(o,n):Pt.__deleteInterval(e))},Pt.__callIntervalListMap.add(o.id=e,{id:e,later_callBack:o,callBack:t,delay:n,context:r}),Pt.__setTimeout(o,n),e},cancelCallInterval:function(t,n,r){ut(t)?Pt.__callIntervalListMap.eachArray(function(e){return e.callBack!==t||e.delay!==n||e.context!==r||(Pt.__deleteInterval(e.id),!1)}):Pt.__deleteInterval(t)},callRAFLater:function(e,t){return Pt.requestAnimationFrame(e,t)},callRAFInterval:function(t,n,e){if(!0===e&&!1===t.apply(n))return;function r(){var e=r.id;null!=e&&(!1!==t.apply(n,arguments)?Pt.requestAnimationFrame(r):Pt.__deleteRAFInterval(e))}e=Re.guid();return Pt.__callRAFIntervalListMap.add(r.id=e,{id:e,later_callBack:r,callBack:t,context:n},r),Pt.requestAnimationFrame(r),e},cancelCallRAFInterval:function(t,n){ut(t)?Pt.__callRAFIntervalListMap.eachArray(function(e){return e.callBack!==t||e.context!==n||(Pt.__deleteRAFInterval(e.id),!1)}):Pt.__deleteRAFInterval(t)},__setTimeout:function(e,t,n){var r=e;return null!=n&&(r=e.bind(n)),Ce(r,t)},__deleteCallLater:function(e){var e=Pt.__callLaterListMap.remove(e);e&&(delete e.later_callBack.id,(e=e.timeout_id)&&me(e))},__deleteInterval:function(e){e=Pt.__callIntervalListMap.remove(e);e&&delete e.later_callBack.id},__deleteRAFInterval:function(e){e=Pt.__callRAFIntervalListMap.remove(e);e&&delete e.later_callBack.id}},be=(Pt.__raf=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||l.msRequestAnimationFrame,Pt.__raf?Pt.requestAnimationFrame=function(e,t){var n;return e?(n=e,null!=t&&(n=e.bind(t)),Pt.__raf.call(l,n)):f}:Pt.requestAnimationFrame=function(e,t){return Pt.__setTimeout(e,17,t)},Pt.callBatch),wt=Pt.callLater,xe=Pt.callInterval,Rt=Pt.callRAFLater,Dt=Pt.callRAFInterval,Pe=(Fe({DATE_TIME_FORMAT:"%Y-%m-%d %H:%M:%S",DATE_TIME_WEEKS:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],DATE_TIME_MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"]}),{localTimezoneOffset:(new Date).getTimezoneOffset(),_getTimezoneOffset:function(){return ze("DATE_TIMEZONE_OFFSET")||Pe.localTimezoneOffset},toLocalDate:function(e,t){e=_t(e)?new Date(Pe.getTimestamp(e)):new Date(e);return isNaN(e.getTime())?null:(null==t&&(t=Pe.localTimezoneOffset),e.setMinutes(e.getUTCMinutes()-t),new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()))},format:function(i,e){var n=(e=e||{}).date_format,t=e.out_format,e=e.timezone_offset;if(null==i)return"";if(!((i=i instanceof Date?i:n?Pe.parse(i,n):Pe.toLocalDate(i,e))instanceof Date)||isNaN(i.getTime()))return"";null==t&&(t=ze("DATE_TIME_FORMAT"));function o(){var e=new Date(i);return e.setDate(l-(s+6)%7+3),e}function a(e,t){return(""+(z(10,t)+e)).slice(1)}var u=ze("DATE_TIME_WEEKS"),_=ze("DATE_TIME_MONTHS"),s=i.getDay(),l=i.getDate(),c=i.getMonth(),d=i.getFullYear(),h=i.getHours(),p=[0,31,59,90,120,151,181,212,243,273,304,334];return t.replace(/%[a-z]/gi,function(e){return{"%a":u[s].slice(0,3),"%A":u[s],"%b":_[c].slice(0,3),"%B":_[c],"%c":i.toUTCString(),"%C":lt(d/100),"%d":a(l,2),"%e":l,"%F":i.toISOString().slice(0,10),"%G":o().getFullYear(),"%g":(""+o().getFullYear()).slice(2),"%H":a(h,2),"%I":a((h+11)%12+1,2),"%j":a(p[c]+l+(1<c&&0==(3&d)&&(d%100!=0||d%400==0)?1:0),3),"%k":""+h,"%l":(h+11)%12+1,"%m":a(c+1,2),"%M":a(i.getMinutes(),2),"%p":h<12?"AM":"PM","%P":h<12?"am":"pm","%s":j(i.getTime()/1e3),"%S":a(i.getSeconds(),2),"%u":s||7,"%V":(t=o(),n=t.valueOf(),t.setMonth(0,1),4!==(r=t.getDay())&&t.setMonth(0,1+(4-r+7)%7),a(1+ct((n-t)/6048e5),2)),"%w":""+s,"%x":i.toLocaleDateString(),"%X":i.toLocaleTimeString(),"%y":(""+d).slice(2),"%Y":d,"%z":i.toTimeString().replace(/.+GMT([+-]\d+).+/,"$1"),"%Z":i.toTimeString().replace(/.+\((.+?)\)$/,"$1")}[e]||e;var t,n,r})},getTimestamp:function(e){var t=((e=rt(e))+"").length;return 13===t?e:10===t?rt(1e3*e):null},_parseFormat:{"%":["%",function(){}],a:["[a-z]+",function(e){}],A:["[a-z]+",function(e){}],b:["[a-z]+",function(e){this.setUTCMonth(Pe._parseMonthMap[e])}],B:["[a-z]+",function(e){this.setUTCMonth(Pe._parseMonthMap[e.slice(0,3)])}],Y:["[0-9]{4}",function(e){this.setUTCFullYear(+e)}],m:["[0-9]{0,2}",function(e){this.setUTCMonth(+e-1)}],d:["[0-9]{0,2}",function(e){this.utcDay=+e}],H:["[0-9]{0,2}",function(e){this.setUTCHours(+e)}],M:["[0-9]{0,2}",function(e){this.setUTCMinutes(+e)}],S:["[0-9]{0,2}",function(e){this.setUTCSeconds(+e)}],s:["[0-9]+",function(e){this.setUTCMilliseconds(+e)}],z:["[+-][0-9]{4}",function(e){this.timezone=3600*+e.slice(0,3)+60*+e.slice(3,5)}],Z:["UTC|Z|[+-][0-9][0-9]:?[0-9][0-9]",function(e){"Z"!==e&&"UTC"!==e&&(e=e.replace(/:/,""),this.timezone=3600*+e.slice(0,3)+60*+e.slice(3,5))}],I:["[0-9]{0,2}",function(e){this.setUTCHours(+e)}],p:["AM|PM",function(e){this.AMPM=e}]},_parseMonthMap:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},parse:function(e,t){if(!t)return null;var i=[],o=!1,t=new RegExp(t.replace(/%(?:([a-zA-Z%])|('[^']+')|("[^"]+"))/g,function(e,t,n,r){t=Pe._parseFormat[t||n||r];if(t)return i.push(t[1]),"("+t[0]+")";o=!0}),"i");if(!0===o)return null;var n=e.match(t);if(!n)return null;for(var r=new Date(0),a=0,s=i.length;a<s;a++){var l=i[a];l&&l.call(r,n[a+1])}return r.utcDay&&r.setUTCDate(r.utcDay),(r=r.timezone?new Date(r.getTime()-1e3*r.timezone):r).AMPM&&(12===r.getUTCHours()&&r.setUTCHours(r.getUTCHours()-12),"PM"===r.AMPM&&r.setUTCHours(r.getUTCHours()+12)),r}}),c=(Fe("COLOR_NAME_HEX_MAP",{AliceBlue:"f0f8ff",AntiqueWhite:"faebd7",Aqua:"00ffff",Aquamarine:"7fffd4",Azure:"f0ffff",Beige:"f5f5dc",Bisque:"ffe4c4",Black:"000000",BlanchedAlmond:"ffebcd",Blue:"0000ff",BlueViolet:"8a2be2",Brown:"a52a2a",BurlyWood:"deb887",CadetBlue:"5f9ea0",Chartreuse:"7fff00",Chocolate:"d2691e",Coral:"ff7f50",CornflowerBlue:"6495ed",Cornsilk:"fff8dc",Crimson:"dc143c",Cyan:"00ffff",DarkBlue:"00008b",DarkCyan:"008b8b",DarkGoldenRod:"b8860b",DarkGray:"a9a9a9",DarkGrey:"a9a9a9",DarkGreen:"006400",DarkKhaki:"bdb76b",DarkMagenta:"8b008b",DarkOliveGreen:"556b2f",DarkOrange:"ff8c00",DarkOrchid:"9932cc",DarkRed:"8b0000",DarkSalmon:"e9967a",DarkSeaGreen:"8fbc8f",DarkSlateBlue:"483d8b",DarkSlateGray:"2f4f4f",DarkSlateGrey:"2f4f4f",DarkTurquoise:"00ced1",DarkViolet:"9400d3",DeepPink:"ff1493",DeepSkyBlue:"00bfff",DimGray:"696969",DimGrey:"696969",DodgerBlue:"1e90ff",FireBrick:"b22222",FloralWhite:"fffaf0",ForestGreen:"228b22",Fuchsia:"ff00ff",Gainsboro:"dcdcdc",GhostWhite:"f8f8ff",Gold:"ffd700",GoldenRod:"daa520",Gray:"808080",Grey:"808080",Green:"008000",GreenYellow:"adff2f",HoneyDew:"f0fff0",HotPink:"ff69b4",IndianRed:"cd5c5c",Indigo:"4b0082",Ivory:"fffff0",Khaki:"f0e68c",Lavender:"e6e6fa",LavenderBlush:"fff0f5",LawnGreen:"7cfc00",LemonChiffon:"fffacd",LightBlue:"add8e6",LightCoral:"f08080",LightCyan:"e0ffff",LightGoldenRodYellow:"fafad2",LightGray:"d3d3d3",LightGrey:"d3d3d3",LightGreen:"90ee90",LightPink:"ffb6c1",LightSalmon:"ffa07a",LightSeaGreen:"20b2aa",LightSkyBlue:"87cefa",LightSlateGray:"778899",LightSlateGrey:"778899",LightSteelBlue:"b0c4de",LightYellow:"ffffe0",Lime:"00ff00",LimeGreen:"32cd32",Linen:"faf0e6",Magenta:"ff00ff",Maroon:"800000",MediumAquaMarine:"66cdaa",MediumBlue:"0000cd",MediumOrchid:"ba55d3",MediumPurple:"9370db",MediumSeaGreen:"3cb371",MediumSlateBlue:"7b68ee",MediumSpringGreen:"00fa9a",MediumTurquoise:"48d1cc",MediumVioletRed:"c71585",MidnightBlue:"191970",MintCream:"f5fffa",MistyRose:"ffe4e1",Moccasin:"ffe4b5",NavajoWhite:"ffdead",Navy:"000080",OldLace:"fdf5e6",Olive:"808000",OliveDrab:"6b8e23",Orange:"ffa500",OrangeRed:"ff4500",Orchid:"da70d6",PaleGoldenRod:"eee8aa",PaleGreen:"98fb98",PaleTurquoise:"afeeee",PaleVioletRed:"db7093",PapayaWhip:"ffefd5",PeachPuff:"ffdab9",Peru:"cd853f",Pink:"ffc0cb",Plum:"dda0dd",PowderBlue:"b0e0e6",Purple:"800080",RebeccaPurple:"663399",Red:"ff0000",RosyBrown:"bc8f8f",RoyalBlue:"4169e1",SaddleBrown:"8b4513",Salmon:"fa8072",SandyBrown:"f4a460",SeaGreen:"2e8b57",SeaShell:"fff5ee",Sienna:"a0522d",Silver:"c0c0c0",SkyBlue:"87ceeb",SlateBlue:"6a5acd",SlateGray:"708090",SlateGrey:"708090",Snow:"fffafa",SpringGreen:"00ff7f",SteelBlue:"4682b4",Tan:"d2b48c",Teal:"008080",Thistle:"d8bfd8",Tomato:"ff6347",Turquoise:"40e0d0",Violet:"ee82ee",Wheat:"f5deb3",White:"ffffff",WhiteSmoke:"f5f5f5",Yellow:"ffff00",YellowGreen:"9acd32"}),Fe("COLOR_DEFAULTS",["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]),{defaults:function(e){var t=ze("COLOR_DEFAULTS");return 0<arguments.length?t[e%t.length]:t.slice()},random:function(e,t){e=(e||"hex").toLowerCase();var n=ze("COLOR_NAME_HEX_MAP"),r=I(n);if("name"===e)return r[r.length*q()|0];r=bt(n),n="#"+r[r.length*q()|0];if("hex"===e)return n;r=c._getRGBByHex(n);return"rgba"!==e&&"hsla"!==e||(r.alpha=(11*q()|0)/10),c.convert(r,e,t)},toRGB:function(e,t){return c.convert(e,"rgb",t)},toRGBA:function(e,t){return c.convert(e,"rgba",t)},toHSL:function(e,t){return c.convert(e,"hsl",t)},toHSLA:function(e,t){return c.convert(e,"hsla",t)},toHex:function(e){return c.convert(e,"hex")},toName:function(e){return c.convert(e,"name")},convert:function(e,t,n){var r,i;if(t=t.toLowerCase(),null!=e&&(i=Ne(e)?c._roundRGBObj(e):(r=c._getColorType(e),c._getColorRGBObject(e,r))),!0===n)switch(t){case"rgb":case"rgba":return i;case"hsl":case"hsla":return c._rgbObjToHSLAObj(i)}if(i)switch(t){case"rgb":return c._rgbObjToRGBStr(i);case"rgba":return c._rgbObjToRGBAStr(i);case"hsl":return c._rgbObjToHSLStr(i);case"hsla":return c._rgbObjToHSLAStr(i);case"hex":return c._rgbObjToHexStr(i);case"name":return c._rgbObjToNameStr(i)}return""},mix:function(e,t,n,r,i){null==n&&(n=.5),r=(r||"hex").toLowerCase();e=c.toRGBA(e,!0),t=c.toRGBA(t,!0);return c.convert({red:ke.range(e.red+(t.red-e.red)*n,0,255),green:ke.range(e.green+(t.green-e.green)*n,0,255),blue:ke.range(e.blue+(t.blue-e.blue)*n,0,255),alpha:ke.range(e.alpha+(t.alpha-e.alpha)*n,0,1)},r,i)},lighten:function(e,t,n,r){return c._adjustLightness(e,t=null==t?.1:t,n,r)},darken:function(e,t,n,r){return null==t?t=-.1:t*=-1,c._adjustLightness(e,t,n,r)},_adjustLightness:function(e,t,n,r){return c._adjustHSL("lightness",e,t,n,r)},saturate:function(e,t,n,r){return c._adjustSaturation(e,t=null==t?.1:t,n,r)},desaturate:function(e,t,n,r){return null==t?t=-.1:t*=-1,c._adjustSaturation(e,t,n,r)},_adjustSaturation:function(e,t,n,r){return c._adjustHSL("saturation",e,t,n,r)},_adjustHSL:function(e,t,n,r,i){r=(r=null==r&&"name"===(r=c._getColorType(t))?"hsl":r).toLowerCase();var o,t=c.toHSL(t,!0);return t&&(ot(n)<1&&(n*=100),o=t[e],t[e]=ke.range(o+n,0,100),(o=c._hslToRGB(t.hue,t.saturation,t.lightness)).alpha=t.alpha),c.convert(o,r,i)},_getColorType:function(e){return(e=e.trim().toLowerCase()).startsWith("#")?"hex":e.startsWith("rgba")?"rgba":e.startsWith("rgb")?"rgb":e.startsWith("hsla")?"hsla":e.startsWith("hsl")?"hsl":c._getHexByName(e)?"name":""},_roundRGBObj:function(e){return e&&{red:j(e.red),green:j(e.green),blue:j(e.blue),alpha:e.alpha}},_rgbToHex:function(e){return((1<<24)+(e.red<<16)+(e.green<<8)+e.blue).toString(16).slice(1)},_getNameByHex:function(n){var r;return n=n.toLowerCase(),Ct(ze("COLOR_NAME_HEX_MAP"),function(e,t){if(t.toLowerCase()===n)return r=e,!1}),r},_getHexByName:function(n){var r;return n=n.toLowerCase(),Ct(ze("COLOR_NAME_HEX_MAP"),function(e,t){if(e.toLowerCase()===n)return r=t,!1}),r},_hslToRGB:function(e,t,n){return t/=100,{red:255*c._hueToRGB(t=2*(n/=100)-(n=n<=.5?n*(t+1):n+t-n*t),n,(e/=60)+2),green:255*c._hueToRGB(t,n,e),blue:255*c._hueToRGB(t,n,e-2)}},_hueToRGB:function(e,t,n){return n<0&&(n+=6),6<=n&&(n-=6),n<1?(t-e)*n+e:n<3?t:n<4?(t-e)*(4-n)+e:e},_rgbToHSL:function(e){for(var t,n,r=[e.red/255,e.green/255,e.blue/255],i=r[0],o=r[0],a=0,s=0;s<2;s++)r[s+1]<=i&&(i=r[s+1]),o<=r[s+1]&&(o=r[s+1],a=s+1);return 0===a&&(n=(r[1]-r[2])/(o-i)),1===a&&(n=2+(r[2]-r[0])/(o-i)),2===a&&(n=4+(r[0]-r[1])/(o-i)),isNaN(n)&&(n=0),(n*=60)<0&&(n+=360),e=(i+o)/2,t=i===o?0:e<.5?(o-i)/(o+i):(o-i)/(2-o-i),{hue:j(n),saturation:j(100*t),lightness:j(100*e)}},_rgbObjToHSLAObj:function(e){var t;return e?(t=e.alpha,(e=c._rgbToHSL(e)).alpha=t,e):null},_rgbObjToRGBStr:function(e){return e?"rgb("+e.red+", "+e.green+", "+e.blue+")":""},_rgbObjToRGBAStr:function(e){return e?"rgba("+e.red+", "+e.green+", "+e.blue+", "+e.alpha+")":""},_rgbObjToHSLStr:function(e){var t;return e?(t=e.alpha,(e=c._rgbToHSL(e)).alpha=t,"hsl("+e.hue+", "+e.saturation+"%, "+e.lightness+"%)"):""},_rgbObjToHSLAStr:function(e){var t;return e?(t=e.alpha,(e=c._rgbToHSL(e)).alpha=t,"hsla("+e.hue+", "+e.saturation+"%, "+e.lightness+"%, "+e.alpha+")"):""},_rgbObjToHexStr:function(e){return e?"#"+c._rgbToHex(e):""},_rgbObjToNameStr:function(e){return e?(e=c._rgbToHex(e),c._getNameByHex(e)||""):""},_getColorRGBObject:function(e,t){if(!t)return null;var n;switch(e=e.trim().toLowerCase(),t){case"hex":n=c._getRGBByHex(e);break;case"rgba":n=c._getRGBObjByRGBA(e);break;case"rgb":n=c._getRGBObjByRGB(e);break;case"hsla":n=c._getRGBObjByHSLA(e);break;case"hsl":n=c._getRGBObjByHSL(e);break;case"name":n=c._getRGBObjByName(e)}return n=c._roundRGBObj(n)},_getColorArgs:function(e){var t=[],e=e.match(/\((.*?)\)/g);return e&&2<(e=e[0]).length&&(e=e.substring(1,e.length-1)).split(",").forEach(function(e){-1<(e=e.trim()).indexOf("%")&&(e=e.replace("%","")),t.push(it(e))}),t},_getRGBObjByHSL:function(e){var e=c._getColorArgs(e);return 2<e.length?{red:(e=c._hslToRGB(e[0],e[1],e[2])).red,green:e.green,blue:e.blue,alpha:1}:null},_getRGBObjByHSLA:function(e){var t,e=c._getColorArgs(e);return 3<e.length?{red:(t=c._hslToRGB(e[0],e[1],e[2])).red,green:t.green,blue:t.blue,alpha:it(e[3])}:null},_getRGBObjByRGB:function(e){e=c._getColorArgs(e);return 2<e.length?{red:e[0],green:e[1],blue:e[2],alpha:1}:null},_getRGBObjByRGBA:function(e){e=c._getColorArgs(e);return 3<e.length?{red:e[0],green:e[1],blue:e[2],alpha:e[3]}:null},_getRGBObjByName:function(e){e=c._getHexByName(e);return e?c._getRGBByHex(e):null},_getRGBByHex:function(e){var t=1;return 8===(e=3!==(e=e.replace("#","")).length&&4!==e.length?e:e.replace(/(.)/g,"$1$1")).length&&(t=it((rt(e.substr(6,2),16)/255).toFixed(2)),e=e.substr(0,6)),6===e.length?{red:rt(e.substr(0,2),16),green:rt(e.substr(2,2),16),blue:rt(e.substr(4,2),16),alpha:t}:null}}),we={isMoveTo:function(e){return"move_to"===e||"mt"===e||"moveTo"===e},isLineTo:function(e){return"line_to"===e||"lt"===e||"lineTo"===e},isQuadraticCurveTo:function(e){return"quadratic_curve_to"===e||"qct"===e||"qt"===e||"quadraticCurveTo"===e},isBezierCurveTo:function(e){return"bezier_curve_to"===e||"bct"===e||"ct"===e||"bezierCurveTo"===e},isBezier:function(e){return we.isQuadraticCurveTo(e)||we.isBezierCurveTo(e)},isClose:function(e){return"close"===e}},Re={__uid:0,guid:function(){return"_z-i-"+Re.__uid++},logError:function(e){console.error(e)},throwError:function(e){throw new Error(e)},exec:function(e,t,n){n=n||/([\[{])(.+?)([\]}])/,n=new RegExp(n,"g");e=e.replace(n,function(e){e=e.substr(1,e.length-2),e=mt(t,e);return null!=(e=!ht(e)||e.startsWith("'")||e.startsWith('"')?e:"'"+e+"'")?e:e||"''"});return new Function("return "+e).apply({},[])}},De=180,Ae=360,p=(u.prototype={update:function(){this.dpoints=[];for(var e=this.points,t=e.length,n=t-1;1<t;t--,n--){for(var r,i=[],o=0;o<n;o++)r={x:n*(e[o+1].x-e[o].x),y:n*(e[o+1].y-e[o].y)},this._3d&&(r.z=n*(e[o+1].z-e[o].z)),i.push(r);this.dpoints.push(i),e=i}this.computedirection()},computedirection:function(){var e=this.points,e=p.angle(e[0],e[this.order],e[1]);this.clockwise=0<e},length:function(){return p.length(this.derivative.bind(this))},_lut:[],getLUT:function(e){if(this._lut.length===(e=e||100))return this._lut;this._lut=[];for(var t=0;t<=e;t++)this._lut.push(this.compute(t/e));return this._lut},project:function(e){var t,n=this.getLUT(),r=n.length-1,n=p.closest(n,e),i=n.mdist,n=n.mpos;if(0===n||n===r)return(t=this.compute(a=n/r)).t=a,t.d=i,t;var o,a,s,l,d=(n+1)/r,c=.1/r;for(i+=1,o=a=(n-1)/r;a<d+c;a+=c)s=this.compute(a),(l=p.dist(e,s))<i&&(i=l,o=a);return(s=this.compute(o)).t=o,s.d=i,s},get:function(e){return this.compute(e)},compute:function(e){if(0===e)return this.points[0];if(1===e)return this.points[this.order];var d,h,t,n,r,i,o,a=this.points,s=1-e;if(1===this.order)return o={x:s*a[0].x+e*a[1].x,y:s*a[0].y+e*a[1].y},this._3d&&(o.z=s*a[0].z+e*a[1].z),o;if(this.order<4)return d=s*s,h=e*e,i=0,2===this.order?(a=[a[0],a[1],a[2],p.ZERO],t=d,n=s*e*2,r=h):3===this.order&&(t=d*s,n=d*e*3,r=s*h*3,i=e*h),o={x:t*a[0].x+n*a[1].x+r*a[2].x+i*a[3].x,y:t*a[0].y+n*a[1].y+r*a[2].y+i*a[3].y},this._3d&&(o.z=t*a[0].z+n*a[1].z+r*a[2].z+i*a[3].z),o;for(var l=JSON.parse(JSON.stringify(this.points));1<l.length;){for(var c=0;c<l.length-1;c++)l[c]={x:l[c].x+(l[c+1].x-l[c].x)*e,y:l[c].y+(l[c+1].y-l[c].y)*e},void 0!==l[c].z&&(l[c]=l[c].z+(l[c+1].z-l[c].z)*e);l.splice(l.length-1,1)}return l[0]},raise:function(){for(var e,t,n=this.points,r=[n[0]],i=n.length,o=1;o<i;o++)e=n[o],t=n[o-1],r[o]={x:(i-o)/i*e.x+o/i*t.x,y:(i-o)/i*e.y+o/i*t.y};return r[i]=n[i-1],new u(r)},derivative:function(e){var t,n,r=1-e,i=0,o=this.dpoints[0],r=(2===this.order&&(o=[o[0],o[1],p.ZERO],t=r,n=e),3===this.order&&(t=r*r,n=r*e*2,i=e*e),{x:t*o[0].x+n*o[1].x+i*o[2].x,y:t*o[0].y+n*o[1].y+i*o[2].y});return this._3d&&(r.z=t*o[0].z+n*o[1].z+i*o[2].z),r},normal:function(e){return this._3d?this.__normal3(e):this.__normal2(e)},__normal2:function(e){var e=this.derivative(e),t=p.sqrt(e.x*e.x+e.y*e.y);return{x:-e.y/t,y:e.x/t}},__normal3:function(e){var t=this.derivative(e),e=this.derivative(e+.01),n=p.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),r=p.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),n=(t.x/=n,t.y/=n,t.z/=n,e.x/=r,e.y/=r,e.z/=r,{x:e.y*t.z-e.z*t.y,y:e.z*t.x-e.x*t.z,z:e.x*t.y-e.y*t.x}),r=p.sqrt(n.x*n.x+n.y*n.y+n.z*n.z),e=(n.x/=r,n.y/=r,n.z/=r,[n.x*n.x,n.x*n.y-n.z,n.x*n.z+n.y,n.x*n.y+n.z,n.y*n.y,n.y*n.z-n.x,n.x*n.z-n.y,n.y*n.z+n.x,n.z*n.z]);return{x:e[0]*t.x+e[1]*t.y+e[2]*t.z,y:e[3]*t.x+e[4]*t.y+e[5]*t.z,z:e[6]*t.x+e[7]*t.y+e[8]*t.z}},hull:function(e){var t,n,r=this.points,i=[],o=[],a=0,s=0;for(o[a++]=r[0],o[a++]=r[1],o[a++]=r[2],3===this.order&&(o[a++]=r[3]);1<r.length;){for(i=[],s=0,n=r.length-1;s<n;s++)t=p.lerp(e,r[s],r[s+1]),o[a++]=t,i.push(t);r=i}return o},split:function(e,t){if(0===e&&t)return this.split(t).left;if(1===t)return this.split(e).right;var n=this.hull(e),n={left:2===this.order?new u([n[0],n[3],n[5]]):new u([n[0],n[4],n[7],n[9]]),right:2===this.order?new u([n[5],n[4],n[2]]):new u([n[9],n[8],n[6],n[3]]),span:n};return n.left._t1=p.map(0,0,1,this._t1,this._t2),n.left._t2=p.map(e,0,1,this._t1,this._t2),n.right._t1=p.map(e,0,1,this._t1,this._t2),n.right._t2=p.map(1,0,1,this._t1,this._t2),t?(t=p.map(t,e,1,0,1),n.right.split(t).left):n},extrema:function(){var e,n,t=this.dims,r={},i=[];return t.forEach(function(t){n=function(e){return e[t]},e=this.dpoints[0].map(n),r[t]=p.droots(e),3===this.order&&(e=this.dpoints[1].map(n),r[t]=r[t].concat(p.droots(e))),r[t]=r[t].filter(function(e){return 0<=e&&e<=1}),i=i.concat(r[t].sort())}.bind(this)),i=i.sort().filter(function(e,t){return i.indexOf(e)===t}),r.values=i,r},bbox:function(){var t=this.extrema(),n={};return this.dims.forEach(function(e){n[e]=p.getminmax(this,e,t[e])}.bind(this)),n},overlaps:function(e){var t=this.bbox(),e=e.bbox();return p.bboxoverlap(t,e)},offset:function(n,e){var r,t,i,o;return void 0!==e?(t={c:o=this.get(n),n:r=this.normal(n),x:o.x+r.x*e,y:o.y+r.y*e},this._3d&&(t.z=o.z+r.z*e),t):this._linear?(i=this.normal(0),o=this.points.map(function(e){var t={x:e.x+n*i.x,y:e.y+n*i.y};return e.z&&r.z&&(t.z=e.z+n*i.z),t}),[new u(o)]):this.reduce().map(function(e){return e.scale(n)})},simple:function(){if(3===this.order){var e=p.angle(this.points[0],this.points[3],this.points[1]),t=p.angle(this.points[0],this.points[3],this.points[2]);if(0<e&&t<0||e<0&&0<t)return!1}var e=this.normal(0),t=this.normal(1),n=e.x*t.x+e.y*t.y;return this._3d&&(n+=e.z*t.z),p.abs(p.acos(n))<p.pi/3},reduce:function(){var e,t,n=0,r=0,i=[],o=[],a=this.extrema().values;for(-1===(a=-1===a.indexOf(0)?[0].concat(a):a).indexOf(1)&&a.push(1),n=a[0],e=1;e<a.length;e++)r=a[e],(t=this.split(n,r))._t1=n,t._t2=r,i.push(t),n=r;return i.forEach(function(e){for(r=n=0;r<=1;)for(r=n+.01;r<=1.01;r+=.01)if(!(t=e.split(n,r)).simple()){if(r-=.01,p.abs(n-r)<.01)return[];(t=e.split(n,r))._t1=p.map(n,0,1,e._t1,e._t2),t._t2=p.map(r,0,1,e._t1,e._t2),o.push(t),n=r;break}n<1&&((t=e.split(n,1))._t1=p.map(n,0,1,e._t1,e._t2),t._t2=e._t2,o.push(t))}),o},scale:function(o){var a=this.order,s="function"==typeof o?o:!1;if(s&&2===a)return this.raise().scale(s);var l=this.clockwise,n=s?s(0):o,r=s?s(1):o,i=[this.offset(0,10),this.offset(1,10)],c=p.lli4(i[0],i[0].c,i[1],i[1].c);if(!c)throw new Error("cannot scale this curve. Try reducing it first.");var d=this.points,h=[];return[0,1].forEach(function(e){var t=h[e*a]=p.copy(d[e*a]);t.x+=(e?r:n)*i[e].n.x,t.y+=(e?r:n)*i[e].n.y}.bind(this)),[0,1].forEach((s?function(e){var t,n,r,i;2===this.order&&e||(n={x:(t=d[e+1]).x-c.x,y:t.y-c.y},r=s?s((e+1)/a):o,s&&!l&&(r=-r),i=p.sqrt(n.x*n.x+n.y*n.y),n.x/=i,n.y/=i,h[e+1]={x:t.x+r*n.x,y:t.y+r*n.y})}:function(e){var t,n;2===this.order&&e||(t=h[e*a],n=this.derivative(e),n={x:t.x+n.x,y:t.y+n.y},h[e+1]=p.lli4(t,n,c,d[e+1]))}).bind(this)),new u(h)},intersects:function(e,t){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof u&&(e=e.reduce()),this.curveintersects(this.reduce(),e,t)):this.selfintersects(t)},lineIntersects:function(e){var t=p.min(e.p1.x,e.p2.x),n=p.min(e.p1.y,e.p2.y),r=p.max(e.p1.x,e.p2.x),i=p.max(e.p1.y,e.p2.y),o=this;return p.roots(this.points,e).filter(function(e){e=o.get(e);return p.between(e.x,t,r)&&p.between(e.y,n,i)})},selfintersects:function(e){for(var t,n,r=this.reduce(),i=r.length-2,o=[],a=0;a<i;a++)t=r.slice(a,a+1),n=r.slice(a+2),t=this.curveintersects(t,n,e),o=o.concat(t);return o},curveintersects:function(e,n,t){var r=[],i=(e.forEach(function(t){n.forEach(function(e){t.overlaps(e)&&r.push({left:t,right:e})})}),[]);return r.forEach(function(e){e=p.pairiteration(e.left,e.right,t);0<e.length&&(i=i.concat(e))}),i}},{abs:S.abs,cos:S.cos,sin:S.sin,acos:S.acos,atan2:S.atan2,sqrt:S.sqrt,pow:S.pow,crt:function(e){return e<0?-p.pow(-e,1/3):p.pow(e,1/3)},pi:S.PI,tau:2*S.PI,quart:S.PI/2,epsilon:1e-6,nMax:9007199254740991,nMin:-9007199254740991,min:S.min,max:S.max,ZERO:{x:0,y:0,z:0},Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,t){t=t(e),e=t.x*t.x+t.y*t.y;return void 0!==t.z&&(e+=t.z*t.z),p.sqrt(e)},between:function(e,t,n){return t<=e&&e<=n||p.approximately(e,t)||p.approximately(e,n)},approximately:function(e,t,n){return p.abs(e-t)<=(n||p.epsilon)},length:function(e){for(var t,n=0,r=p.Tvalues.length,i=0;i<r;i++)t=.5*p.Tvalues[i]+.5,n+=p.Cvalues[i]*p.arcfn(t,e);return.5*n},map:function(e,t,n,r,i){return r+(i-r)*((e-t)/(n-t))},lerp:function(e,t,n){var r={x:t.x+e*(n.x-t.x),y:t.y+e*(n.y-t.y)};return t.z&&n.z&&(r.z=t.z+e*(n.z-t.z)),r},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,t,n){var r=t.x-e.x,t=t.y-e.y,i=n.x-e.x,n=n.y-e.y,e=r*n-t*i,o=p.sqrt(r*r+t*t),a=p.sqrt(i*i+n*n);return p.atan2(e,(r/=o)*(i/=a)+(t/=o)*(n/=a))},dist:function(e,t){var n=e.x-t.x,e=e.y-t.y;return p.sqrt(n*n+e*e)},closest:function(e,n){var r,i,o=p.pow(2,63);return e.forEach(function(e,t){(i=p.dist(n,e))<o&&(o=i,r=t)}),{mdist:o,mpos:r}},lli8:function(e,t,n,r,i,o,a,s){var l=(e-n)*(o-s)-(t-r)*(i-a);return 0!=l&&{x:((e*r-t*n)*(i-a)-(e-n)*(i*s-o*a))/l,y:((e*r-t*n)*(o-s)-(t-r)*(i*s-o*a))/l}},lli4:function(e,t,n,r){var i=e.x,e=e.y,o=t.x,t=t.y,a=n.x,n=n.y,s=r.x,r=r.y;return p.lli8(i,e,o,t,a,n,s,r)},lli:function(e,t){return p.lli4(e,e.c,t,t.c)},getminmax:function(e,t,n){if(!n)return{min:0,max:0};var r,i=p.nMax,o=p.nMin;-1===(n=-1===n.indexOf(0)?[0].concat(n):n).indexOf(1)&&n.push(1);for(var a=0,s=n.length;a<s;a++)r=n[a],(r=e.get(r))[t]<i&&(i=r[t]),r[t]>o&&(o=r[t]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(e,t){var n=t.p1.x,r=t.p1.y,i=-p.atan2(t.p2.y-r,t.p2.x-n);return e.map(function(e){return{x:(e.x-n)*p.cos(i)-(e.y-r)*p.sin(i),y:(e.x-n)*p.sin(i)+(e.y-r)*p.cos(i)}})},roots:function(e,t){function n(e){return 0<=e&&e<=1}var r=e.length-1,e=p.align(e,t=t||{p1:{x:0,y:0},p2:{x:1,y:0}});if(2==r)return 0!==(a=(i=e[0].y)-2*(c=e[1].y)+(o=e[2].y))?[-((t=-p.sqrt(c*c-i*o))+(r=-i+c))/a,-(-t+r)/a].filter(n):c!==o&&0===a?[(2*c-o)/2*(c-o)].filter(n):[];var i,o,a,s,t=e[0].y,r=e[1].y,l=e[2].y,r=(e=(3*(c=(-3*t+3*r)/(a=3*r-t-3*l+e[3].y))-(i=(3*t-6*r+3*l)/a)*i)/3)/3,l=(2*i*i*i-9*i*c+27*(o=t/a))/27,c=l/2,t=c*c+r*r*r;return t<0?(o=p.sqrt((a=-e/3)*a*a),e=p.acos((r=-l/(2*o))<-1?-1:1<r?1:r),[(a=2*p.crt(o))*p.cos(e/3)-i/3,a*p.cos((e+p.tau)/3)-i/3,a*p.cos((e+2*p.tau)/3)-i/3].filter(n)):0==t?[2*(s=c<0?p.crt(-c):-p.crt(c))-i/3,-s-i/3].filter(n):(l=p.sqrt(t),[(s=p.crt(-c+l))-p.crt(c+l)-i/3].filter(n))},droots:function(e){var t,n,r,i,o,a;return 3===e.length?0!==(n=(o=e[0])-2*(a=e[1])+(t=e[2]))?[-((r=-p.sqrt(a*a-o*t))+(i=-o+a))/n,-(-r+i)/n]:a!==t&&0===n?[(2*a-t)/(2*(a-t))]:[]:2===e.length?(o=e[0])!==(a=e[1])?[o/(o-a)]:[]:void 0},bboxoverlap:function(e,t){for(var n,r,i,o=["x","y"],a=o.length,s=0;s<a;s++)if(n=e[i=o[s]].mid,r=t[i].mid,i=(e[i].size+t[i].size)/2,p.abs(n-r)>=i)return!1;return!0},pairiteration:function(e,t,n){var r=e.bbox(),i=t.bbox(),o=n||.5;if(r.x.size+r.y.size<o&&i.x.size+i.y.size<o)return[(1e5*(e._t1+e._t2)/2|0)/1e5+"/"+(1e5*(t._t1+t._t2)/2|0)/1e5];var n=e.split(.5),r=t.split(.5),i=(i=[{left:n.left,right:r.left},{left:n.left,right:r.right},{left:n.right,right:r.right},{left:n.right,right:r.left}]).filter(function(e){return p.bboxoverlap(e.left.bbox(),e.right.bbox())}),a=[];return 0===i.length?a:(i.forEach(function(e){a=a.concat(p.pairiteration(e.left,e.right,o))}),a=a.filter(function(e,t){return a.indexOf(e)===t}))},__createBezier:function(e){var t=e[0],n=e[1],r=e[2],i=e.length;return 3===i?new u(t.x,t.y,n.x,n.y,r.x,r.y):4===i?(i=e[3],new u(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)):void 0},getLength:function(e){return p.__createBezier.apply(p,[e]).length()},getBounds:function(e){e=p.__createBezier.apply(p,[e]).bbox();return{x:e.x.min,y:e.y.min,width:e.x.size,height:e.y.size}},getClosestPointOnBezier:function(e,t){return p.__createBezier.apply(p,[e]).project(t)},getLUT:function(e,t){return p.__createBezier.apply(p,[e]).getLUT(t)}}),ke={range:function(e,t,n){return at(st(t,n),st(at(t,n),e))},toDegrees:function(e){return e*De/B},toRadians:function(e){return e/De*B},to360Degrees:function(e){return(e%Ae+Ae)%Ae},calcDistance:function(e,t){var n=t.x-e.x,t=t.y-e.y;return N(n*n+t*t)},calcAngle:function(e,t){return ke.to360Degrees(ke.toDegrees(U(t.y-e.y,t.x-e.x)))},isAngleInRange:function(e,t,n){return e=ke.to360Degrees(e),t=ke.to360Degrees(t),n=ke.to360Degrees(n),t<e&&(t+=Ae),n<=t&&e<=n||Ae<t&&e<=(n+=Ae)&&n<=t},getArgsPoint:function(e){var t=arguments.length;return 1===t?dt(e)?{x:e[1],y:e[2]}:e:1<t?{x:e,y:arguments[1]}:null},getArgsSize:function(e){var t=arguments.length;return 1===t?dt(e)?{width:e[1],height:e[2]}:e:1<t?{width:e,height:arguments[1]}:null}},Le=ke.toRadians,Se=ke.calcDistance,Ee=ke.calcAngle,Te=ke.to360Degrees,Ve={cross:function(e,t,n){return(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x)},convexHull:function(e){(e=e.slice()).sort(function(e,t){return e.x===t.x?e.y-t.y:e.x-t.x});for(var t=e.length,n=[],r=0;r<t;r++){for(;2<=n.length&&Ve.cross(n[n.length-2],n[n.length-1],e[r])<=0;)n.pop();n.push(e[r])}var i=[];for(r=t-1;0<=r;r--){for(;2<=i.length&&Ve.cross(i[i.length-2],i[i.length-1],e[r])<=0;)i.pop();i.push(e[r])}return i.pop(),n.pop(),n.concat(i)}},Oe={calc2LinesIntersection:function(e,t,d,h,u){var n=e.x,r=e.y,i=t.x,o=t.y,a=d.x,s=d.y,l=h.x,c=h.y,_=(n-i)*(s-c)-(r-o)*(a-l);if(0==_)return f;n={x:((n*o-r*i)*(a-l)-(n-i)*(a*c-s*l))/_,y:((n*o-r*i)*(s-c)-(r-o)*(a*c-s*l))/_};return!1===u||Oe.isPointOnLineSegment(n,e,t)&&Oe.isPointOnLineSegment(n,d,h)?n:f},calcRectLineIntersection:function(e,t,n,d){for(var r=e.x,i=e.y,o=e.width,e=e.height,h=t.x,u=t.y,_=n.x,p=n.y,f={x:r,y:i},a={x:r+o,y:i},g={x:r,y:i+e},r={x:r+o,y:i+e},o=[f,a],i=[a,r],e=[r,g],a=[g,f],y=h<_?u<p?[a,o,i,e]:[e,a,o,i]:u<p?[o,i,e,a]:[i,e,a,o],v=[],s=0;s<4;s++){var l=y[s],C=l[0],l=l[1],c=Oe.calc2LinesIntersection(C,l,t,n,d);c&&Oe.isPointOnLineSegment(c,C,l)&&(v.push(c),0!==s&&2!==s||s++)}return v},calcPointToLineClosestPoint:function(e,t,n){var r=t.x,t=t.y,i=n.x,n=n.y;if(r===i&&t===n)return{x:r,y:t};var o=z(r-i,2)+z(t-n,2),e=((e.x-r)*(i-r)+(e.y-t)*(n-t))/o;return e<0?{x:r,y:t}:1<e?{x:i,y:n}:{x:r+e*(i-r),y:t+e*(n-t)}},isPointsOnLineSameSide:function(t,n,e){if(e.length<2)return!0;var r=[],i=(t.x===n.x?e.forEach(function(e){r.push(e.x-t.x)}):t.y===n.y?e.forEach(function(e){r.push(e.y-t.y)}):e.forEach(function(e){r.push((e.y-t.y)*(n.x-t.x)-(e.x-t.x)*(n.y-t.y))}),[]);return r.forEach(function(e){e<0?e=-1:0<e&&(e=1),i.indexOf(e)<0&&i.push(e)}),-1<i.indexOf(1)&&-1<i.indexOf(1)},isPointOnLineSegment:function(e,t,n){var r=Se(e,t),e=Se(e,n),t=Se(t,n);return ot(r+e-t)<1e-4},calcOffsetPointOnLine:function(e,t,n,r){var i=Se(t,e);return(n=!0===r&&0<=n&&n<=1?ke.range(n*i,0,i):n)<=0?e:i<=n?t:{x:(i-n)/i*(e.x-t.x)+t.x,y:n/i*(t.y-e.y)+e.y}}},Ie={getTransformedPoint:function(e,t){var n=t.e||t.translate_x||0,r=t.f||t.translate_y||0,i=t.a||t.scale_x||t.zoom||1,o=t.d||t.scale_y||t.zoom||1,a=t.b||t.skew_x||0,t=t.c||t.skew_y||0;return{x:i*e.x+t*e.y+n,y:a*e.x+o*e.y+r}},calc3PointsCircleCenter:function(e,t,n){var r=(t.y-e.y)/(t.x-e.x),i=(n.y-t.y)/(n.x-t.x),n=(r*i*(n.y-e.y)+r*(t.x+n.x)-i*(e.x+t.x))/(2*(r-i));return{x:n,y:(e.y+t.y)/2-1/r*(n-(e.x+t.x)/2)}},calc3PointsAngle:function(e,t,n){var r=N(z(t.x-e.x,2)+z(t.y-e.y,2)),t=N(z(t.x-n.x,2)+z(t.y-n.y,2)),n=N(z(n.x-e.x,2)+z(n.y-e.y,2));return ke.toDegrees(W((t*t+r*r-n*n)/(2*t*r)))},calcPointOnCircle:function(e,t,n){n=Le(Te(n));return{x:e.x+G(n)*t,y:e.y+H(n)*t}},calcPointOnEllipse:function(e,t){var n=e.x,r=e.y,i=e.width,e=e.height,n=n+i/2,r=r+e/2,o=(t=Te(t),Le(t)),o=F(o),i=i/2,e=e/2,i=i*i,e=e*e,e=N(i*e/(e+i*o*o)),i=e*o,o=e+n,a=i+r,e=-e+n,i=-i+r,n=Ee({x:n,y:r},{x:o,y:a});return 0<=t&&t<De?0<=n&&n<De?{x:o,y:a}:{x:e,y:i}:De<=n&&n<Ae?{x:o,y:a}:{x:e,y:i}},calcRotatedPoint:function(e,t,n){var r=e.x,e=e.y,i=t.x,t=t.y,n=Le(Te(n));return{x:r+(i-r)*G(n)-(t-e)*H(n),y:e+(t-e)*G(n)+(i-r)*H(n)}},calcParallelogramPoints:function(t,e){var n=t.length;if(0<n){for(var r=t[0],d=r.x,h=r.x,i=r.y,o=r.y,a=r,u=r,_=1;_<n;_++)r=t[_],i=st(i,r.y),o=at(o,r.y),r.x<d&&(d=r.x,a=r),r.x>h&&(h=r.x,u=r);for(var s=F(Le(e%90)),l=a.x-(o-a.y)/s,c=u.x-(o-u.y)/s,p=0,f=0;!function(){for(;p<n;p++){r=t[p];var e=o-s*(r.x-l);if(r.y<e)return l=r.x-(o-r.y)/s-1,!1}return!0}(););for(;!function(){for(;f<n;f++)if((r=t[f]).x>c){var e=o-s*(r.x-c);if(r.y>e)return c=r.x-(o-r.y)/s+1,!1}return!0}(););e=(o-i)/s;return[{x:l,y:o},{x:l+e,y:i},{x:c+e,y:i},{x:c,y:o}]}return t},calcPointsBounds:function(e){var t=(e=e||[]).length;if(0===t)return null;for(var n=e[0],r=n.x,i=n.y,o=n.x,a=n.y,s=1;s<t;s++)n=e[s],r=st(r,n.x),i=st(i,n.y),o=at(o,n.x),a=at(a,n.y);return{x:r,y:i,width:o-r,height:a-i}},rectContainsPoint:function(e,t){var n=e.x,r=e.y,i=e.width,e=e.height,o=t.x,t=t.y;return!(i<=0||e<=0)&&(n<=o&&o<=n+i&&r<=t&&t<=r+e)},circleContainsPoint:function(e,t,n){return Se(e,n)<=t},ellipseContainsPoint:function(e,t){var n=e.x,r=e.y,i=e.width/2,e=e.height/2,n=t.x-(n+i),t=t.y-(r+e);return n*n/(i*i)+t*t/(e*e)<=1},pieContainsPoint:function(e,t,n,r,i){return!!Ie.circleContainsPoint(e,t,i)&&(ot(r-n)>=Ae||ke.isAngleInRange(n,r,Ee(e,i)))}},Me={calcPathBounds:function(e){var t=(e=e||[]).length;if(t<1)return null;var n=e[0],r=n.x,i=n.y,o=n.x,a=n.y;return 1<t&&Me.splitPath(e).forEach(function(e){var t,n=e.type,e=e.points;we.isLineTo(n)||we.isMoveTo(n)?t=Ie.calcPointsBounds(e):we.isBezier(n)&&(t=p.getBounds(e)),t&&(r=st(r,t.x),i=st(i,t.y),o=at(o,t.x+t.width),a=at(a,t.y+t.height))}),{x:r,y:i,width:o-r,height:a-i}},calcPointToPathClosestPoint:function(n,e){if((e=e||[]).length<2)return e[0];var t,r=[],i=(Me.splitPath(e).forEach(function(e){var t=e.type,e=e.points;we.isLineTo(t)||we.isMoveTo(t)?r.push(Oe.calcPointToLineClosestPoint(n,e[0],e[1])):we.isBezier(t)&&r.push(p.getClosestPointOnBezier(e,n))}),r[0]),o=Se(n,i);return r.forEach(function(e){(t=Se(n,e))<o&&(o=t,i=e)}),i},calcPathLength:function(e){var n=0;return Me.splitPath(e=e||[]).forEach(function(e){var t=e.type,e=e.points;we.isLineTo(t)?n+=Se(e[0],e[1]):we.isBezier(t)&&(n+=p.getLength(e))}),n},calcOffsetPointOnPath:function(e,h,t){var u,_,n,r=(e=e||[]).length;return r<2?null:(h<=0?(u=e[0],_=Ee(u,e[1])):(n=Me.calcPathLength(e),!0===t&&h<=1&&0<=h&&(1<=h?(u=e[r-1],_=Ee(e[r-2],u)):h=ke.range(h*n,0,n)),n<=h&&(u=e[r-1],_=Ee(e[r-2],u))),u?Ue({angle:_},u):(ft(Me.splitPath(e),function(e){var t=e.type,n=e.points,r=n.length,i=0;if(we.isLineTo(t)?i=Se(n[0],n[1]):we.isBezier(t)&&(i=p.getLength(n)),!(i<h)){if(we.isLineTo(t))u=Me._getPathOffsetPoint(Oe.calcOffsetPointOnLine(n[0],n[1],h),e);else if(we.isBezier(t))for(var o=p.getLUT(n,at(0|i,20)),d=o.length,a=1;a<d;a++){var s=o[a-1],l=o[a],c=Se(s,l);if(!(c<h)){u=h<c/2?Me._getPathOffsetPoint(s,e,o,a-1):Me._getPathOffsetPoint(l,e,o,a);break}h-=c}return null==u&&(u=n[r-1],_=Ee(n[r-2],n)),!1}h-=i}),u?Ue({angle:_},u):void 0))},_getPathOffsetPoint:function(e,t,n,r){var i=t.type,t=t.points,o=t.length;return we.isBezier(i)?e.angle=Ee(n[(r=0===r?1:r)-1],n[r]):e.angle=Ee(t[0],t[o-1]),e},splitPath:function(e){var t=e.length;if(t<2)return[];for(var n,r,i=[],o=e[0],a=o.seg,s=o,l=1;l<t;l++)o=e[l],null!=a?we.isMoveTo(a)?i.push({type:"move_to",points:[e[l-1],o]}):we.isQuadraticCurveTo(a)?l<t-1?(n=o,o=e[++l],i.push({type:"quadratic_curve_to",points:[s,n,o]})):i.push({type:"line_to",points:[s,o]}):we.isBezierCurveTo(a)&&(l<t-2?(n=o,r=o=e[++l],o=e[++l],i.push({type:"bezier_curve_to",points:[s,n,r,o]})):i.push({type:"line_to",points:[s,o]})):i.push({type:"line_to",points:[e[l-1],o]}),a=o.seg,s=o;return i},roundPath:function(e,t,n){if(1<t&&e){var r=e.length;if(2<r){!0===n&&(e=pt([e[r-1]],e,[e[0]]),r+=2);var i=[];i.push(e[0]);for(var o=1;o<r-1;o++){var a=e[o],s=e[o-1],d=e[o+1],l=Se(s,a),c=Se(a,d),l=(!0===n?(l/=2,c/=2):(1!==o&&(l/=2),o!==r-2&&(c/=2)),st(l,c,t)),c=Ie.calcPointOnCircle(a,l,Ee(a,s));c.seg="quadratic_curve_to",i.push(c),i.push(a),i.push(Ie.calcPointOnCircle(a,l,Ee(a,d)))}return i.push(e[r-1]),!0===n&&(i.shift(),i.pop()),i}}return e}},Be={createGrowRect:function(e,t,n){return{x:e.x-t,y:e.y-(n=2===arguments.length?t:n),width:e.width+2*t,height:e.height+2*n}},getRectCenter:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},intersectsRect:function(e,t){return!(e.width<=0||e.height<=0||t.width<=0||t.height<=0)&&(t.x+t.width>e.x&&t.y+t.height>e.y&&t.x<e.x+e.width&&t.y<e.y+e.height)},containsRect:function(e,t){var n=e.width,r=e.height,i=t.width,o=t.height;if(n<=0||r<=0||i<0||o<0)return!1;var a=e.x,e=e.y,s=t.x,t=t.y;return a<=s&&e<=t&&s+i<=a+n&&t+o<=e+r},calcRectsUnion:function(e){if(0===e.length)return null;var t=e[0],n=t.x,r=t.y,i=n+t.width,o=r+t.height;return e.slice(1).forEach(function(e){n=st(n,e.x),r=st(r,e.y),i=at(i,e.x+e.width),o=at(o,e.y+e.height)}),{x:n,y:r,width:i-n,height:o-r}},calcRectsIntersection:function(e){if(0===e.length)return null;var t=e[0],s={x:t.x,y:t.y,width:t.width,height:t.height};return e.slice(1).forEach(function(e){if(!Be.intersectsRect(s,e))return f;var t=s.x,n=s.y,r=e.x,i=e.y,o=at(t,r),a=at(n,i);s={x:o,y:a,width:st(t+s.width,r+e.width)-o,height:st(n+s.height,i+e.height)-a}}),s},calcRotatedRect:function(e,t,n){if(null==e)return null;var r=e.x,i=e.y,o=e.width,a=e.height;if(t%360==0)return{x:r,y:i,width:o,height:a};n=n||{x:e.x+o/2,y:e.y+a/2};var e=Ie.calcRotatedPoint(n,{x:r,y:i},t),s=Ie.calcRotatedPoint(n,{x:r+o,y:i},t),o=Ie.calcRotatedPoint(n,{x:r+o,y:i+a},t),n=Ie.calcRotatedPoint(n,{x:r,y:i+a},t),r=st(e.x,s.x,o.x,n.x),i=st(e.y,s.y,o.y,n.y);return{x:r,y:i,width:at(e.x,s.x,o.x,n.x)-r,height:at(e.y,s.y,o.y,n.y)-i}}},At={calcCubicBezier:function(e,t,n,r,i){return z(1-i,3)*e+3*i*z(1-i,2)*t+3*z(i,2)*(1-i)*n+z(i,3)*r},calcCubicBezierT:function(e,t,n,r,i){if(i===e||i===r)return i;for(var o,a,s=0,l=1;o=At.calcCubicBezier(e,t,n,r,a=s+(l-s)/2),!(ot(o=o-i)<1e-6);)0<o?l=a:s=a;return a}},kt={linear:function(e){return e},ease:function(e){return kt._calcCubicBezierTiming({x:.25,y:.1},{x:.25,y:1},e)},"ease-in":function(e){return kt._calcCubicBezierTiming({x:.42,y:0},{x:1,y:1},e)},"ease-out":function(e){return kt._calcCubicBezierTiming({x:0,y:0},{x:.58,y:1},e)},"ease-in-out":function(e){return kt._calcCubicBezierTiming({x:.42,y:0},{x:.58,y:1},e)},"cubic-bezier":function(e,t,n,r,i){return kt._calcCubicBezierTiming({x:t,y:n},{x:r,y:i},e)},_calcCubicBezierTiming:function(e,t,n){n=At.calcCubicBezierT(0,e.x,t.x,1,n);return At.calcCubicBezier(0,e.y,t.y,1,n)},getTimingFunc:function(e){var t,n,r,i;return ht(e)&&(kt.hasOwnProperty(e)?e=kt[e]:!(t=e.match(/^\s*[(\w+)-]\s*\((.*)\)/))||(n=t[1])&&kt.hasOwnProperty(n)&&(r=kt[n],i=t[1].split(","),e=function(e){return r.apply(null,[e].concat(i))})),e=ut(e)?e:kt.linear}},Lt={cancelAnimate:function(e){Pt.cancelCallRAFInterval(e)},animate:function(r,e){if(Ne(arguments[0])&&(r=(e=arguments[0]).frame),ut(r)){var i,o,a,h,s,l,c,d,u=0|(e=e||{}).duration;if(!(u<=0))return i=kt.getTimingFunc(e.timing_function||e.timing||e.easing),o=e.finish,a=0|e.delay,h=e.direction,s=!0===(s=e.iteration_count||e.iterations)||s===1/0?1/0:at(1,0|s),l=performance.now(),d=c=1,Dt(function(){var e=performance.now(),t=e-l;if(0<a){if(t<=a)return;l=e,t=a=0}var t=t/u,n=!1,t=(1<=t&&(n=!0,t=1),i(-1===c?1-t:t)),t=r(t,d);if(!1===t)return o&&o(),t;if(!0===n){if(s<=d)return o&&o(),!1;d++,l=e,"alternate"===h&&(c*=-1)}})}}},St={_loadingMap:{},_cachedMap:{},_errorMap:{},clearCache:function(){St._loadingMap={},St._cachedMap={},St._errorMap={}},register:function(e,t){t&&(ht(t)?(null==St._loadingMap[e]&&(St._loadingMap[e]=[]),St.load(e,t)):St._cachedMap[e]=t)},get:function(e,t,n){if(!ht(e))return e;if(St._cachedMap.hasOwnProperty(e))return St._cachedMap[e];if(1<St._errorMap[e])return!1;var r=St._loadingMap[e],i=null==r;!0==i&&(St._loadingMap[e]=r=[]),t&&r.push({callBack:t,context:n}),!0==i&&St.load(e,e)},load:function(e,t){var n=new Image;n.onload=function(){St.cache(e,n)},n.onerror=function(){console.error("Load Image Error:"+t),St.cache(e,null)},n.onabort=function(){console.error("Load Image Abort:"+t),St.cache(e,null)},n.src=t},cache:function(e,t){t?St._cachedMap[e]=t:St._errorMap[e]=1+(0|St._errorMap[e]);var n=St._loadingMap[e];n&&(n.forEach(function(e){e.callBack.apply(e.context,[t])}),delete St._loadingMap[e])},getColorImage:function(e,t,n){var e=St._createImgCanvas(e),r=e.getContext("2d"),i=e.getAttribute("width"),o=e.getAttribute("height"),i=r.getImageData(0,0,i,o);return Et.rgb(i,t),r.putImageData(i,0,0),"canvas"===n?e:e.toDataURL(n)},_createImgCanvas:function(e){var t=e.width,n=e.height,r=We("canvas");return r.setAttribute("width",t),r.setAttribute("height",n),r.getContext("2d").drawImage(e,0,0),r}},Et={rgb:function(e,t){for(var n,t=c.toRGB(t,!0),r=t.red,i=t.green,o=t.blue,a=e.data,s=a.length,l=0;l<s;l+=4)0!==a[l+3]&&(n=(.34*a[l]+.5*a[l+1]+.16*a[l+2])/255,a[l]=n*r,a[l+1]=n*i,a[l+2]=n*o,a[l+3]=a[l+3])}},Tt=(Ge(t,A,{id:function(){return this.__zid__},_bind:function(r){var i;Ne(r)&&(i=this,Ct(r,function(t,e){var n=e;A.defineProperty(r,t,{set:function(e){ut(n=e)?i[t]=n:i.setProperty(t,n)},get:function(){return n}})}))},setCallBack:function(e,t,n){this["_default_"+e]=this.constructor.prototype[e],this[e]=function(){t.apply(n||this,arguments)}},resetCallBack:function(e){this[e]=this["_default_"+e]},getClassName:function(){return this.constructor.__className_},set:function(e,t){return this.setProperty.apply(this,arguments)},setProperty:function(e,t){var n=arguments.length;return 1===n&&Ne(e)?Ct(e,function(e,t){this._setProperty(e,t)},this):1<n&&this._setProperty(e,t),this},isPropertyValid:function(e,t,n){return!0},beforeSetProperty:function(e,t,n){},afterSetProperty:function(e,t,n){},__initSetProperty:function(e,t){var n=this.__props__[e];return!1===this.isPropertyValid(e,t,n)||(this.beforeSetProperty(e,t,n),this.__props__[e]=t,delete this.__getProps__[e],this.afterSetProperty(e,t,n)),this},_setProperty:function(e,t){var n=f;return this.hasProperty(e)&&(n=this.__props__[e])===t||!1===this.isPropertyValid(e,t,n)||(this.beforeSetProperty(e,t,n),this.__props__[e]=t,delete this.__getProps__[e],this.afterSetProperty(e,t,n),n!==t&&this._onPropertyChange(e,t,n)),this},_onPropertyChange:function(e,t,n){},get:function(e){return this.getProperty(e)},getProperty:function(e){if(this.__getProps__.hasOwnProperty(e))return this.__getProps__[e];var t=this._getProperty(e);return this.__getProps__[e]=t},_getProperty:function(e){return this.hasProperty(e)?this.__props__[e]:xt.getClassDefault(this.constructor,e)},remove:function(e){return this.removeProperty(e)},removeProperty:function(e){if(this.hasProperty(e)){var t=this.__props__[e];if(t!==f){if(!1===this.isPropertyValid(e,f,t))return this;this.beforeSetProperty(e,f,t),delete this.__props__[e],delete this.__getProps__[e],this.afterSetProperty(e,f,t),this._onPropertyChange(e,f,t)}else delete this.__props__[e],delete this.__getProps__[e]}return this},has:function(e){return this.hasProperty(e)},hasProperty:function(e){return this.__props__.hasOwnProperty(e)},gets:function(){return this.getProperties.apply(this,arguments)},getProperties:function(e){if(0===arguments.length)return this._getAllProperties();if(!1===e)return this._getAllProperties(!1);var t={};return dt(e)&&e.forEach(function(e){t[e]=this.getProperty(e)},this),t},_getAllProperties:function(e){return!1===e?this.__props__:Ue({},this.__props__)}}),Ge(e,A,{add:function(e,t,n){var r=this._typeListenersMap[e],e=(null==r&&(this._typeListenersMap[e]=r=[]),{listener:t,context:n});return r.push(e),e},remove:function(e,t,n){var r=this._typeListenersMap[e];if(r)for(var i=r.length,o=0;o<i;o++){var a=r[o];if(a.listener===t&&a.context===n)return void r.splice(o,1)}},dispatch:function(e,t){var n=this._typeListenersMap[e];if(n)for(var r=n.length,i=0;i<r;i++){var o=n[i],a=o.listener,o=o.context;a.apply(o,[t])}}}),Ge(w,t,{_onPropertyChange:function(e,t,n){w.superClass._onPropertyChange.apply(this,arguments),this.dispatchChangeEvent(e,t,n)},getDispatcher:function(){return this._dispatcher},addListener:function(e,t,n){this._dispatcher.add(e,t,n)},removeListener:function(e,t,n){this._dispatcher.remove(e,t,n)},dispatchEvent:function(e,t){this._dispatcher.dispatch(e,t)},addChangeListener:function(e,t){this.addListener("change",e,t)},removeChangeListener:function(e,t){this.removeListener("change",e,t)},dispatchChangeEvent:function(e,t,n){this.dispatchEvent("change",{source:this,property:e,new_value:t,old_value:n,newValue:t,oldValue:n})},_callOn:function(e,t,n,r){var i=this[e];i===this.constructor.prototype[e]?this.dispatchEvent(t,n):i.apply(this,r)}}),l.localStorage),Vt=l.sessionStorage,Ot={setCookie:function(e,t,n){var r,n=2<arguments.length?((r=new Date).setTime(r.getTime()+6e4*n),t+"; expires="+r.toUTCString()):t;nt.cookie=e+"="+n},getCookie:function(e){e=nt.cookie.match(new RegExp(e+"=([^;]+)"));return e?e[1]:f},removeCookie:function(e){Ot.setCookie(e,"",-1)}},It={_call:function(e,t,n){return(n=O.call(n)).unshift(t),e.apply(null,n)},setItem:function(e,t,n,r){n!==f?3<arguments.length&&0<r?(r=6e4*(0|r)+Date.now(),e.setItem(t,JSON.stringify({_zexpires_time:Date.now()+r,value:n}))):e.setItem(t,JSON.stringify(n)):It.removeItem(e,t)},getItem:function(e,t){var n=e.getItem(t);if(n){try{n=JSON.parse(n)}catch(e){}if(Ne(n))if(n.hasOwnProperty("_zexpires_time"))return n._zexpires_time<Date.now()?(e.removeItem(t),f):n.value;return n}return f},removeItem:function(t,n){if(!ut(n))return t.removeItem(n);I(t).forEach(function(e){!0===n(e)&&t.removeItem(e)})},clear:function(e){return e.clear()}},Mt={_changeListeners:[],setItem:function(e,t,n){return It._call(It.setItem,Tt,arguments)},getItem:function(e){return It._call(It.getItem,Tt,arguments)},removeItem:function(e){return It._call(It.removeItem,Tt,arguments)},clear:function(){return It._call(It.clear,Tt,arguments)},addChangeListener:function(e,t,n){Mt._changeListeners.push({listener:e,context:t,key:n}),1===Mt._changeListeners.length&&xn(l,"storage",Mt._handleChange)},removeChangeListener:function(t,n,r){he(Mt._changeListeners,function(e){return e.listener===t&&e.context===n&&e.key===r}),0===Mt._changeListeners.length&&Pn(l,"storage",Mt._handleChange)},_handleChange:function(t){var n=t.key;Mt._changeListeners.forEach(function(e){null!==e.key&&n!==e.key||e.listener.apply(e.context,[t])})}},Bt={setItem:function(e,t,n){return It._call(It.setItem,Vt,arguments)},getItem:function(e){return It._call(It.getItem,Vt,arguments)},removeItem:function(e){return It._call(It.removeItem,Vt,arguments)},clear:function(){return It._call(It.clear,Vt,arguments)}},zt={getLocationSearchParam:function(e){var t=[location.href];return 0<arguments.length&&t.push(e),zt.getURLSearchParam.apply(null,t)},getURLSearchParam:function(e,t){if(null==e)return null;var e=(e=ht(e)?new URL(e):e).search,i={};return-1<e.indexOf("?")&&e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,n,r){i.hasOwnProperty(t)?(i[t]=[i[t]],i[t].push(r)):i[t]=r}),arguments.length<2?i:i[t]},appendURLSearchParam:function(e,t,n){var r;return Ne(t)?r=zt._genSearchParams(t):2<arguments.length&&(r=zt._encodeKVParams(t,n)),e=r?e+(/\?/.test(e)?"&":"?")+r:e},setURLSearchParam:function(e,t,n){var r=zt.getURLSearchParam(e);return Ne(t)?r=Ue(r,t):r[t]=n,e=e.split("?")[0],zt.appendURLSearchParam(e,r)},getLocationHash:function(e){var t=[location.href];return 0<arguments.length&&t.push(e),zt.getURLHash.apply(null,t)},getURLHash:function(e,t){if(null==e)return null;e=(e=ht(e)?new URL(e):e).hash;if(arguments.length<2)return e.substr(1);e=e.match(new RegExp(t+"=([^&]*)"));return e?e[1]:""},_genSearchParams:function(e){if(e){if(ht(e))return e;var n;if(Ne(e))return n=[],Ct(_e.getDeepKVMap(e),function(t,e){dt(e)?e.forEach(function(e){n.push(zt._encodeKVParams(t,e))}):n.push(zt._encodeKVParams(t,e))}),n.join("&")}return""},_encodeKVParams:function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}},Nt={},Ut=(En=navigator.userAgent,Ut=En.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],(En=/trident/i.test(Ut[1])?["IE",(D=/\brv[ :]+(\d+)/g.exec(En)||[])[1]]:"Chrome"===Ut[1]&&null!=(D=En.match(/\b(OPR|Edg)\/(\d+)/))?D.slice(1):(Ut=Ut[2]?[Ut[1],Ut[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(D=En.match(/version\/(\d+)/i))&&Ut.splice(1,1,D[1]),Ut))?(D=(D=En[0])&&("ie"===(D=D.toLowerCase())||"msie"===D?"IE":"opr"===D?"Opera":"edg"===D?"Edge":K(D)),Nt.browser=D,Nt.version=0|En[1]):Nt.browser="Unknown",Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null})),l.parent!==l&&(Re.nowTime=Date.now(),Re.guid=function(){return"_z-t-"+Re.nowTime+"-i-"+Re.__uid++}),"IE"===Nt.browser),Gt={querySelector:function(e,t){return(1<arguments.length?t:nt).querySelector(e)},querySelectorAll:function(e,t){var t=(1<arguments.length?t:nt).querySelectorAll(e),n=[];return ft(t,function(e){n.push(e)}),n},querySelectorChild:function(e,t){return(t=Gt.queryElement(t))?yt(Gt.querySelectorAll(e,t),function(e){return e.parentNode===t}):null},querySelectorChildren:function(e,t){return(t=Gt.queryElement(t))?gt(Gt.querySelectorAll(e,t),function(e){return e.parentNode===t}):[]},queryNode:function(e){return ht(e)?Gt.querySelector.apply(null,arguments):cn(e)?e:null},queryElement:function(e){return ht(e)?Gt.querySelector.apply(null,arguments):ln(e)?e:null},queryEventElement:function(e){return e instanceof EventTarget||e===l||e===nt?e:Gt.queryElement.apply(null,arguments)}},Ht=Gt.querySelector,Wt=Gt.querySelectorAll,Ft=Gt.queryElement,jt=Gt.queryNode,qt=Gt.queryEventElement,$t={add:function(e,t){t=$t.formatClass(Y(arguments,1));e=e.classList;e.add.apply(e,t)},remove:function(e,t){t=$t.formatClass(Y(arguments,1));e=e.classList;e.remove.apply(e,t)},toggle:function(e,t,n){var r=e.classList,e=Y(arguments,1),i=arguments[arguments.length-1];ce(i)?(n=i,e.pop(),(e=$t.formatClass(e)).forEach(function(e){r.toggle.apply(r,[e,n])})):(e=$t.formatClass(e)).forEach(function(e){r.toggle.apply(r,[e])})},set:function(e,t){t=$t.formatClass(Y(arguments,1)),e.className=t.join(" ")},contains:function(e,t){return e.classList.contains(t)},formatClass:function(e){var t=[];return e.forEach(function(e){e&&(0<=e.indexOf(" ")?e.split(" ").forEach(function(e){e&&t.push(e)}):t.push(e))}),t}},Xt=(Ut&&($t.add=function(e){var t=e.className.split(" ");$t.formatClass(Y(arguments,1)).forEach(function(e){t.indexOf(e)<0&&t.push(e)}),e.className=t.join(" ")},$t.remove=function(e){var t=e.className.split(" "),n=$t.formatClass(Y(arguments,1)),t=gt(t,function(e){return n.indexOf(e)<0});e.className=t.join(" ")},$t.toggle=function(t,e,n){var r=Y(arguments),i=arguments[arguments.length-1];ce(i)?(n=i,r.pop(),(!0===n?$t.add:$t.remove).apply($t,r)):(r=$t.formatClass(r)).forEach(function(e){$t.contains(t,e)?$t.remove(t,e):$t.add(t,e)})},$t.contains=function(e,t){return null!=e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}),$t.add),Kt=$t.remove,Jt=$t.set,Yt=$t.toggle,Zt=$t.contains,Qt=($t.formatClass,{setStyle:function(e,t,n){e.style[t]=n},setStyles:function(n,e,t){if(!Ne(e))return Qt.setStyle(n,nn(e),t);Ct(e,function(e,t){Qt.setStyle(n,nn(e),t)})},getStyle:function(e,t){return l.getComputedStyle(e,null).getPropertyValue(t)},removeStyle:function(e,t){e.style[t]=""},formatStyle:function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()},parseStyle:function(e,n){var r={};return e.split(";").forEach(function(e){var t=(e=e.split(":")).shift().trim();""!==t&&(!0===n&&(t=nn(t)),r[t]=e.join(":").trim())}),r}}),He=Qt.setStyle,en=Qt.getStyle,tn=Qt.removeStyle,nn=Qt.formatStyle,rn={__valueHooks:{multiple_select:{setValue:function(e,n){e=e.options;0!==e.length&&(null==n&&ft(e,function(e){e.selected=!1}),dt(n)||(n=[n]),ft(e,function(e){var t=e.hasAttribute("value")?e.value:e.text;e.selected=0<=n.indexOf(t)}))},getValue:function(e){var t=[];return ft(e.options,function(e){!0===e.selected&&(e.hasAttribute("value")?t.push(e.value):t.push(e.text))}),t}},radio:{setValue:function(e,t){var n=e.getAttribute("name");n?Wt("input[type='radio'][name='"+n+"']").forEach(function(e){e.checked=e.value===t}):e.checked=!0===t},getValue:function(e){var t=e.getAttribute("name");return t?(t=Ht("input[type='radio'][name='"+t+"']:checked"))?t.value:null:e.checked}},file:{setValue:function(e,t){e.value=t},getValue:function(e){return e.files}},datetime_local:{setValue:function(e,t){var n;null==t?e.value=null:(t=new Date(t),isNaN(t.getTime())?e.value=null:("local"===(n=e.getAttribute("data-timezone-offset"))?t.setMinutes(t.getMinutes()-t.getTimezoneOffset()):t.setMinutes(t.getMinutes()-n|0),e.value=t.toISOString().slice(0,16)))},getValue:function(e){return e.value}}},setValue:function(e,t){if(e.setValue)return e.setValue(t);var n=rn.getValueField(e),r=rn.__valueHooks[n];return r?r.setValue(e,t):e[n]=t},getValue:function(e){if(e.getValue)return e.getValue();var t=rn.getValueField(e),n=rn.__valueHooks[t];return n?n.getValue(e):e[t]},getValueField:function(e){return sn.isInput(e)?sn.isCheckBox(e)?"checked":sn.isDatetimeLocalInput(e)?"datetime_local":sn.isRadio(e)?"radio":sn.isFileInput(e)?"file":"value":sn.isSelect(e)?sn.isMultipleSelect(e)?"multiple_select":"value":sn.isTextArea(e)?"value":sn.isImage(e)?"src":"innerHTML"}},on=rn.getValue,an=rn.setValue,sn={isTagType:function(e,t){return e.tagName===t},isInput:function(e){return sn.isTagType(e,"INPUT")},isCheckBox:function(e){return!!sn.isInput(e)&&sn.isAttributeType(e,"CHECKBOX")},isRadio:function(e){return!!sn.isInput(e)&&sn.isAttributeType(e,"RADIO")},isFileInput:function(e){return!!sn.isInput(e)&&sn.isAttributeType(e,"FILE")},isDatetimeLocalInput:function(e){return!!sn.isInput(e)&&sn.isAttributeType(e,"DATETIME-LOCAL")},isTextArea:function(e){return sn.isTagType(e,"TEXTAREA")},isSelect:function(e){return sn.isTagType(e,"SELECT")},isMultipleSelect:function(e){return!!sn.isSelect(e)&&e.hasAttribute("multiple")},isImage:function(e){return sn.isTagType(e,"IMG")},isElement:function(e){return!(!e||"object"!=typeof e)&&(1===e.nodeType&&"string"==typeof e.nodeName&&null!=e.style&&"object"==typeof e.style&&"number"==typeof e.clientWidth)},isNode:function(e){return!(!e||"object"!=typeof e)&&(null!==e.nodeType&&"string"==typeof e.nodeName)},isAttributeType:function(e,t){e=e.getAttribute("type");return!!e&&e.toUpperCase()===t}},ln=sn.isElement,cn=sn.isNode,dn=sn.isTagType,hn={getWindowPageOffset:function(){var e=nt.documentElement,t=l.pageXOffset||e.scrollLeft||0,n=l.pageYOffset||e.scrollTop||0;return{x:t-(e.clientLeft||0),y:n-(e.clientTop||0)}},getWindowSize:function(){var e=nt.body,t=nt.documentElement;return{width:l.innerWidth||t.clientWidth||e.clientWidth,height:l.innerHeight||t.clientHeight||e.clientHeight}},getWindowPageBounds:function(){var e=hn.getWindowPageOffset(),t=hn.getWindowSize();return{x:e.x,y:e.y,width:t.width,height:t.height}},getElementWindowOffset:function(e){e=e.getBoundingClientRect();return{x:e.left,y:e.top}},getElementPageOffset:function(e){var e=e.getBoundingClientRect(),t=hn.getWindowPageOffset();return{x:t.x+e.left,y:t.y+e.top}},getElementWindowBounds:function(e){e=e.getBoundingClientRect();return{x:e.left,y:e.top,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,bottom:e.bottom}},getEventWindowOffset:function(e){return{x:e.clientX,y:e.clientY}},getEventPageOffset:function(e){var t,n=e.pageX;return null==n?(t=hn.getWindowPageOffset(),{x:e.clientX+t.x,y:e.clientY+t.y}):{x:n,y:e.pageY}}},un={create:function(e,t,n){var r,i,o=/^<([A-z]+\d?)([^\d].*)?>(.*<\/\1>)?$/.test(e.trim())?un._createByHtml(e):M(e);return null!=t&&(Ne(t)?(e=t.className||t.class,r=t.attributes,i=t.style,null!=e&&(o.className=e),null!=i&&Qt.setStyles(o,i),null!=r&&Ct(r,function(e,t){o.setAttribute(e,t)})):o.className=t),n&&n.forEach(function(e){o.appendChild(e)}),o},_createByHtml:function(e){var t=M("div"),e=(t.innerHTML=e.trim(),t.firstElementChild);return e.parentNode.removeChild(e),e},remove:function(e){var t=e.parentNode;return t&&t.removeChild(e),e},appendText:function(e,t){e.appendChild(nt.createTextNode(t))},empty:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},scrollIntoView:function(e,t,n){var r=e.offsetTop,i=t.scrollTop,o=e.offsetHeight,a=t.clientHeight,i=(r<i+(n=n||10)?t.scrollTop=r-n:i+a-n<r+o&&(t.scrollTop=r+o+n-a),e.offsetLeft),r=t.scrollLeft,o=e.offsetWidth,a=t.clientWidth;i-n<r?t.scrollLeft=i-n:r+a<i+o+n&&(t.scrollLeft=i+o+n-a)},isInDom:function(e){return nt.contains(e)},getAttributeSelector:function(e,t){return 1<arguments.length?"["+e+"='"+t+"']":"["+e+"]"}},We=(nt.contains||(un.isInDom=function(e){return nt.body.contains(e)}),l.HTMLTemplateElement&&(un._createByHtml=function(e){var t=M("template"),e=(t.innerHTML=e.trim(),t.content.firstElementChild);return e.parentNode.removeChild(e),e}),un.create),_n=un.remove,pn=un.empty,fn=un.appendText,gn=un.isInDom,yn=un.getAttributeSelector,vn={initSelectOptions:function(e,r,t){var i,o,a,s,l,c;Ne(t)?(i=t.value_field,o=t.label_field,a=t.value,s=t.restore_value,l=t.children_field,c=t.append):ht(t)&&(i=t),l=l||"children",ht(e)?e=Wt(e):dt(e)||(e=[e]),null==r?r=[]:dt(r)||(r=[r]),e.forEach(function(n){var e,t;(n=Ft(n))&&(e=on(n),!0!==c&&pn(n),r.forEach(function(e){var t;Ne(e)?e.hasOwnProperty(l)?(t=vn._createSelectOptionGroup(n,e,o),e.children.forEach(function(e){vn._createSelectOption(t,e,o,i)})):vn._createSelectOption(n,e,o,i):vn._createSelectOption(n,{label:e},o,i)}),null!=a?an(n,a):!0!==c&&!1!==s&&""!==e&&null!=e&&(t=on(n),an(n,e),""===on(n)&&an(n,t)))})},_createSelectOptionGroup:function(e,t,n){var r=We("optgroup"),n=n?t[n]:vn._getValueByOrder(t,["label","name"],"");return r.setAttribute("label",n),e.appendChild(r),r},_createSelectOption:function(e,t,n,r){Ne(t)||(t={label:t});var i=We("option"),n=n?t[n]:vn._getValueByOrder(t,["label","name"],""),r=r?t[r]:vn._getValueByOrder(t,["value","id"]),r=(null!=r&&i.setAttribute("value",r),null==n&&(n=r),i.innerHTML=n,t.attributes);r&&tt.dom.setAttribute(i,r),e.appendChild(i)},_getValueByOrder:function(t,e,n){var r=null;return ft(e,function(e){if(t.hasOwnProperty(e))return r=t[e],!1}),null==r?n:r}},Cn={stop:function(e){e.stopPropagation()},prevent:function(e){e.preventDefault()},ctrl:function(e){return!0===e.ctrlKey},shift:function(e){return!0===e.shiftKey},alt:function(e){return!0===e.altKey},meta:function(e){return!0===e.metaKey},keyboardKey:function(e,t){return e.key===t}},mn=function(e,t,n){return Cn.hasOwnProperty(t)?Cn[t]:"keydown"===e||"keyup"===e||"keypress"===e?Cn.keyboardKey:void 0},bn={_wrapperList:[],addEventListener:function(e,t,n,r){t=bn._addWrapper(e,t,n,r);e.addEventListener(t._event,t._listener,!1)},removeEventListener:function(e,t,n,r){t=bn._removeWrapper(e,t,n,r);t&&e.removeEventListener(t._event,t._listener,!1)},addTypeEventListener:function(e,t,n,r){return"resize"===t?An.addResizeListener(e,n,r):"wheel"===t?Ln.addWheelListener(e,n,r):bn.addEventListener(e,t,n,r)},removeTypeEventListener:function(e,t,n,r){return"resize"===t?An.removeResizeListener(e,n,r):"wheel"===t?Ln.removeWheelListener(e,n,r):bn.removeEventListener(e,t,n,r)},getEventTarget:function(e,t){return e.target.closest(t)},isPointerEvent:function(e){return le.isPrimitiveType(e,"MouseEvent")||le.isPrimitiveType(e,"Touch")||le.isPrimitiveType(e,"PointerEvent")},isMouseMainButton:function(e){return 0===e.button},isMouseAuxiliaryButton:function(e){return 1===e.button},isMouseSecondaryButton:function(e){return 2===e.button},_addWrapper:function(e,t,i,o){var a,n=t.split("."),s=n[0],e=(n=n.length<=1?function(e){i.apply(o,arguments)}:(a=n.slice(1),function(n){var r=!0;ft(a,function(e){var t=mn(s,e,n);if(t&&!1===t(n,e))return r=!1}),!1!==r&&i.apply(o,arguments)}),{element:e,type:t,listener:i,context:o,_event:s,_listener:n});return bn._wrapperList.push(e),e},_removeWrapper:function(n,r,i,o){return he(bn._wrapperList,function(e,t){return e.element===n&&e.type===r&&e.listener===i&&e.context===o})}},xn=bn.addEventListener,Pn=bn.removeEventListener,wn=bn.addTypeEventListener,Rn=bn.removeTypeEventListener,Dn={_readyListeners:[],addReadyListener:function(e,t){Dn._isDocumentReady()?e.apply(t):(0===Dn._readyListeners.length&&xn(nt,"DOMContentLoaded",Dn._handleReady),Dn._readyListeners.push({listener:e,context:t}))},_handleReady:function(t){Rt(function(){Dn._readyListeners.forEach(function(e){e.listener.apply(e.context,[t])})})},_isDocumentReady:function(){var e=nt.readyState;return"complete"===e||!!nt.body&&"interactive"===e}},An={_createResizeTrigger:function(e){var t=M("object");return((t.__ze_resize_element__=e).__ze_resize_trigger__=t).setAttribute("style","display:block;position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden;opacity:0;pointer-events:none;z-index: -1;"),t.onload=An._handleObjLoad,t.type="text/html",Rt(function(){e.insertBefore(t,e.firstChild),t.data="about:blank"}),t},_handleObjLoad:function(e){var t=this.contentDocument;t&&t.defaultView&&(t.defaultView.__ze_resize_trigger__=this.__ze_resize_element__,t.defaultView.addEventListener("resize",An._handleResize))},_handleResize:function(n){(n.target||n.srcElement).__ze_resize_trigger__.__ze_resize_listeners__.forEach(function(e){var t=e.listener,e=e.context;t.apply(e,[n])})}},kn=(nt.attachEvent?(An.addResizeListener=function(e,t,n){var r=e.__ze_resize_listeners__;r||(e.__ze_resize_listeners__=r=[],(e.__ze_resize_trigger__=e).attachEvent("onresize",An._handleResize)),r.push({listener:t,context:n})},An.removeResizeListener=function(e,t,n){var r=e.__ze_resize_listeners__;r&&(he(r,function(e){return e.listener===t&&e.context===n}),0===r.length&&(e.detachEvent("onresize",An._handleResize),delete e.__ze_resize_listeners__))}):(An.addResizeListener=function(e,t,n){var r=e.__ze_resize_listeners__;r||(e.__ze_resize_listeners__=r=[],"static"===Qt.getStyle(e,"position")&&Qt.setStyle(e,"position","relative"),An._createResizeTrigger(e)),r.push({listener:t,context:n})},An.removeResizeListener=function(e,t,n){var r=e.__ze_resize_listeners__;r&&(he(r,function(e){return e.listener===t&&e.context===n}),0===r.length&&((r=e.__ze_resize_trigger__)&&(r.contentDocument.defaultView.removeEventListener("resize",An._handleResize),e.removeChild(r),delete e.__ze_resize_trigger__),delete e.__ze_resize_listeners__))}),"onwheel"in M("div")?"wheel":nt.onmousewheel!==f?"mousewheel":"MozMousePixelScroll"),Ln={addWheelListener:function(e,t,n){xn(e,kn,t,n)},removeWheelListener:function(e,t,n){Pn(e,kn,t,n)},isWheelDown:function(e){return e.wheelDelta<0||0<e.deltaY||0<e.detail}},Sn={_clickListeners:[],addClickListener:function(e,t){0===Sn._clickListeners.length&&xn(nt,"click",Sn._handleClick),Sn._clickListeners.push({listener:e,context:t})},removeClickListener:function(t,n){he(Sn._clickListeners,function(e){return e.listener===t&&e.context===n}),0===Sn._clickListeners.length&&Pn(nt,"click",Sn._handleClick)},_handleClick:function(t){Sn._clickListeners.forEach(function(e){e.listener.apply(e.context,[t])})}},En={render:function(e,t,n){if(!0!==(o=n||/<%(.+?)%>/).test(e))return e;for(var r,i,o=new RegExp(o,"g"),a=/(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,s="with(obj) { var r=[];\n",l=0,c=function(e,t){return s+=t?e.match(a)?e+"\n":"r.push("+e+");\n":""!==e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",c};r=o.exec(e);)c(e.slice(l,r.index))(r[1],!0),l=r.index+r[0].length;c(e.substr(l,e.length-l)),s=(s+'return r.join(""); }').replace(/[\r\t\n]/g," ");try{i=new Function("obj",s).apply(t,[t])}catch(e){console.error("Template Engine error:'"+e.message+"' in \n\nCode:\n"+s+"\n",null,"error")}return i}},Tn=En.render,Vn=(Fe({AJAX_PROMISE:!1,AJAX_TIMEOUT:12e4,AJAX_VARIABLE_REGEXP:/{{(.+?)}}/,AJAX_HEADERS:{"X-Requested-With":"XMLHttpRequest"}}),{get:function(e){var t=Y(arguments);return t.unshift("GET"),Vn.ajax.apply(null,t)},post:function(e){var t=Y(arguments);return t.unshift("POST"),Vn.ajax.apply(null,t)},ajax:function(n,r){n=n.toUpperCase();var i=Vn._getAjaxParams.apply(null,Y(arguments,2)),e=null!=l.Promise;if(e=e&&(i.hasOwnProperty("promise")?!0===i.promise:!0===ze("AJAX_PROMISE")))return new Promise(function(e,t){Vn._request(n,r,i,e,t)});Vn._request(n,r,i)},_request:function(e,t,n,d,r){var i,o,a=n.data,s=n.complete,h=n.context,u=n.timeout||ze("AJAX_TIMEOUT"),_=n.responseType,p=n.headers,f=n.data_type,g=!1!==n.async,n=n.variables,l=ze("AJAX_BEFORE_SEND"),l=(ut(l)&&(i=l),ze("AJAX_COMPLETE")),l=(ut(l)&&(o=l),n&&(t=X.replaceVars(t,n,ze("AJAX_VARIABLE_REGEXP"))),"GET"===e&&null!=a&&(t=zt.appendURLSearchParam(t,a),a=null),Ue({},ze("AJAX_HEADERS"))),y=(a&&(Ne(a)||dt(a)?(l["Content-Type"]="application/json; charset=utf-8",a=JSON.stringify(a)):"POST"===e&&(l["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8")),!1),c=new XMLHttpRequest;return g&&(c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&(y=!0,Vn._callBack(c,f,s,h,d,r),o&&o(c))}),_&&(c.responseType=_),c.open(e,t,g),Ct(Ue(l,p),function(e,t){!1!==t&&c.setRequestHeader(e,t)}),i&&i(c),c.send(a),!1==g?(Vn._callBack(c,f,s,h,d,r),o&&o(c)):wt(function(){!0!==y&&(c&&(c.onreadystatechange=null,c.onerror=null,c.onabort=null),s&&s.apply(h,[408,null,c]),o&&o(c,!0),r&&r({status:408,request:c}),c=null)},u),c},_callBack:function(e,t,n,r,i,o){var a,s=e.status,l=200<=s&&s<300||304===s,c=(t?t=t.trim().toUpperCase():(c=e.getResponseHeader("Content-Type"))&&0<=c.indexOf("json")&&(t="JSON"),e.responseType);!t||""!==c&&"text"!==c?a=e.response:(a=e.responseText,"JSON"===t&&(a=JSON.parse(a))),n&&n.apply(r,[s,a,e]),l?i&&i({status:s,response:a,request:e}):o&&o({status:s,response:a,request:e})},_getAjaxParams:function(){var e,t=arguments.length;return 1===t?e=arguments[0]:1<t&&(e=Ue({data:arguments[0]},arguments[1])),Ne(e)?e:{}},setup:function(e){}}),On={jsonp:function(e){var t=Vn._getAjaxParams.apply(null,Y(arguments,1)),n=t.data,r=t.complete,i=t.context,t=t.timeout||ze("AJAX_TIMEOUT"),o=(n&&(e=zt.appendURLSearchParam(e,n)),"_z_jsonp_callback_"+Date.now()),a=!1;l[o]=function(e){a=!0,delete l[o],r.apply(i,[!1,!0,e])},e=e+(/\?/.test(e)?"&":"?")+"callback="+o,On._loadJS(e),wt(function(){!0!==a&&(delete l[o],r.apply(i,[!0]))},t)},_loadJS:function(e){var t=M("script");t.type="text/javascript",t.onload=function(){t.onload=null,t.parentNode.removeChild(t)},t.onerror=function(){t.onerror=null,t.parentNode.removeChild(t)},(Ht("head")||Ht("body")).appendChild(t),t.src=e}},In=(tt.$={AjaxUtil:Vn,JSONPUtil:On,AnimationUtil:Lt,AnimationTiming:kt,BrowserUtil:Nt,CookieUtil:Ot,LocalStorageUtil:Mt,SessionStorageUtil:Bt,URLUtil:zt,ChangeSupport:w,EventDispatcher:e,ZObject:t,DomClass:$t,DomEle:vn,DomGeom:hn,DomQuery:Gt,DomStyle:Qt,DomType:sn,DomUtil:un,DomValue:rn,DomClickEventUtil:Sn,DomEventUtil:bn,DomReadyEventUtil:Dn,DomResizeEventUtil:An,DomWheelEventUtil:Ln,TemplateEngine:En,ImageUtil:St,MathConvexHullUtil:Ve,MathLineUtil:Oe,MathPathUtil:Me,MathPointUtil:Ie,MathRectUtil:Be,MathUtil:ke,ArrayMap:je,ArrayUtil:de,ClassUtil:xt,ColorUtil:c,Defaults:$,FuncUtil:J,I18nUtil:ve,ObjectUtil:_e,PathUtil:we,StrUtil:X,TimerUtil:Pt,DateUtil:Pe,TypeCheck:le,Util:Re,setSysDefault:Fe},tt.util={isArray:dt,isString:ht,isBoolean:ce,isObject:Ne,isFunction:ut,isNumber:_t,mergeArray:pt,eachArray:ft,filterArray:gt,findArray:yt,removeArrayItem:he,toArrayMap:ue,mergeObject:Ue,deepMergeObject:pe,eachObject:Ct,filterObject:fe,getObjectDeepValue:mt,setObjectDeepValue:ye,getObjectValues:bt,getObjectDeepKVMap:_e.getDeepKVMap,extendClass:Ge,newClass:xt.newClass,exec:Re.exec,formatDate:Pe.format,callBatch:function(e,t,n,r,i){be(e,t,n=n||l,r=r||"_call_batch_flag",i)},callLater:function(e,t,n){return wt(e,t=null==t||t<=0?20:t,n)},cancelCallLater:function(e,t,n){return Pt.cancelCallLater(e,t=null==t||t<=0?20:t,n)},callInterval:function(e,t,n,r,i){return xe(e,t=null==t||t<=0?20:t,n,r,i)},cancelCallInterval:function(e,t,n){return Pt.cancelCallInterval(e,t=null==t||t<=0?20:t,n)},callRAFLater:Rt,callRAFInterval:Dt,cancelCallRAFInterval:Pt.cancelCallRAFInterval,animate:Lt.animate,cancelAnimate:Lt.cancelAnimate,color:{toRGB:c.toRGB,toRGBA:c.toRGBA,toHSL:c.toHSL,toHSLA:c.toHSLA,toHex:c.toHex,toName:c.toName,lighten:c.lighten,darken:c.darken,saturate:c.saturate,desaturate:c.desaturate,random:c.random,defaults:c.defaults,mix:c.mix},image:{register:St.register,get:St.get,clear:St.clearCache}},tt.type={isArray:dt,isString:ht,isBoolean:ce,isObject:Ne,isFunction:ut,isNumber:_t},tt.dom={query:function(e,t){return t?(t=Ft(t))?Ft(e,t):null:Ft(e)},queryAll:function(e,t){return t?(t=Ft(t))?Wt(e,t):[]:Wt(e)},nextElementSibling:function(e){return Ft(e).nextElementSibling},previousElementSibling:function(e){return Ft(e).previousElementSibling},addClass:function(e,t){var n=Y(arguments,1);return n.unshift(Ft(e)),Xt.apply(null,n)},removeClass:function(e,t){var n=Y(arguments,1);return n.unshift(Ft(e)),Kt.apply(null,n)},toggleClass:function(e,t,n){var r=Y(arguments,1);return r.unshift(Ft(e)),Yt.apply(null,r)},setClass:function(e,t){var n=Y(arguments,1);return n.unshift(Ft(e)),Jt.apply(null,n)},containsClass:function(e,t){return e=Ft(e),Zt(e,t)},setStyle:function(e,t,n){e=Ft(e),Qt.setStyles(e,t,n)},getStyle:function(e,t){return en(Ft(e),nn(t))},removeStyle:function(e,t){return tn(Ft(e),nn(t))},setAttribute:function(n,e,t){if(n=Ft(n),!Ne(e))return n.setAttribute(e,t);Ct(e,function(e,t){n.setAttribute(e,t)})},getAttribute:function(e,t){return(e=Ft(e)).getAttribute(t)},removeAttribute:function(e,t){return(e=Ft(e)).removeAttribute(t)},hasAttribute:function(e,t){return(e=Ft(e)).hasAttribute(t)},getAttributes:function(e){for(var t=(e=Ft(e)).attributes,n={},r=t.length-1;0<=r;r--){var i=t[r];n[i.name]=i.value}return n},setValue:function(e,t){return e=Ft(e),rn.setValue(e,t)},getValue:function(e){return e=Ft(e),rn.getValue(e)},isTagType:function(e,t){return e=Ft(e),sn.isTagType(e,t.toUpperCase())},create:We,appendText:function(e,t){return fn(jt(e),t)},remove:function(e){return _n(jt(e))},empty:function(e){return pn(jt(e))},insertBefore:function(e,t){return e=jt(e),(t=jt(t)).parentNode.insertBefore(e,t),e},insertAfter:function(e,t){return e=jt(e),(t=jt(t)).parentNode.insertBefore(e,t.nextSibling),e},insertFirst:function(e,t){return e=jt(e),(t=jt(t)).insertBefore(e,t.firstChild),e},appendChild:function(e,t){return e=Ft(e),(t=Ft(t)).appendChild(e),e},focus:function(e,t){Rt(function(){wt(function(){Ft(e).focus(t)},60)})},initSelectOptions:vn.initSelectOptions,event:{ready:Dn.addReadyListener,addEventListener:function(e,t,n,r){return wn(qt(e),t,n,r)},removeEventListener:function(e,t,n,r){return Rn(qt(e),t,n,r)},on:function(e,t,n,r){return wn(qt(e),t,n,r)},off:function(e,t,n,r){return Rn(qt(e),t,n,r)},onclick:function(e,t,n){return xn(qt(e),"click",t,n)},onchange:function(e,t,n){return xn(qt(e),"change",t,n)},onresize:function(e,t,n){return An.addResizeListener(qt(e),t,n)},onwheel:function(e,t,n){return Ln.addWheelListener(qt(e),t,n)},getTarget:function(e,t){return bn.getEventTarget(e,t)}}},tt.bom={setCookie:Ot.setCookie,getCookie:Ot.getCookie,removeCookie:Ot.removeCookie,setLocalStorage:Mt.setItem,getLocalStorage:Mt.getItem,removeLocalStorage:Mt.removeItem,clearLocalStorage:Mt.clear,onstorage:Mt.addChangeListener,setSessionStorage:Bt.setItem,getSessionStorage:Bt.getItem,removeSessionStorage:Bt.removeItem,clearSessionStorage:Bt.clear,getURLQuery:zt.getLocationSearchParam,getLocationSearchParam:zt.getLocationSearchParam,getURLSearchParam:zt.getURLSearchParam,appendURLSearchParam:zt.appendURLSearchParam,setURLSearchParam:zt.setURLSearchParam,getLocationHash:zt.getLocationHash,getURLHash:zt.getURLHash,browser:Nt.browser,browserVersion:Nt.version},tt.ajax={get:Vn.get,post:Vn.post,ajax:Vn.ajax,jsonp:On.jsonp},tt.math={toRadians:ke.toRadians,toDegrees:ke.toDegrees,calcDistance:ke.calcDistance,calcAngle:ke.calcAngle,calcPointOnCircle:Ie.calcPointOnCircle,calcPointOnEllipse:Ie.calcPointOnEllipse,calcRotatedPoint:Ie.calcRotatedPoint,calcPointsBounds:Ie.calcPointsBounds,calcPathLength:Me.calcPathLength,calcOffsetPointOnPath:Me.calcOffsetPointOnPath,createGrowRect:Be.createGrowRect},tt.Defaults=$,tt.setDefault=function(e,t){Ne(e)?Ct(e,function(e,t){ye($,e,t)}):ye($,e,t)},tt.getDefault=ze,tt.ready=Dn.addReadyListener,tt.i18n=ve,tt.ArrayMap=je,tt.ZObject=t,l.z),Ut=(tt.noConflict=function(){return l.z===tt&&(l.z=In),tt},l.z=tt,Fe({CANVAS_2D_TEXT_NEWLINE:"\n",CANVAS_2D_TEXT_LINE_SPACING:2,CANVAS_2D_TEXT_MULTILINE_ALIGN:"center"}),We("canvas")),Mn=(He(Ut,"display","block"),Ut.getContext("2d")),Bn=We("span"),zn=(Bn.innerHTML="gM",{getRenderStyle:function(e){if(null==e)return{};var t={},n=e.fillStyle||e.fill||e.fill_style,n=(n&&(t.fillStyle=n),e.strokeStyle||e.stroke||e.stroke_style);return n&&(t.strokeStyle=n),t},isNoneRenderStyle:function(e){return null==e.fillStyle&&null==e.strokeStyle},set2DAttribute:function(e,t,n){return zn._set2DAttribute(e,t,n)},set2DAttributes:function(n,e){var r=!1;return Ct(e,function(e,t){r=zn._set2DAttribute(n,e,t)||r}),r},_set2DAttribute:function(e,t,n,r){return"lineDash"===t?zn._setLineDash(e,n,r):e[t]!==n&&(!0===r&&e.save(),e[t]=n,!0)},_setLineDash:function(e,t,n){return!!dt(t)&&(e.getLineDash().join(",")!==t.join(",")&&(!0===n&&e.save(),e.setLineDash(t),!0))},saveAndSet2DAttribute:function(e,t,n,r,i){t=zn._set2DAttribute(e,t,n,!0);return r&&(r.apply(i,[e]),!0===t)?(e.restore(),!1):t},rotateAround:function(e,t,n,r,i){0!==t&&(e.save(),e.translate(n.x,n.y),e.rotate(Le(t)),e.translate(-n.x,-n.y)),r.apply(i,[e]),0!==t&&e.restore()},saveAndSet2DAttributes:function(n,e,t,r){var i=!1;return e&&Ct(e,function(e,t){i=zn._set2DAttribute(n,e,t,!i)||i}),t&&(t.apply(r,[n]),!0===i)?(n.restore(),!1):i},renderPath:function(e,t,n,r){var i=t.fillStyle,o=t.strokeStyle,a=null!=i||null!=o;!0==a&&e.beginPath(),n.apply(null,[e]),!0==a&&(!0!==r&&e.closePath(),Un(e,t,function(){null!=i&&e.fill(),null!=o&&e.stroke()}))},clear:function(e){return e.width=e.width+0,e},ctxClear:function(e,t,n){return e.clearRect(0,0,t,n),e},isOpaque:function(e,t){try{for(var n=e.getImageData(t.x,t.y,t.width,t.height),r=n.data,i=0;i<n.width;i++)for(var o=0;o<n.height;o++)if(0!==r[3+4*(o*n.width+i)])return"yes"}catch(e){return"error"}return"no"},getRoundRectRadii:function(e,t){var n,r,i,o,a;return dt(t)?0<(n=t.length)&&(a=t[0],r=t[1],i=t[2],o=t[3],a=1===n?[a,a,a,a]:2===n?[a,r,a,r]:3===n?[a,r,i,r]:[a,r,i,o]):a=[t=it(t),t,t,t],a&&[zn._getRoundRectRadius(e,a[0]),zn._getRoundRectRadius(e,a[1]),zn._getRoundRectRadius(e,a[2]),zn._getRoundRectRadius(e,a[3])]},_getRoundRectRadius:function(e,t){if(t<=0)return 0;e=st(e.width,e.height);return t<1&&(t*=e),st(t,e/2)}}),Nn=zn.set2DAttribute,Un=(zn.set2DAttributes,zn.saveAndSet2DAttributes),Gn=zn.rotateAround,Hn=zn.renderPath,Wn={_resetAlphaCanvas:function(){Wn._alpha_cvs=null},_getAlphaCanvas:function(e,t){var n=Wn._alpha_cvs;return null==n&&(n=We("canvas"),Wn._alpha_cvs=n),zn.clear(n),n},_getAlphaC2d:function(e,t){var n=this._getAlphaCanvas(),e=(n.width=e,n.height=t,n.getContext("2d",{willReadFrequently:!0}));return e.restore(),e.save(),e},isDrawRectOpaque:function(e,t){var n=Wn._getAlphaC2d(t.width,t.height),t=(n.translate(-t.x,-t.y),{x:0,y:0,width:t.width,height:t.height}),e=(e(n),zn.isOpaque(n,t));return"error"===e&&Wn._resetAlphaCanvas(),"yes"===e}},Fn={createRectDirectionLinearGradient:function(e,t,n){var r,i=e.x,o=e.y,a=e.width,s=e.height,l=ke.calcAngle({x:i,y:o},{x:i+a,y:o+s});switch(t){case"lt_to_rb":r=l;break;case"t_to_b":r=90;break;case"rt_to_lb":r=De-l;break;case"r_to_l":r=De;break;case"rb_to_lt":r=De+l;break;case"b_to_t":r=270;break;case"lb_to_rt":r=360-l;break;default:r=0}return Fn.createRectLinearGradient(e,r,n)},createRectLinearGradient:function(e,t,n){var r=e.x,i=e.y,o=e.width,a=e.height,r={x:r+o/2,y:i+a/2},i=Oe.calcRectLineIntersection(e,r,Ie.calcPointOnCircle(r,at(o,a),t),!1),e=i[0],r=i[1];return Fn.createLinearGradient(e,r,n)},createLinearGradient:function(e,t,n){var r=Mn.createLinearGradient(e.x,e.y,t.x,t.y);return Ct(n||{},function(e,t){r.addColorStop(e,t)}),r},createRectDirectionRadialGradient:function(e,t,n){return Fn.createRectRadialGradient(e,Fn._getRectDirectionGradientCenter(e,t),n)},createRectRadialGradient:function(e,t,n){var r=e.x,i=e.y,o=e.width,e=e.height,o=at(Se(t,{x:r,y:i}),Se(t,{x:r+o,y:i}),Se(t,{x:r+o,y:i+e}),Se(t,{x:r,y:i+e}));return Fn.createRadialGradient(t,0,t,o,n)},createRadialGradient:function(e,t,n,r,i){var o=Mn.createRadialGradient(e.x,e.y,t,n.x,n.y,r);return Ct(i||{},function(e,t){o.addColorStop(e,t)}),o},createRectConicGradient:function(e,t,n){return Fn.createConicGradient(Be.getRectCenter(e),t,n)},createConicGradient:function(e,t,n){var r=Mn.createConicGradient(n=null==n?0:n,e.x,e.y);return Ct(t||{},function(e,t){r.addColorStop(e,t)}),r},_getRectDirectionGradientCenter:function(e,t){var n,r=e.x,i=e.y,o=e.width,a=e.height;switch(t){case"lt_to_rb":n={x:r,y:i};break;case"t_to_b":n={x:r+o/2,y:i};break;case"rt_to_lb":n={x:r+o,y:i};break;case"r_to_l":n={x:r+o,y:i+a/2};break;case"rb_to_lt":n={x:r+o,y:i+a};break;case"b_to_t":n={x:r+o/2,y:i+a};break;case"lb_to_rt":n={x:r,y:i+a};break;case"l_to_r":n={x:r,y:i+a/2};break;default:n={x:r+o/2,y:i+a/2}}return n}},jn=(Mn.createConicGradient||(Fn.createConicGradient=function(e,t,n){return null}),{path:function(e,t){var n=t.length;if(!(n<1))for(var r,i,o,a,s=t[0],l=(e.moveTo(s.x,s.y),s.seg),c=1;c<n;c++)s=t[c],null!=l?we.isMoveTo(l)?e.moveTo(s.x,s.y):we.isQuadraticCurveTo(l)?c<n-1?(r=s.x,i=s.y,s=t[++c],e.quadraticCurveTo(r,i,s.x,s.y)):e.lineTo(s.x,s.y):we.isBezierCurveTo(l)&&(c<n-2?(r=s.x,i=s.y,o=(s=t[++c]).x,a=s.y,s=t[++c],e.bezierCurveTo(r,i,o,a,s.x,s.y)):e.lineTo(s.x,s.y)):e.lineTo(s.x,s.y),l=s.seg,we.isClose(l)&&(l=s.next_seg,e.closePath())},render:function(t,n,e,r){var i,o;e=zn.getRenderStyle(e),!0!==r&&zn.isNoneRenderStyle(e)||((i=n.length)<1||(o=e.fillStyle,Hn(t,e,function(){var e;jn.path(t,n),2<i&&null!=o&&(e=n[i-1],we.isClose(e.seg)||t.closePath())},!0)))}}),qn=jn.path,$n={createPattern:function(e){if(e=ht(e)?St.get(e):e)return Mn.createPattern(e,"repeat")}},Xn={_custom_shapes:{},register:function(e,t){Xn._custom_shapes[e]=t},render:function(e,t,n,r,i,o){r=zn.getRenderStyle(r),!0!==o&&zn.isNoneRenderStyle(r)||Hn(e,r,function(){Xn.rectShape(e,t,n,i)},!0)},rectShape:function(e,t,n,r){if(Xn._custom_shapes.hasOwnProperty(n))return Xn._custom_shapes[n](e,t);switch(n){case"rect":Xn.rect(e,t);break;case"circle":Xn.circle(e,t);break;case"ellipse":Xn.ellipse(e,t);break;case"roundrect":r&&r.radius,Xn.roundRect(e,t,r.radius||0);break;case"triangle":Xn.triangle(e,t);break;case"right_triangle":Xn.rightTriangle(e,t);break;case"diamond":Xn.diamond(e,t);break;case"pentagon":Xn.pentagon(e,t);break;case"hexagon":Xn.hexagon(e,t);break;case"star":Xn.star(e,t);break;case"parallelogram":Xn.parallelogram(e,t);break;case"cloud":Xn.cloud(e,t)}},cloud:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height,o=n+i/2,a=r+t/2,t=st(t/40,i/60),i={x:51*t+(n=o-60*t/2),y:18*t+(r=a-40*t/2)},o={x:50*t+n,y:40*t+r},a=Ie.calc3PointsCircleCenter(i,{x:60*t+n,y:30*t+r},o),s=Se(a,i);e.moveTo(i.x,i.y),Xn.arc(e,{x:a.x-s,y:a.y-s,width:2*s,height:2*s},Ee(a,i),Ee(a,o)),e.lineTo((i={x:9*t+n,y:40*t+r}).x,i.y),a=Ie.calc3PointsCircleCenter(i,{x:0*t+n,y:30*t+r},o={x:9*t+n,y:16*t+r}),s=Se(a,i),Xn.arc(e,{x:a.x-s,y:a.y-s,width:2*s,height:2*s},Ee(a,i),Ee(a,o)),a=Ie.calc3PointsCircleCenter(i={x:22*t+n,y:10*t+r},{x:11*t+n,y:11*t+r},o),s=Se(a,i),Xn.arc(e,{x:a.x-s,y:a.y-s,width:2*s,height:2*s},Ee(a,o),Ee(a,i)),a=Ie.calc3PointsCircleCenter(i,{x:38*t+n,y:0*t+r},o={x:51*t+n,y:18*t+r}),s=Se(a,i),Xn.arc(e,{x:a.x-s,y:a.y-s,width:2*s,height:2*s},Ee(a,i),Ee(a,o)),e.closePath()},arc:function(e,t,n,r){var i=t.x,o=t.y,a=t.width,t=t.height,s=st(a/2,t/2);e.save(),e.translate(i+a/2,o+t/2),a!==t&&e.scale(a/(2*s),t/(2*s)),e.arc(0,0,s,Le(n),Le(r),!1),e.restore()},rect:function(e,t){e.rect(t.x,t.y,t.width,t.height)},circle:function(e,t){var n=t.width/2,r=t.height/2,i=t.x+n,t=t.y+r,n=st(n,r);e.moveTo(i+n,t),e.arc(i,t,n,0,2*B,!1),e.closePath()},triangle:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;qn(e,[{x:n+i/2,y:r},{x:n+i,y:r+t},{x:n,y:r+t}]),e.closePath()},rightTriangle:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;qn(e,[{x:n,y:r},{x:n,y:r+t},{x:n+i,y:r+t}]),e.closePath()},diamond:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;qn(e,[{x:n+i/2,y:r},{x:n+i,y:r+t/2},{x:n+i/2,y:r+t},{x:n,y:r+t/2}]),e.closePath()},pentagon:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height,n=n+i/2,o=r+t/2;qn(e,[{x:n,y:r},{x:n+i/2,y:o-t/6},{x:n+i/3,y:o+t/2},{x:n-i/3,y:o+t/2},{x:n-i/2,y:o-t/6}]),e.closePath()},hexagon:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;qn(e,[{x:n+i/4,y:r},{x:n+3*i/4,y:r},{x:n+i,y:r+t/2},{x:n+3*i/4,y:r+t},{x:n+i/4,y:r+t},{x:n,y:r+t/2}]),e.closePath()},star:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height,o=n+i/2,a=r+t/2;qn(e,[{x:n+.388*i,y:r+.332*t},{x:o+0,y:a-t/2},{x:n+.611*i,y:r+.332*t},{x:o+i/2,y:a-t/6},{x:n+.693*i,y:r+.579*t},{x:o+i/3,y:a+t/2},{x:n+i/2,y:r+.733*t},{x:o-i/3,y:a+t/2},{x:n+.306*i,y:r+.579*t},{x:o-i/2,y:a-t/6}]),e.closePath()},parallelogram:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;qn(e,[{x:n,y:r+t},{x:n+i/4,y:r},{x:n+i,y:r},{x:n+3*i/4,y:r+t}]),e.closePath()}},Kn=(Mn.ellipse?Xn.ellipse=function(e,t){var n,r=t.x,i=t.y,o=t.width,a=o/2,s=t.height/2;a!=s?(n=r+a,e.moveTo(r+o,r=i+s),e.ellipse(n,r,a,s,0,Le(360),!1)):Xn.circle(e,t)}:Xn.ellipse=function(e,t){var n,r,i,o=t.x,a=t.y,s=t.width,l=t.height;s!==l?(n=o+s/2,a+=l/2,i=s/(2*(r=st(s/2,l/2))),l/=2*r,e.moveTo(o+s,a),e.save(),e.translate(n,a),e.scale(i,l),e.arc(0,0,r,0,2*B,!1),e.restore(),e.closePath()):Xn.circle(e,t)},Mn.roundRect?Xn.roundRect=function(e,t,n){if(!(n=zn.getRoundRectRadii(t,n)))return Xn.rect(e,t);e.roundRect(t.x,t.y,t.width,t.height,n)}:Xn.roundRect=function(e,t,n){if(!(n=zn.getRoundRectRadii(t,n)))return Xn.rect(e,t);var r=t.x,i=t.y,o=t.width,t=t.height;e.moveTo(r+n[0],i),e.lineTo(r+o-n[1],i),e.quadraticCurveTo(r+o,i,r+o,i+n[1]),e.lineTo(r+o,i+t-n[2]),e.quadraticCurveTo(r+o,i+t,r+o-n[2],i+t),e.lineTo(r+n[3],i+t),e.quadraticCurveTo(r,i+t,r,i+t-n[3]),e.lineTo(r,i+n[0]),e.quadraticCurveTo(r,i,r+n[0],i),e.closePath()},{_fontHeightMap:{},_textSizeMap:{},_defaultRenderConfig:{h_direction:"center",v_direction:"middle",wrap_text_align:"left"},render:function(t,n,r,i,o,a){null!=n&&(n+="",o=o||"center",i=zn.getRenderStyle(i),zn.isNoneRenderStyle(i)||(a=Ue({newline:ze("CANVAS_2D_TEXT_NEWLINE"),line_spacing:ze("CANVAS_2D_TEXT_LINE_SPACING"),align:ze("CANVAS_2D_TEXT_MULTILINE_ALIGN")},a),Gn(t,0|a.rotation,r,function(){var e;-1<n.indexOf(a.newline)?Kn._renderMText(t,n,r,o,i,a):(e=Kn._getTextAlign(o),Un(t,Kn._getTextAttr(e.textAlign,e.textBaseline,a.font,i),function(){i.fillStyle&&t.fillText(n,r.x,r.y),i.strokeStyle&&t.strokeText(n,r.x,r.y)}))})))},_renderMText:function(t,e,n,d,h,r){e+="";var i,o,u,_=r.font,a=r.text_size,s=(a&&(i=a.font_height,o=a.width),null==i&&(i=Kn.calcFontHeight(_)),null==o&&(o=Kn.calcTextWidth(_,e)),0|r.line_spacing),p=e.split(ze("CANVAS_2D_TEXT_NEWLINE")),l=p.length,c=n.x,a=n.y,e=r.align,n=Kn._getHVDirection(d),r=n.horizontal,d=n.vertical;u="top"===d?a-(l*i+s*(l-1)):"bottom"===d?a:(n=lt(l/2),l%2==0?a-(n*i+(n-1)*s+s/2):a-(n*i+i/2+n*s)),"left"===r?"left"===e?c-=o:"right"===e||(c-=o/2):"right"===r?"left"===e||(c+="right"===e?o:o/2):"left"===e?c-=o/2:"right"===e&&(c+=o/2),Un(t,Kn._getTextAttr(e,"top",_,h),function(){var e=0;if(h.strokeStyle)for(e=0;e<l;e++)t.strokeText(p[e],c,u+(i+s)*e);if(h.fillStyle)for(e=0;e<l;e++)t.fillText(p[e],c,u+(i+s)*e)})},_getTextAttr:function(e,t,n,r){var i={};return e&&(i.textAlign=e),t&&(i.textBaseline=t),n&&(i.font=n),r.fillStyle&&(i.fillStyle=r.fillStyle),r.strokeStyle&&(i.strokeStyle=r.strokeStyle),i},calcFontHeight:function(e){var t;return Kn._fontHeightMap.hasOwnProperty(e)?t=Kn._fontHeightMap[e]:(t=Kn._calcFontHeight(e),Kn._fontHeightMap[e]=t),t},calcTextSize:function(e,t,n){var r=[e,t+="",n].join("$");if(Kn._textSizeMap.hasOwnProperty(r))return Kn._textSizeMap[r];var i=Kn.calcFontHeight(e),o=ze("CANVAS_2D_TEXT_NEWLINE"),n=(o=!0==(-1!==t.indexOf(o))?i*(o=t.split(o).length)+(o-1)*(n=0<=n?+n:ze("CANVAS_2D_TEXT_LINE_SPACING")):i,{width:Kn.calcTextWidth(e,t),height:o,font_height:i});return Kn._textSizeMap[r]=n},calcTextWidth:function(e,t){if(null==t)return 0;var n=0,r=ze("CANVAS_2D_TEXT_NEWLINE"),i=-1!==t.indexOf(r);return Nn(Mn,"font",e),!0==i?t.split(r).forEach(function(e){n=at(n,Mn.measureText(e).width)}):n=Mn.measureText(t).width,n},getSystemFont:function(){if(null!=Kn._systemFont)return Kn._systemFont;if(nt.body){var e=l.getComputedStyle(nt.body,null);if(e){var t=e.font;if(t=t||e["font-style"]+" "+e["font-variant"]+" "+e["font-weight"]+" "+e["font-size"]+"/"+e["line-height"]+" "+e["font-family"])return Kn._systemFont=t}}return"10px sans-serif"},_calcFontHeight:function(e){He(Bn,"font",e),nt.body.appendChild(Bn);e=Bn.offsetHeight;return nt.body.removeChild(Bn),e},_getTextAlign:function(e){var t=e.startsWith("left")?"right":e.startsWith("right")?"left":"center",e=e.endsWith("top")?"bottom":e.endsWith("bottom")?"top":"middle";return{textAlign:t,textBaseline:e}},_getHVDirection:function(e){var t=e.startsWith("left")?"left":e.startsWith("right")?"right":"center",e=e.endsWith("top")?"top":e.endsWith("bottom")?"bottom":"middle";return{horizontal:t,vertical:e}}}),Jn=(Ue(tt.$,{canvas:{C2DAlphaUtil:Wn,C2DGradientUtil:Fn,C2DPathUtil:jn,C2DPatternUtil:$n,C2DRectShapeUtil:Xn,C2DTextUtil:Kn,C2DUtil:zn}}),tt.canvas2d={clear:function(e){zn.clear(Ft(e))},renderText:Kn.render,renderShape:Xn.render,registerShape:Xn.register,path:qn,renderPath:jn.render},Fe({VIEW_LABEL_FIELD:"name",VIEW_INFO_FIELD:"info"}),{isIModel:function(e){return!(null==e||!e.__toTypeString_Model_$)&&e.__toTypeString_Model_$()===Z},_isIModelType:function(e,t,n){if(Jn.isIModel(e)){t=e["__toTypeString_"+t+"_$"];if(t)return t.apply(e)===n}return!1},isData:function(e){return Jn._isIModelType(e,"Data",Q)},isView:function(e){return Jn._isIModelType(e,"View",te)},isProvider:function(e){return Jn._isIModelType(e,"Provider",ee)}}),Yn=Jn.isData,En=Jn.isView,Zn=Jn.isProvider,Qn={isParentSettable:function(e,t){return e!==t&&!Qn.isDescendantOf(t,e)},getDataRoot:function(e){for(var t=e.getProperty("parent");t;)t=(e=t).getProperty("parent");return e},isDescendantOf:function(e,t){for(var n=e.getProperty("parent");n;){if(t===n)return!0;n=n.getProperty("parent")}return!1},getAncestorArray:function(e,t){for(var n=[],r=e.getProperty("parent");r;){if(n.push(r),t===r)return n;r=r.getProperty("parent")}return n},getAddedDescendantArray:function(e,t){var n=[];return Qn._getAddedDescendantArray(n,e,t),n},_getAddedDescendantArray:function(t,n,e){e=Qn.getAddedChildren(n,e);0<e.length&&(pt(t,e),e.forEach(function(e){Qn._getAddedDescendantArray(t,n,e)}))},getAddedChildren:function(e,t){return gt(t.getChildren(!1),e.contains,e)},getAddedSiblingArray:function(e,t){t=t.getProperty("parent");return t?gt(t.getChildren(!1),e.contains,e):e.toRootArray(!1)},isAncestorAdded:function(t,e){e=Qn.getAncestorArray(e);if(0===e.length)return!0;var n=!0;return e.forEach(function(e){t.contains(e)||(n=!1)}),n}},er={parse:function(e,t,n,r){e=er.parseToObjectArray(e,t,n);return tr.parse(e,r)},parseToObjectArray:function(e,t,n){t=!0===t?er._parseLevelHTMLData(e):er._parseListHTMLData(e);return ut(n)&&t.forEach(function(e){er._convertItemAttr(e,n)}),t},_convertItemAttr:function(n,r){Ct(n,function(e,t){n[e]=r(e,t)});var e=n.children;e&&e.forEach(function(e){er._convertItemAttr(e,r)})},parseAttributes:function(e,t){for(var n=e.attributes,r=n.length,i=0;i<r;i++){var o=n[i],a=o.nodeName;"style"!==a&&"class"!==a&&(t[a]=o.nodeValue)}return t},_parseListHTMLData:function(e){for(var t=[],n=e.children,r=n.length,i=0;i<r;i++){var o=n[i],a={tag:o.tagName};er.parseAttributes(o,a),er.parseTemplate(o,a),"text"===a.content_type?er._parseTextContent(o,a):er._parseElementContent(o,a),t.push(a)}return t},parseTemplate:function(e,t){e=Ht("zw-template",e);return e&&(t.template=er._htmlDecode(e.innerHTML),_n(e)),e},_htmlDecode:function(e){return L(e).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")},_getChildren:function(e){var t,e=e.children;return 1===e.length&&(t=e[0],(sn.isTagType(t,"UL")||sn.isTagType(t,"OL"))&&(e=t.children)),e},_parseLevelHTMLData:function(e){for(var t=[],n=er._getChildren(e),r=n.length,i=0;i<r;i++){var o=n[i],a={tag:o.tagName};er.parseAttributes(o,a),er.parseTemplate(o,a),er._parseElementChildren(o,a),t.push(a)}return t},_parseElementChildren:function(e,t){var n=er._getChildren(e),r=n.length;if(0===r)er._parseTextContent(e,t);else{for(var i=[],o=0;o<r;o++){var a=n[o],s={tag:a.tagName};er.parseAttributes(a,s),er.parseTemplate(a,s),er._parseElementChildren(a,s),i.push(s)}t.children=i}},_parseTextContent:function(e,t,n){var r=e.textContent.trim();return r&&(t.hasOwnProperty("content")||(t.content=e.innerHTML),t.hasOwnProperty("name")||(t.name=r)),t},_parseElementContent:function(e,t){var n,r=e.innerHTML,i=r.trim();i&&(t.hasOwnProperty("content")||(0<(e=pt([],e.children)).length?(n=We("div","element_content"),ft(e,function(e){n.appendChild(e)}),t.content={type:"element",content:n}):t.content=r),t.hasOwnProperty("name")||(t.name=i))}},tr={parse:function(d,e,t){var n=(e=Ue({clazz:"clazz",parent:"parent",children:"children",link_from:"link_from",link_to:"link_to"},e)).clazz,r=e.parent,i=e.children,o=e.link_from,h=e.link_to,a=e.id,s=[n,r,i,o,h],u="_z_"+n,_="_z_"+r,p="_z_"+i,l=[],c=(d.forEach(function(e){Yn(e)?l.push(e):Ne(e)?tr._createItemData(tr._replaceKeyword(e,s,i),l,u,p):ht(e)&&tr._createItemData({name:e},l,u,p)}),{}),f=t?pt([],t,l):l;return a?f.forEach(function(e){e.hasProperty(a)&&(c[e.getProperty(a)]=e)}):["name","id"].forEach(function(t){f.forEach(function(e){e.hasProperty(t)&&(c[e.getProperty(t)]=e)})}),l.forEach(function(e){var t=e.getProperty(_);!t||(t=Yn(t)?t:c[t])&&e.set("parent",t)}),s=["_z_"+n,"_z_"+r,"_z_"+i,"_z_"+o,"_z_"+h],l.forEach(function(e){s.forEach(e.removeProperty,e)}),l},_replaceKeyword:function(e,t,n){var r,i={},o={},a=(Ct(e,function(e,t){Yn(t)?i[e]=t:o[e]=t}),pe({},o)),s=(a=Ue(a,i))[n];return dt(s)&&(r=[],s.forEach(function(e){Ne(e)?r.push(tr._replaceKeyword(e,t,n)):ht(e)&&r.push({name:e})}),a[n]=r),t.forEach(function(e){a.hasOwnProperty(e)&&(a["_z_"+e]=a[e],delete a[e])}),a._$z_data=e,a},_createItemData:function(e,t,n,r,i){var o=e[n]||rr,a=xt.createInstance(o,[e]),o=(i&&a.set("parent",i),t.push(a),e[r]);dt(o)&&o.forEach(function(e){tr._createItemData(e,t,n,r,a)})}},de={getSingleObjectArg:function(e,t){if(1===e.length){e=e[0];if(Ne(e))return e[t]}}},nr=de.getSingleObjectArg,rr=(Ge(n,w,{__toTypeString_Model_$:function(){return Z}}),function(e){if(!(this instanceof rr))return xt.createInstance(rr,arguments);this._childArrayMap=new je,rr.superClass.constructor.apply(this,arguments)}),ir=(Ge(rr,n,{___zsg:["parent"],___zdefaults_:{parent:f,name:f,icon:f},__toTypeString_Data_$:function(){return Q},isPropertyValid:function(e,t,n){if("parent"===e){if(!0===this.__pcrChanging)return!1;if(t){if(!Yn(t))return!1;if(!Qn.isParentSettable(this,t))return!1}}return rr.superClass.isPropertyValid.apply(this,arguments)},beforeSetProperty:function(e,t,n){"parent"===e&&(this.__pcrChanging=!0,n&&n.removeChild(this)),rr.superClass.beforeSetProperty.apply(this,arguments)},afterSetProperty:function(e,t,n){"parent"===e&&(t&&t.addChild(this),this.__pcrChanging=!1),rr.superClass.afterSetProperty.apply(this,arguments)},addChild:function(e){!0!==this.__pcrChanging&&Yn(e)&&(this.isParentOf(e)||Qn.isParentSettable(e,this)&&(this.__pcrChanging=!0,this._childArrayMap.add(e.id(),e),e.setProperty("parent",this),this.__pcrChanging=!1,this.dispatchChangeEvent("children",e,f)))},removeChild:function(e){!0!==this.__pcrChanging&&Yn(e)&&this.isParentOf(e)&&(this.__pcrChanging=!0,this._childArrayMap.remove(e.id()),e.removeProperty("parent"),this.__pcrChanging=!1,this.dispatchChangeEvent("children",null,e))},clearChildren:function(){this.__pcrChanging=!0;var e=this._childArrayMap.toArray();e.forEach(function(e){e.removeProperty("parent")}),this._childArrayMap.clear(),this.__pcrChanging=!1,this.dispatchChangeEvent("children",this._childArrayMap.toArray(),e)},getChildren:function(e){return this._childArrayMap.toArray(e)},isParentOf:function(e){return this._childArrayMap.has(e.id())},hasChildren:function(){return 0<this._childArrayMap.size()},eachChildren:function(e,t){this._childArrayMap.eachArray(e,t)},clone:function(n,e){var t=this.getProperties(!1),r={};return ut(n)?Ct(t,function(e,t){!1!==n(e,t)&&(r[e]=t)}):Ne(n)?Ct(t,function(e,t){!1!==n[e]&&(r[e]=t)}):r=Ue(r,t),xt.createInstance(this.constructor,[Ue(r,e)])},_getAttachedDataArray:function(){return this._childArrayMap.toArray(!1)}}),Ge(r,n,{__toTypeString_Provider_$:function(){return ee},add:function(e,n){var t=arguments.length;dt(e)?1<t?e.forEach(function(e,t){this.add(e,n+t)},this):e.forEach(function(e){this.add(e)},this):(Yn(e)||Re.throwError("Only z.Data instance is allowed"),!0!==this.isAddable(e)||this.contains(e)||(1<t?(this._dataArrayMap.add(e.id(),e,n),this._onAdd(e,n)):(this._dataArrayMap.add(e.id(),e),this._onAdd(e)),this.dispatchProviderChangeEvent("add",e)))},_onAdd:function(e){},isAddable:function(e){return!0},remove:function(e){this.contains(e)&&(this._dataArrayMap.remove(e.id()),this._onRemove(e),this.dispatchProviderChangeEvent("remove",e))},_onRemove:function(e){},clear:function(){var e;0<this._dataArrayMap.size()&&(e=this._dataArrayMap.toArray(),this._dataArrayMap.clear(),this._onClear(e),this.dispatchProviderChangeEvent("clear",e))},_onClear:function(e){},contains:function(e){return this._dataArrayMap.has(e.id())},find:function(t,n){if(Ne(t))return this._dataArrayMap.findArray(function(n){var r=!0;return Ct(t,function(e,t){if(n.getProperty(e)!==t)return r=!1}),r});if(ut(t))return this._dataArrayMap.findArray.apply(this._dataArrayMap,arguments);var e=arguments.length;return 1===e?this._dataArrayMap.findArray(function(e){return e.hasProperty(t)}):2<=e?this._dataArrayMap.findArray(function(e){return e.getProperty(t)===n}):f},filter:function(t,n){if(Ne(t))return this._dataArrayMap.filterArray(function(n){var r=!0;return Ct(function(e,t){if(n.getProperty(e)!==t)return r=!1}),r});if(ut(t))return this._dataArrayMap.filterArray.apply(this._dataArrayMap,arguments);var e=arguments.length;return 1===e?this._dataArrayMap.filterArray(function(e){return e.hasProperty(t)}):2<=e?this._dataArrayMap.filterArray(function(e){return e.getProperty(t)===n}):[]},toArray:function(e){return this._dataArrayMap.toArray(e)},size:function(){return this._dataArrayMap.size()},each:function(e,t){this._dataArrayMap.eachArray(e,t)},addProviderChangeListener:function(e,t){this.addListener("provider.change",e,t)},removeProviderChangeListener:function(e,t){this.removeListener("provider.change",e,t)},dispatchProviderChangeEvent:function(e,t,n){this.dispatchEvent("provider.change",{type:e,data:t,info:n})}}),Ge(qe,r,{_onAdd:function(e){null==e.getProperty("parent")&&this._rootArrayMap.add(e.id(),e),e.addChangeListener(this._handleDataChange,this)},_onRemove:function(e){var t=e._getAttachedDataArray();t&&t.forEach(this.remove,this),null==e.getProperty("parent")&&this._rootArrayMap.remove(e.id()),e.removeChangeListener(this._handleDataChange,this)},_onClear:function(e){this._rootArrayMap.clear(),e.forEach(function(e){e.removeChangeListener(this._handleDataChange,this)},this)},_handleDataChange:function(e){var t,n,r;"parent"===e.property&&(t=e.source,n=e.old_value,r=e.new_value,null==n&&null!=r?this._rootArrayMap.remove(t.id()):null==r&&null!=n&&this._rootArrayMap.add(t.id(),t)),e.data=e.source,this.dispatchDataChangeEvent(e)},addDataChangeListener:function(e,t){this.addListener("provider.data.change",e,t)},removeDataChangeListener:function(e,t){this.removeListener("provider.data.change",e,t)},dispatchDataChangeEvent:function(e){this.dispatchEvent("provider.data.change",e)},toRootArray:function(e){return this._rootArrayMap.toArray(e)},hEach:function(t,n){this._rootArrayMap.eachArray(function(e){return this._hEach(e,t,n)},this)},hEachByData:function(e,t,n){e.eachChildren(function(e){if(this.contains(e))return this._hEach(e,t,n)},this)},_hEach:function(e,t,n){var r=t.apply(n,[e]);return!1!==r&&(e.eachChildren(function(e){if(this.contains(e)&&!1===(r=this._hEach(e,t,n)))return!1},this),r)},getSelectProvider:function(){return null==this._selectProvider&&(this._selectProvider=new ir(this)),this._selectProvider},getCheckProvider:function(){return null==this._checkProvider&&(this._checkProvider=new ir(this)),this._checkProvider},getExpandProvider:function(){return null==this._expandProvider&&(this._expandProvider=new ir(this)),this._expandProvider},moveToPrevious:function(e){var t=this._getIndexArray(e),n=t.indexOf(e);0!==n&&(t.splice(n,1),t.splice(n-1,0,e),this.dispatchIndexChangeEvent(e,n,n-1))},moveToNext:function(e){var t=this._getIndexArray(e),n=t.length,r=t.indexOf(e);r!==n-1&&(t.splice(r,1),t.splice(r+1,0,e),this.dispatchIndexChangeEvent(e,r+1,r))},moveToFirst:function(e){var t=this._getIndexArray(e),n=t.indexOf(e);0!==n&&(t.splice(n,1),t.unshift(e),this.dispatchIndexChangeEvent(e,0,n))},moveToLast:function(e){var t=this._getIndexArray(e),n=t.length,r=t.indexOf(e);r!==n-1&&(t.splice(r,1),t.push(e),this.dispatchIndexChangeEvent(e,n-1,r))},moveTo:function(e,t){var n=this._getIndexArray(e),r=n.indexOf(e);r!==t&&(n.splice(r,1),n.splice(t,0,e),this.dispatchIndexChangeEvent(e,t,r))},_getIndexArray:function(e){e=e.getProperty("parent");return e?e.getChildren(!1):this._rootArrayMap.toArray(!1)},addIndexChangeListener:function(e,t){this.addListener("provider.index.change",e,t)},removeIndexChangeListener:function(e,t){this.removeListener("provider.index.change",e,t)},dispatchIndexChangeEvent:function(e,t,n){this.dispatchEvent("provider.index.change",{data:e,new_index:t,old_index:n})}}),function(e){ir.superClass.constructor.apply(this),this.setProvider(e)}),or=(Ge(ir,r,{set:function(e){this.clear(),Yn(e)?this.isAddable(e)&&this._dataArrayMap.add(e.id(),e):dt(e)&&ft(e,function(e){Yn(e)&&this.isAddable(e)&&this._dataArrayMap.add(e.id(),e)},this),0<this._dataArrayMap.size()&&this.dispatchProviderChangeEvent("set",this._dataArrayMap.toArray())},getLast:function(){var e=this._dataArrayMap.toArray(!1);return e[e.length-1]},isAddable:function(e){return!this._provider||this._provider.contains(e)},setProvider:function(e){this._provider&&(this._provider.removeProviderChangeListener(this._handleProviderChange,this),this._provider.removeDataChangeListener&&this._provider.removeDataChangeListener(this._handleDataChange,this)),this._provider=e,this.clear(),e&&(e.addProviderChangeListener(this._handleProviderChange,this),e.addDataChangeListener&&e.addDataChangeListener(this._handleDataChange,this))},_handleDataChange:function(e){this.onDataChange(e)},onDataChange:function(){},_handleProviderChange:function(e){var t=e.type;"remove"===t?this._dataArrayMap.remove(e.data.id()):"clear"===t&&this._dataArrayMap.clear(),this.onProviderChange(e)},onProviderChange:function(e){}}),{parseHtml:function(e,t,n,r){return er.parse(e,t,n,r)},parseJSON:function(e,t,n){return tr.parse(e,t,n)}}),ar=(Ge(Je,n,Ue({__toTypeString_View_$:function(){return te},appendTo:function(e){(e=Ft(e)).appendChild(this.getRoot())},_appendToUpdate:function(){var e=this.getRoot();Dt(function(){if(gn(e))return this.update(),this._displayToResize(),!1},this)},_displayToResize:function(){var n;!0===this.getProperty("onresize")&&(n=this.getRoot(),xe(function(){for(var e=n.parentNode,t=!0;e;){if("none"===en(e,"display")){t=!1;break}if((e=e.parentNode)===nt)break}if(t)return this._doResizeUpdate(),!1},600,this))},afterSetProperty:function(e,t,n){Je.superClass.afterSetProperty.apply(this,arguments),this._onViewChange(e,t,n)},_onViewChange:function(e,t,n){this._callOn("onViewChange","on.view.change",{property:e,new_value:t,old_value:n},[e,t,n]),!0!==this._doViewCSSUpdate(e,t,n)&&!0!==this._doViewOnResizeUpdate(e,t,n)&&this._update()},onViewChange:function(e,t){this.addListener("on.view.change",e,t)},offViewChange:function(e,t){this.removeListener("on.view.change",e,t)},update:function(e){!0===e?(this._update(),this._handleViewResize()):(this._doBatchUpdate(),this._doBatchResizeUpdate())},_update:function(){this._callBatch(this._doBatchUpdate,"update_cb_")},_doBatchUpdate:function(){this._doUpdate(),this._onViewUpdate()},_onViewUpdate:function(){this._callOn("onViewUpdate","on.view.update",{},[])},onViewUpdate:function(e,t){this.addListener("on.view.update",e,t)},_doUpdate:function(){},_doViewCSSUpdate:function(e,t,n){var r;return"style"===e?(r={},ht(n)&&(n=Qt.parseStyle(n)),Ne(n)&&I(n).forEach(function(e){r[e]=""}),ht(t)&&(t=Qt.parseStyle(t)),Ne(t)&&(r=Ue(r,t)),tt.dom.setStyle(this._root,r),!0):"class"===e?(n&&Kt(this._root,n),t&&Xt(this._root,t),!0):void 0},_callBatch:function(e,t){be(e,{key:t,context:this})},getRoot:function(){return this._root}},d(),i())),Ge(Ye,Je,Ue({makeVisible:function(e){},_isDisabled:function(e){return this.isDisabled(e)},isDisabled:function(e){return!0===this.getDataViewProperty(e,"disabled")},getDataViewProperty:function(e,t,n){n=n||t;var r=this.getDataProperties(e);if(r){if(r.hasOwnProperty(t))return r[t];if(r.hasOwnProperty(n))return r[n]}if(e.hasProperty(t))return e.getProperty(t);if(this.hasProperty(n))return this.getProperty(n);r=e.getProperty(t);return null!=r?r:this.getProperty(n)},hasDataViewProperty:function(e,t,n){n=n||t;var r=this.getDataProperties(e);if(r){if(r.hasOwnProperty(t))return!0;if(r.hasOwnProperty(n))return!0}return!!e.hasProperty(t)||!!this.hasProperty(n)},getDataProperties:function(e){}},o(),g())),Ge(y,Ye,Ue({___zdefaults_:{model_select:!1,model_expand:!1,model_check:!1,make_visible_on_select:!0,selectable:!0,label_field:ze("VIEW_LABEL_FIELD"),label_visible:!0,info_field:ze("VIEW_INFO_FIELD"),info_visible:!0},_onViewChange:function(e,t,n){this._updateAllDataVar(),y.superClass._onViewChange.apply(this,arguments),this._doAttachProviderUpdate(e)},_onProviderChange:function(){y.superClass._onProviderChange.apply(this,arguments),this._updateSelectProvider(),this._updateExpandProvider(),this._updateCheckProvider()},_doAttachProviderUpdate:function(e){return"model_select"===e?(this._updateSelectProvider(),!0):"model_expand"===e?(this._updateExpandProvider(),!0):"model_check"===e?(this._updateCheckProvider(),!0):void 0},_updateSelectProvider:function(){},_updateExpandProvider:function(){},_updateCheckProvider:function(){},_updateAllDataVar:function(){this._update_all_data_=!0,this._needUpdateDataArray.length=0},_updateAllData:function(){this._updateAllDataVar(),this._update()},_updateData:function(e){this._addNeedUpdateData(e),this._update()},_onModelChange:function(e){"set_provider"===e&&(this._updateAllDataVar(),this._clearDataRendererImpl(),this._initAllDataRenderer()),y.superClass._onModelChange.apply(this,arguments)},update:function(){this._updateAllDataVar(),y.superClass.update.apply(this,arguments)},_doUpdate:function(e,t,n){y.superClass._doUpdate.apply(this,arguments),!0===this._update_all_data_?this._doUpdateDataArray(this.getDataArray(!1)):this._doUpdateDataArray(this._needUpdateDataArray),this._needUpdateDataArray.length=0,this._update_all_data_=!1},_doUpdateDataArray:function(e){var n=[];e.forEach(function(e){var t=e.id(),t=this._getDataRelatedDataArray(e,!0===this._needUpdateDataADMap[t+"_$_ancestor"],!0===this._needUpdateDataADMap[t+"_$_descendant"])||[];pt([e],t).forEach(function(e){var t=n.indexOf(e);-1<t&&n.splice(t,1),n.push(e)})},this),n.forEach(this._doUpdateDataRenderer,this),this._needUpdateDataADMap={}},_addNeedUpdateData:function(e,t,n){!0!==this._update_all_data_&&(this._needUpdateDataArray.push(e),e=e.id(),this._needUpdateDataADMap[e+"_$_ancestor"]=this._needUpdateDataADMap[e+"_$_ancestor"]||!1!==t,this._needUpdateDataADMap[e+"_$_descendant"]=this._needUpdateDataADMap[e+"_$_descendant"]||!1!==n)},_getDataRelatedDataArray:function(e,t,n){},getLabel:function(e){return e.getProperty(this.getProperty("label_field"))},getInfo:function(e){return e.getProperty(this.getProperty("info_field"))},_onDataAdd:function(e){this._addNeedUpdateData(e),this._addDataRenderer(e),y.superClass._onDataAdd.apply(this,arguments)},_onDataRemove:function(e){this._addNeedUpdateData(e),this._removeDataRenderer(e),y.superClass._onDataRemove.apply(this,arguments)},_onDataClear:function(){this._updateAllDataVar(),this._clearDataRendererImpl(),y.superClass._onDataClear.apply(this,arguments)},_onDataChange:function(e,t){this._addNeedUpdateData(e),this._updateDataRenderer(e,t),y.superClass._onDataChange.apply(this,arguments)},_onDataIndexChange:function(e){this._addNeedUpdateData(e);var t=this._rendererArrayMap.get(e.id());t&&this._updateDataRendererImpl(e,t,!0),y.superClass._onDataIndexChange.apply(this,arguments)}},_(),h())),Ge(Ze,y,{___zdefaults_:{sort_compare:null},update:function(){this.getProperty("sort_compare")&&this._reorderAllDataRenderer(),Ze.superClass.update.apply(this,arguments)},_onViewChange:function(e,t,n){"sort_compare"===e&&this._reorderAllDataRenderer(),Ze.superClass._onViewChange.apply(this,arguments)},_onViewUpdate:function(){Ze.superClass._onViewUpdate.apply(this,arguments),this._updateRendererVIndex()},_updateRendererVIndex:function(){Wt(".item:not(.hidden)",this.getRendererRootContainer()).forEach(function(e,t){e.setAttribute("v_index",t),e.setAttribute("v_index_oe",t%2==0?"odd":"even")})},getRendererRootContainer:function(){return this.getRoot()},getRendererContainer:function(e){return this.getRoot()},_getSortDataArray:function(e){var t=this.getProperty("sort_compare");return ut(t)?e.slice().sort(t):e},_removeDataRendererImpl:function(e,t){_n(t.getRenderer())},_clearDataRendererImpl:function(){pn(this.getRendererRootContainer())},getDataRendererElement:function(e){e=this.getDataRenderer(e);return e?e.getRenderer():null},getDataAt:function(e){var t,e=bn.getEventTarget(e,"[__z_did_]");return e?(t=e.getAttribute("__z_did_"),yt(this.getDataArray(!1),function(e){return e.id()===t})):null},makeVisible:function(e){var t;!e||(t=this.getDataRendererElement(e))&&Rt(function(){un.scrollIntoView(t,this._getScrollView())},this)},_getScrollView:function(){return this.getRoot()}}),Ge(v,A,{update:function(){var e=this._isRendererVisible(this._view,this._data);this._visible!==e&&(this._visible=e,this.onVisibleChange(e)),this._renderConfig={},!0===this._visible&&(this.updateRenderConfig(this._view,this._data,this._renderConfig),this.updateRenderer(this._view,this._data,this._renderConfig))},_isRendererVisible:function(e,t){return e._isVisible(t)},onVisibleChange:function(e){},updateRenderConfig:function(e,t,n){var r;!1===e.getDataViewProperty(t,"label_visible")||null!=(r=e.getLabel(t))&&(n.label_visible=!0,n.label=r,n.label_font=e.getDataViewProperty(t,"label_font"),n.label_color=e.getDataViewProperty(t,"label_color")),!1!==e.getDataViewProperty(t,"info_visible")&&null!=(r=e.getInfo(t))&&(n.info_visible=!0,n.info=r,n.info_font=e.getDataViewProperty(t,"info_font"),n.info_color=e.getDataViewProperty(t,"info_color")),n.selected=e.isSelected(t),n.disabled=e._isDisabled(t)},updateRenderer:function(e,t,n){this.updateRendererStatus()},updateRendererStatus:function(e,t,n){},getRenderConfig:function(e){return this._renderConfig[e]},getViewRenderConfig:function(e){return this._view.getProperty(e)},updateData:function(){this._view._updateData(this._data)},dispose:function(){}}),Ge(Qe,v,{getRenderer:function(){return this._renderer},updateRenderConfig:function(e,t,n){Qe.superClass.updateRenderConfig.apply(this,arguments);e=e.getDataRenderProperty(t,"icon");e&&(n.icon=e)},updateRendererStatus:function(e,t,n){Qe.superClass.updateRendererStatus.apply(this,arguments),Yt(this._renderer,"disabled",!0===this.getRenderConfig("disabled")),Yt(this._renderer,"selected",!0===this.getRenderConfig("selected"))},onVisibleChange:function(e){Yt(this._renderer,"hidden",!1===e),!1===e?(He(this._renderer,"display","none"),pn(this._renderer)):(He(this._renderer,"display",""),this.reBuildRenderer())},reBuildRenderer:function(){}}),Ge(et,A,{addViewListener:function(e){this._addListener(this._controllerRoot,"view",e)},removeViewListener:function(e){this._removeListener(this._controllerRoot,"view",e)},addWindowListener:function(e){this._addListener(l,"window",e)},removeWindowListener:function(e){this._removeListener(l,"window",e)},add:function(e){this._view=e,this._controllerRoot=e._getControllerRoot(),(this.getViewDefaultTypes()||[]).forEach(this.addViewListener,this),(this.getWindowDefaultTypes()||[]).forEach(this.addWindowListener,this)},remove:function(){(this.getViewDefaultTypes()||[]).forEach(this.removeViewListener,this),(this.getWindowDefaultTypes()||[]).forEach(this.addWindowListener,this),this._view=null,this._controllerRoot=null,this._typeMap={}},update:function(){},getViewDefaultTypes:function(){},getWindowDefaultTypes:function(){},getView:function(){return this._view},getViewRoot:function(){return this._controllerRoot},getViewProperty:function(e){return this._view.getProperty(e)},_addListener:function(e,t,n){var r,i,t=this._getHandlerName(t,n);this._typeMap.hasOwnProperty(t)||((r=this[t])?(this._typeMap[t]=i=function(e){r.apply(this,[e,this.getView()])},wn(e,n,i,this)):console.error(t+" is null"))},_removeListener:function(e,t,n){var r,t=this._getHandlerName(t,n);this._typeMap.hasOwnProperty(t)&&(r=this._typeMap[t],Rn(this._controllerRoot,n,r,this),delete this._typeMap[t])},_getHandlerName:function(e,t){var n;return"window"===e?n="handle_window_"+t:"view"===e&&(n="handle_"+t),n}}),Ue(tt.$,{iview:{IViewController:et,Data:rr,DataParser:or,IModel:n,IAttachProvider:ir,IProvider:r,Provider:qe,ArgsUtil:de,DataLevelUtil:Qn,HTMLDataParser:er,JSONDataParser:tr,ModelTypeCheck:Jn,IDataElementRendererView:Ze,IDataRendererView:y,IDataView:Ye,IView:Je,CheckInterface:$e,ControllerInterface:i,ExpandInterface:Xe,HoverInterface:Ke,ModelInterface:o,MoveInterface:a,OnResizeInterface:d,RendererViewInterface:h,SelectInterface:_,VisibleInterface:g,IDataElementRenderer:Qe,IDataRenderer:v}}),tt.Data=rr,tt.Provider=qe,Ue(tt.type,{isData:Yn,isView:En,isProvider:Zn}),Fe({CVS_VIEW_GRID_LINE_VISIBLE:!1,CVS_VIEW_GRID_LINE_SPACE:50,CVS_VIEW_GRID_LINE_STROKE:"#e6e6e6",CVS_VIEW_GRID_LINE_STROKE_LINE_WIDTH:.6,CVS_VIEW_GRID_LINE_AXIS_STROKE_LINE_WIDTH:1.2,CVS_VIEW_LINE_CAP:null,CVS_VIEW_LINE_JOIN:null,CVS_VIEW_ZOOM_FACTOR:1.05,CVS_VIEW_MAX_ZOOM:20,CVS_VIEW_MIN_ZOOM:.2}),{drawGridLine:function(e,t){var n,r,i,o;!0!==e.getProperty("grid_line_visible")||(n=e.getProperty("grid_line_stroke"))&&(o=ar._calcLinePoints(e),r=o.line,i=o.axis,o={lineWidth:e.getProperty("grid_line_stroke_line_width"),lineDash:e.getProperty("grid_line_stroke_line_dash")},0<r.length&&Un(t,o,function(){jn.render(t,r,{stroke:n})}),0<i.length&&(o.lineWidth=e.getProperty("grid_line_axis_stroke_line_width"),Un(t,o,function(){jn.render(t,i,{stroke:n})})))},_calcLinePoints:function(e){var d=e.getRootSize(),t=e.getProperty("zoom"),n=e.getProperty("grid_line_space")*t,r=d.width*E,i=d.height*E,h=lt(i/n)+2,u=lt(r/n)+2,o=e.getProperty("translate_x"),a=e.getProperty("translate_y"),_=ot(lt(a/n))+1,p=ot(lt(o/n))+1,t=[],s=[];if(0<=a&&a<=i&&(t.push({x:0,y:a}),t.push({x:r,y:a,seg:"mt"})),0<=o&&o<=r&&(t.push({x:o,y:0}),t.push({x:o,y:i,seg:"mt"})),0<a)for(var l=1;l<_;l++){var c=a-n*l;0<=c&&(s.push({x:0,y:c}),s.push({x:r,y:c,seg:"mt"}))}else h+=_;for(var f=1;f<h;f++){var g=a+n*f;g<=i&&(s.push({x:0,y:g}),s.push({x:r,y:g,seg:"mt"}))}if(0<o)for(var y=1;y<p;y++){var v=o-n*y;0<=v&&(s.push({x:v,y:0}),s.push({x:v,y:i,seg:"mt"}))}else u+=p;for(var C=1;C<u;C++){var m=o+n*C;m<=r&&(s.push({x:m,y:0}),s.push({x:m,y:i,seg:"mt"}))}return{axis:t,line:s}}}),sr=function(e){return Ne(e)&&e.hasOwnProperty("x")&&e.hasOwnProperty("y")},lr={setCursor:function(e,t){He(e.getViewRoot(),"cursor",t||"default")},isInteractBodyOnly:function(e){return"body"===e.getProperty("interact_bounds")}},cr=(Ge(x,et,{getViewDefaultTypes:function(){return["mousemove","mouseleave"]},handle_mousemove:function(e,t){var n;if(!(0<e.buttons)&&!0===t.getProperty("hoverable"))return(n=t.getDataAt(e,lr.isInteractBodyOnly(t)))&&!t._isDisabled(n)&&t._isHoverable(n)?(t._setHoverData(n,!0,e),void(!0===t.getProperty("select_on_hover")&&t.isSelectable(n)&&(t.isSelected(n)||t.setSelect(n)))):void t._setHoverData(null,!0,e)},handle_mouseleave:function(e,t){t._setHoverData(null,!0,e)}}),Ge(P,v,{updateRenderConfig:function(e,t,n){P.superClass.updateRenderConfig.apply(this,arguments),this.updateHoverConfig(e,t,n)},updateHoverConfig:function(e,t,n){var r=e.isHover(t);!0===(n.hover=r)&&(n.hover_style=e.getDataViewProperty(t,"hover_style"))},draw:function(e){!0===this._visible&&this._doDraw(e)},_doDraw:function(e,t){!1!==this._doCustomDraw(e,t)&&this.doDraw(e,t)},_doCustomDraw:function(e,t){var n=this._data.draw;return!n||!1!==n.apply(this._data,[e,this._data,this._view,t,this])},doDraw:function(e,t){},hits:function(e,t){var n=at((0|this.getViewRenderConfig("hit_padding"))/at(1,this._view.get("zoom")),.5),e={x:e.x-n,y:e.y-n,width:2*n,height:2*n},r=this;return Wn.isDrawRectOpaque(function(e){r._hitsDraw(e,t)},e)},_hitsDraw:function(e,t){return this._doDraw(e,t)},contained:function(e,t){t=this.getBounds(t);return!!t&&Be.containsRect(e,t)},getBounds:function(e){}}),Ge(R,y,Ue({___zdefaults_:{onresize:!0,hoverable:!1,select_on_hover:!1,translate_x:0,translate_y:0,zoom:1,zoom_factor:ze("CVS_VIEW_ZOOM_FACTOR"),max_zoom:ze("CVS_VIEW_MAX_ZOOM"),min_zoom:ze("CVS_VIEW_MIN_ZOOM"),grid_line_visible:ze("CVS_VIEW_GRID_LINE_VISIBLE"),grid_line_space:ze("CVS_VIEW_GRID_LINE_SPACE"),grid_line_stroke:ze("CVS_VIEW_GRID_LINE_STROKE"),grid_line_stroke_line_width:ze("CVS_VIEW_GRID_LINE_STROKE_LINE_WIDTH"),grid_line_axis_stroke_line_width:ze("CVS_VIEW_GRID_LINE_AXIS_STROKE_LINE_WIDTH"),line_cap:ze("CVS_VIEW_LINE_CAP"),line_join:ze("CVS_VIEW_LINE_JOIN"),interact_bounds:"body"},_initCanvasView:function(){this._canvasArray=[],this._dataCanvas=We("canvas"),this._dataC2d=this._dataCanvas.getContext("2d",{willReadFrequently:!0})},_doUpdate:function(){R.superClass._doUpdate.apply(this,arguments),this.draw()},_doResizeUpdate:function(){R.superClass._doResizeUpdate.apply(this,arguments),this._resizeCanvas(),this.draw()},_resizeCanvas:function(){var e=this.getRootSize(),t=e.width,n=e.height,r=t*E,i=n*E;this._canvasArray.forEach(function(e){He(e,"width",t+"px"),He(e,"height",n+"px"),e.setAttribute("width",r),e.setAttribute("height",i)},this)},_appendCanvas:function(e){He(e,"position","absolute"),He(e,"left","0"),He(e,"top","0"),this._canvasArray.push(e),this.getRoot().appendChild(e)},_removeCanvas:function(e){vt(this._canvasArray,e),_n(e)}},{getDataAt:function(e,t){!1!==t&&(t=!0);var n=this.getTransformedPoint(e);return null==n?null:yt(this._getDrawDataReverseArray(),function(e){e=this.getDataRenderer(e);if(e&&e.hits(n,t))return!0},this)},getDataArrayAt:function(e,t){!1!==t&&(t=!0);var n=this.getTransformedPoint(e);return null==n?null:gt(this._getDrawDataReverseArray(),function(e){e=this.getDataRenderer(e);if(e&&e.hits(n,t))return!0},this)},getDataArrayAtRect:function(e,t){if(null==e)return[];!1!==t&&(t=!0);var n=this.getTransformedRect(e);return gt(this._getDrawDataReverseArray(),function(e){e=this.getDataRenderer(e);if(e&&e.contained(n,t))return!0},this)}},{draw:function(){var e=this._dataC2d,t=(zn.ctxClear(e,this._dataCanvas.width,this._dataCanvas.height),this._improveDrawPerf(),e.save(),E);1!==t&&e.scale(t,t),ar.drawGridLine(this,e),this._setTransform(e,t),this._drawData(e),e.restore()},_setTransform:function(e,t){var n=this.getProperty("translate_x")*t,r=this.getProperty("translate_y")*t,t=this.get("zoom")*t;0==n&&0==r&&1==t||e.setTransform(t,0,0,t,n,r)},_improveDrawPerf:function(){var e=this._dataC2d,t=this.getProperty("label_font")||Kn.getSystemFont();e.font!==t&&(e.font=t),e.textAlign="center",e.textBaseline="middle",e.lineCap=this.getProperty("line_cap"),e.lineJoin=this.getProperty("line_join")},_drawData:function(t){var e=this.getDrawDataArray(this.getDataArray(!1));e.forEach(function(e){this._rendererDraw(t,e)},this),this._draw_data_reverse_array=(e||[]).reverse()},_rendererDraw:function(e,t){t=this.getDataRenderer(t);t&&t.draw(e)},getDrawDataArray:function(e){return e},_getDrawDataReverseArray:function(){return this._draw_data_reverse_array||[]}},C(),a(),b(),Ke(R))),Ue(tt.$,{cvs_view:{CVSControllerUtil:lr,CVSHoverController:x,ControllerCanvasInterface:b,TransformInterface:C,IDataCanvasRenderer:P,IDataCanvasRendererView:R}}),function(h){Fe({WIDGET_MESSAGEBOX_CONFIRM_CLASS:"z-button primary",WIDGET_MESSAGEBOX_CONFIRM_TEXT:"OK",WIDGET_MESSAGEBOX_CANCEL_CLASS:"z-button",WIDGET_MESSAGEBOX_CANCEL_TEXT:"Cancel",WIDGET_NOTIFICATION_DURATION:0,WIDGET_NOTIFICATION_POSITION:"top_right",WIDGET_PAGINATION_LAYOUT:"sizes,pager,total,refresh",WIDGET_PAGINATION_PAGE_SIZES:[20,50,100],WIDGET_PAGINATION_PAGE_SIZE:20,WIDGET_PAGINATION_TOTAL_TEMPLATE:"<%start%>-<%end%> | <%total%>",WIDGET_PAGINATION_PAGER_COUNT:7,WIDGET_MODAL_OPEN_ANIMATION:"z-animation-fadeInDown",WIDGET_MODAL_CLOSE_ANIMATION:"z-animation-fadeOutUp"});function e(e){return Ue({checkbox_visible:!1,checkbox_unchecked_icon_template:r.checkbox_unchecked,checkbox_checked_icon_template:r.checkbox_checked,checkbox_indeterminate_icon_template:r.checkbox_indeterminate,three_states_check:!0,check_on_click:!1},e)}function t(e){return Ue({expand_icon_visible:!0,expand_collapsed_icon_template:r.expand_collapsed,expand_expanded_icon_template:r.expand_expanded,expand_on_click:!1,expand_on_dbl_click:!1,accordion:!1},e)}function n(e){return Ue({sortable:!1,sort_mode:"single",multiple_sort_modifier_key:null,sort_orders:["asc","desc",null],sort_asc_icon_template:r.sort_asc,sort_desc_icon_template:r.sort_desc},e)}function u(e){return Ue({minimize_icon_template:O,minimize_width:20,minimize_label:"..."},e)}function _(e){return{setCurrentContent:function(e,t){!0===t&&a.releaseContent(this._currentContentObj),this._currentContentObj=e,this._currentContentObj&&(this.appendContent(this._currentContentObj),this._showContent(this._currentContentObj))},appendContent:function(e,t){e&&(!0===t&&a.hideContent(e),t=e.contentEle,e=this.getContentContainer(),t.parentNode!==e&&e.appendChild(t))},_showContent:function(e){e&&!1!==this.beforeShowContent(e)&&a.showContent(e)},beforeShowContent:function(e){},_hideContent:function(e){e&&!1!==this.beforeHideContent(e)&&a.hideContent(e)},beforeHideContent:function(e){}}}function p(e){return Ue({_getDataContentArrayMap:function(){return this._dataContentArrayMap||(this._dataContentArrayMap=new je),this._dataContentArrayMap},isDataContentAdded:function(e){return this._getDataContentArrayMap().hasOwnProperty(e.id())},setCurrentDataContent:function(e){var n=e.id();this._getDataContentArrayMap().eachObject(function(e,t){e!==n&&this._hideContent(t)},this),this._getDataContentArrayMap().has(n)||this.addDataContent(e),e=this._getDataContentArrayMap().get(n),this.setCurrentContent(e)},addDataContent:function(e){var t=a.getContentObject(e.getProperty("content")),e=e.id();return t&&(t._id=e),this._getDataContentArrayMap().add(e,t),this.appendContent(t,!0),t},removeDataContent:function(e){var e=e.id(),t=this._getDataContentArrayMap().get(e);this._getDataContentArrayMap().remove(e),a.releaseContent(t),t===this._currentContentObj&&(this._currentContentObj=null)},clearDataContent:function(){this._currentContentObj=null,this._getDataContentArrayMap().eachArray(a.releaseContent),this._getDataContentArrayMap().clear()},getDataContent:function(e){return this._getDataContentArrayMap()[e.id()]}},_())}function y(r){return Ue({_isTreeStatesCheck:function(){return!1!==this.getProperty("three_states_check")},_isCheckedByDefault:function(e){return this._checkProvider.contains.apply(this._checkProvider,arguments)},_onCheckAddByDefault:function(e){this._addCheckNeedUpdateData(e),this._callOn("onCheckAdd","on.check.add",e,[e])},_onCheckRemoveByDefault:function(e){this._addCheckNeedUpdateData(e),this._callOn("onCheckRemove","on.check.remove",e,[e])},_onCheckSetByDefault:function(e){e.forEach(this._addCheckNeedUpdateData,this),this._callOn("onCheckSet","on.check.set",e,[e])},_isAllChildrenOrDataChecked:function(e){var t=Qn.getAddedChildren(this.getProvider(),e);if(0===t.length)return this._isCheckedByDefault(e);var n=!0;return ft(t,function(e){if(!this._isAllChildrenOrDataChecked(e))return n=!1},this),n},_hasChildrenChecked:function(e){var e=Qn.getAddedChildren(this.getProvider(),e),t=!1;return ft(e,function(e){if(!0===this._hasChildrenCheckedImpl(e))return!(t=!0)},this),t},_hasChildrenCheckedImpl:function(e){var t=Qn.getAddedChildren(this.getProvider(),e);if(0===t.length)return this._isCheckedByDefault(e);var n=!1;return ft(t,function(e){if(!0===this._hasChildrenCheckedImpl(e))return!(n=!0)},this),n},_addDescendantCheck:function(e){e=Qn.getAddedDescendantArray(this.getProvider(),e);0!==e.length&&(this._isUpdatingRelatedDataCheck=!0,e.forEach(function(e){this._isCheckedByDefault(e)||this.addCheck(e)},this),this._isUpdatingRelatedDataCheck=!1)},_addAncestorCheck:function(e){this._isUpdatingRelatedDataCheck=!0,ft(Qn.getAncestorArray(e),function(e){if(this._isCheckedByDefault(e)||!this._isAllChildrenOrDataChecked(e))return!1;this.addCheck(e)},this),this._isUpdatingRelatedDataCheck=!1},_removeAncestorCheck:function(e){this._isUpdatingRelatedDataCheck=!0,ft(Qn.getAncestorArray(e),function(e){if(!this._isCheckedByDefault(e))return!1;this.removeCheck(e)},this),this._isUpdatingRelatedDataCheck=!1},_removeDescendantCheck:function(e){e=Qn.getAddedDescendantArray(this.getProvider(),e);0!==e.length&&(this._isUpdatingRelatedDataCheck=!0,e.forEach(function(e){this._isCheckedByDefault(e)&&this.removeCheck(e)},this),this._isUpdatingRelatedDataCheck=!1)},_onDataAdd:function(e){r.superClass._onDataAdd.apply(this,arguments),this._isTreeStatesCheck()&&this._updateParentCheck(e.getProperty("parent"))},_onDataRemove:function(e){r.superClass._onDataRemove.apply(this,arguments),this._isTreeStatesCheck()&&this._updateParentCheck(e.getProperty("parent"))},_onDataChange:function(e,t){var n;r.superClass._onDataChange.apply(this,arguments),this._isTreeStatesCheck()&&"parent"===t.property&&(n=t.old_value,t=t.new_value,this._updateParentCheck(n),this._updateParentCheck(t))},_updateParentCheck:function(e){e&&(this._isCheckedByDefault(e)?this._isAllChildrenOrDataChecked(e)||this.removeCheck(e):this._isAllChildrenOrDataChecked(e)&&this.addCheck(e))}},$e(),{isChecked:function(e){return this._isTreeStatesCheck()?this._isAllChildrenOrDataChecked(e):this._isCheckedByDefault(e)},_onCheckAdd:function(e){this._isTreeStatesCheck()&&!0!==this._isUpdatingRelatedDataCheck&&(this._addAncestorCheck(e),this._addDescendantCheck(e)),this._onCheckAddByDefault(e)},_onCheckRemove:function(e){this._isTreeStatesCheck()&&!0!==this._isUpdatingRelatedDataCheck&&(this._removeAncestorCheck(e),this._removeDescendantCheck(e)),this._onCheckRemoveByDefault(e)},_onCheckSet:function(e){this._isTreeStatesCheck()&&!0!==this._isUpdatingRelatedDataCheck&&(e.forEach(this._addAncestorCheck,this),e.forEach(this._addDescendantCheck,this)),this._onCheckSetByDefault(e)}})}function v(e){return{_initAllDataRenderer:function(){return M.initAllDataRenderer(this)},_reorderAllDataRenderer:function(){return M.reorderAllDataRenderer(this)},_addDataRendererImpl:function(e,t){return M.insertElementRenderer(this,e,t)},_updateDataRendererImpl:function(e,t,n){if(this.getProperty("sort_compare"))return M.insertElementRenderer(this,e,t)}}}function C(n){return{getRendererContainer:function(e){var t=e.getProperty("parent");return t?this.getDataRenderer(t).getChildrenRendererContainer(e):n.superClass.getRendererContainer.apply(this,arguments)},_initAllDataRenderer:function(){return s.initAllDataRenderer(this)},_reorderAllDataRenderer:function(){return s.reorderAllDataRenderer(this)},_addDataRenderer:function(e){if(Qn.isAncestorAdded(this.getProvider(),e))return n.superClass._addDataRenderer.apply(this,arguments)},_addDataRendererImpl:function(e,t){return s.insertElementRenderer(this,e,t,!0)},_updateDataRenderer:function(e){if(Qn.isAncestorAdded(this.getProvider(),e)){if(this.getDataRenderer(e))return n.superClass._updateDataRenderer.apply(this,arguments);var t=this.createDataRenderer(e);t&&(this._rendererArrayMap.add(e.id(),t),s.insertElementRenderer(this,e,t,!0))}else s.removeDataRenderer(e)},_updateDataRendererImpl:function(e,t,n){if(!0===n||this.getProperty("sort_compare"))return s.insertElementRenderer(this,e,t)},expandAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=gt(t,this._isLevelVisible,this)),this._expandProvider.set(this._filterExpandableData(t))},_getDataLevel:function(e){var t=this.getProperty("root_data"),n=0,r=e.getProperty("parent");if(t){for(n++;r&&r!==t;)n++,r=r.getProperty("parent");if(r!==t)return-1}else for(;r;)n++,r=r.getProperty("parent");return n},hasChildrenVisible:function(e){return z.hasChildrenVisible(this,e)},_isLevelVisible:function(e){return!1!==this.isVisible(e)&&(!1!==this._isFilterVisible(e)||this._hasDescendantVisible(e))},_hasDescendantVisible:function(e){var e=Qn.getAddedDescendantArray(this.getProvider(),e),t=!1;return ft(e,function(e){if(this._isLevelVisible(e))return!(t=!0)},this),t},_isVisible:function(e){return!1!==this._isLevelVisible(e)&&!(!0===this._isExpand_&&!this._isDataAncestorExpanded(e))},_getDataRelatedDataArray:function(e,t,n){t=t?Qn.getAncestorArray(e):[],n=n?Qn.getAddedDescendantArray(this.getProvider(),e):[];return pt(n,t)},_isVisibleByRootData:function(e){var t=this.getProperty("root_data");return!t||(t===e||(0<=Qn.getAncestorArray(t).indexOf(e)||0<=Qn.getAddedDescendantArray(this.getProvider(),t).indexOf(e)))},_isBodyVisibleByRootData:function(e){var t=this.getProperty("root_data");return!(t&&0<=Qn.getAncestorArray(t).indexOf(e))},_isRootData:function(e){var t=this.getProperty("root_data");return!!t&&t===e}}}function m(n){var e=C(n);return delete e.getRendererContainer,Ue(e,{_addDataRendererImpl:function(e,t){return B.insertElementRenderer(this,e,t,!0)},_updateDataRenderer:function(e){if(Qn.isAncestorAdded(this.getProvider(),e)){if(this.getDataRenderer(e))return n.superClass._updateDataRenderer.apply(this,arguments);var t=this.createDataRenderer(e);t&&(this._rendererArrayMap.add(e.id(),t),B.insertElementRenderer(this,e,t,!0))}else s.removeDataRenderer(e)},_updateDataRendererImpl:function(e,t,n){!0!==n&&!this.getProperty("sort_compare")||B.updateDataRenderer(this,e,t)},_isVisibleByRootData:function(e){var t=this.getProperty("root_data");return!t||(t===e||0<=Qn.getAddedDescendantArray(this.getProvider(),t).indexOf(e))}})}function b(){b.superClass.constructor.apply(this,arguments),I.addWidgetClass(this.getRoot()),this.addController(new U),this.addController(new G)}function x(){x.superClass.constructor.apply(this,arguments)}function P(){this._rootUL=We("ul","items"),P.superClass.constructor.apply(this,arguments),this.getRoot().appendChild(this._rootUL)}function w(){w.superClass.constructor.apply(this,arguments)}function R(){R.superClass.constructor.apply(this,arguments)}function D(){this._table=We("table","table"),this._table.setAttribute("cellspacing","0"),this._tableColGroup=We("colgroup"),this._table.appendChild(this._tableColGroup),D.superClass.constructor.apply(this,arguments),this.getRoot().appendChild(this._table)}function A(){this._tableHead=We("thead"),this._rowTRArray=[],A.superClass.constructor.apply(this,arguments),this._table.appendChild(this._tableHead),this.setControllers([new j]),Xt(this.getRoot(),"z-thead")}var k="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='15 18 9 12 15 6'></polyline></svg></span>",L="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='9 18 15 12 9 6'></polyline></svg></span>",S="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='18 15 12 9 6 15'></polyline></svg></span>",E="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'></polyline></svg></span>",T="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='1'></circle><circle cx='19' cy='12' r='1'></circle><circle cx='5' cy='12' r='1'></circle></svg></span>",V="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='12' y1='2' x2='12' y2='6'></line><line x1='12' y1='18' x2='12' y2='22'></line><line x1='4.93' y1='4.93' x2='7.76' y2='7.76'></line><line x1='16.24' y1='16.24' x2='19.07' y2='19.07'></line><line x1='2' y1='12' x2='6' y2='12'></line><line x1='18' y1='12' x2='22' y2='12'></line><line x1='4.93' y1='19.07' x2='7.76' y2='16.24'></line><line x1='16.24' y1='7.76' x2='19.07' y2='4.93'></line></svg></span>",O="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='5' y1='12' x2='19' y2='12'></line></svg></span>",r={remove:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='18' y1='6' x2='6' y2='18'></line><line x1='6' y1='6' x2='18' y2='18'></line></svg></span>",refresh:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='1 4 1 10 7 10'></polyline><polyline points='23 20 23 14 17 14'></polyline><path d='M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15'></path></svg></span>",expand_collapsed:L,expand_expanded:E,checkbox_unchecked:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='3' y='3' width='18' height='18' rx='2' ry='2'></rect></svg></span>",checkbox_checked:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='20 6 9 17 4 12'></polyline></svg></span>",checkbox_indeterminate:O,sort_asc:S,sort_desc:E,pagination_to_prev:k,pagination_to_next:L,pagination_to_prev_more:T,pagination_to_next_more:T,tabs_scroll_to_left_arrow:k,tabs_scroll_to_right_arrow:L,tabs_scroll_to_up_arrow:S,tabs_scroll_to_down_arrow:E,notify_success:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><path d='M22 11.08V12a10 10 0 1 1-5.93-9.14'></path><polyline points='22 4 12 14.01 9 11.01'></polyline></svg></span>",notify_info:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><line x1='12' y1='16' x2='12' y2='12'></line><line x1='12' y1='8' x2='12' y2='8'></line></svg></span>",notify_warning:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><line x1='12' y1='8' x2='12' y2='12'></line><line x1='12' y1='16' x2='12' y2='16'></line></svg></span>",notify_error:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><line x1='15' y1='9' x2='9' y2='15'></line><line x1='9' y1='9' x2='15' y2='15'></line></svg></span>"},a={getContentInfo:function(e){var t,n;return e?(ht(e)?n=e.startsWith("url:")?(t="url",e.substr(4)):e.startsWith("element:")?(t="element",e.substr(8)):(t="string",e):sn.isElement(e)?(t="element",n=e):Ne(e)&&(t=e.type,n=e.content),{type:t,content:n}):null},getContentElement:function(e){e=a.getContentInfo(e);if(e&&"element"===e.type){e=e.content;if(e)return Ft(e)}return null},getLabelContent:function(e){return Ne(e)?e:{content:null==e?"":e+""}},getContentObject:function(e){e=a.getContentInfo(e);if(e){var t,n,r=e.type,e=e.content;if(e)if("string"===r?(n=We("div","text-content")).innerHTML=e:"element"===r?(n=Ft(e))&&(t=n._z_$_init_parentNode||n.parentNode,t={parent:n._z_$_init_parentNode=t,display:en(n,"display")}):"url"===r&&(n=a.createContentIFrame(e)),n)return{type:r,contentEle:n,contentReleaseConfig:t}}return null},createContentIFrame:function(e){var t=We("iframe");return t.src=e,t},releaseContent:function(e){var t,n;e&&(t=e.contentReleaseConfig,e=e.contentEle,_n(e),t&&((n=t.parent)&&n.appendChild(e),delete e._z_$_init_parentNode,He(e,"display",t.display)))},showContent:function(e){var t;e&&(e.vislbe=!0,t=e.type,e=e.contentEle,"string"===t||"element"===t?He(e,"display","block"):"url"===t&&(tn(e,"visibility"),tn(e,"opacity"),tn(e,"width"),tn(e,"height")))},hideContent:function(e){var t;e&&(e.vislbe=!1,t=e.type,e=e.contentEle,"string"===t||"element"===t?He(e,"display","none"):"url"===t&&(He(e,"visibility","hidden"),He(e,"opacity",0),He(e,"width",0),He(e,"height",0)))}},I={addWidgetClass:function(e){Xt(e,"z-widget"),e.setAttribute("tabindex",-1)},isEvtInRendererNode:function(e){for(var t=e.target;t&&t!==nt;){if("node"===t.getAttribute("role"))return!0;t=t.parentNode}return!1},preventDefault:function(e){e.preventDefault()},findNextUsableDataByDom:function(e,t){var n=Wt("[__z_did_]",e.getRendererRootContainer());if(0<n.length){if(t){var r=gt(n,function(e){return e.parentNode===t.parentNode});if(r=I._findNextUsableDataByArray(e,r,t))return r}r=I._findNextUsableDataByArray(e,n,t)}return r},_findNextUsableDataByArray:function(e,t,n){var r,i=t.length;if(0<i){for(var o=-1,a=(o=n?t.indexOf(n):-1)+1;a<i;a++)if(r=I._isRenderDataUsable(e,t[a]))return r;for(var s=o-1;0<=s;s--)if(r=I._isRenderDataUsable(e,t[s]))return r}},_isRenderDataUsable:function(e,t){var n=t.getAttribute("__z_did_"),t=yt(e.getDataArray(!1),function(e){return e.id()===n});if(t&&e.isVisible(t)&&!e._isDisabled(t)&&e.isSelectable(t))return t}},M={initAllDataRenderer:function(n){n._getSortDataArray(n.getDataArray(!1)).forEach(function(e){var t=n.createDataRenderer(e);t&&(n._rendererArrayMap.add(e.id(),t),(t=t.getRenderer())&&n.getRendererContainer(e).appendChild(t))})},reorderAllDataRenderer:function(n){n._getSortDataArray(n.getDataArray(!1)).forEach(function(e){var t=n.getDataRenderer(e);!t||(t=t.getRenderer())&&n.getRendererContainer(e).appendChild(t)})},insertElementRenderer:function(e,t,n){for(var r,i,o=e._getSortDataArray(e.getDataArray(!1)),a=o.indexOf(t),s=o.length,l=a+1;l<s;l++)if((r=e.getDataRenderer(o[l]))&&(i=r.getRenderer()))return void i.parentNode.insertBefore(n.getRenderer(),i);e.getRendererContainer(t).appendChild(n.getRenderer())}},s={initAllDataRenderer:function(t){t._getSortDataArray(t.getProvider().toRootArray(!1)).forEach(function(e){s.appendDataRenderer(t,e)})},appendDataRenderer:function(e,t){var n=e.createDataRenderer(t);n&&(e._rendererArrayMap.add(t.id(),n),(n=n.getRenderer())&&(e.getRendererContainer(t).appendChild(n),s.appendDataChildrenRenderer(e,t)))},appendDataChildrenRenderer:function(t,e){e=gt(e.getChildren(!1),t.containsData,t);0<e.length&&(e=t._getSortDataArray(e)).forEach(function(e){s.appendDataRenderer(t,e)})},reorderAllDataRenderer:function(t){t._getSortDataArray(t.getProvider().toRootArray(!1)).forEach(function(e){s.reAppendDataRenderer(t,e)})},reAppendDataRenderer:function(e,t){var n=e.getDataRenderer(t);!n||(n=n.getRenderer())&&(e.getRendererContainer(t).appendChild(n),s.reAppendDataChildrenRenderer(e,t))},reAppendDataChildrenRenderer:function(t,e){e=gt(e.getChildren(!1),t.containsData,t);0<e.length&&(e=t._getSortDataArray(e)).forEach(function(e){s.reAppendDataRenderer(t,e)})},insertElementRenderer:function(e,t,n,r){var i=e._getSortDataArray(Qn.getAddedSiblingArray(e.getProvider(),t)),o=i.indexOf(t),i=i[o+1];i?(o=e.getDataRenderer(i).getRenderer()).parentNode.insertBefore(n.getRenderer(),o):e.getRendererContainer(t).appendChild(n.getRenderer()),!0===r&&s.appendDataChildrenRenderer(e,t)},removeDataRenderer:function(e,t){e.getDataRenderer(t)&&(e._removeDataRenderer(t),s.removeDataChildrenRenderer(e,t))},removeDataChildrenRenderer:function(t,e){e=gt(e.getChildren(!1),t.containsData,t);0<e.length&&e.forEach(function(e){s.removeDataRenderer(t,e)})}},B={appendDataChildrenRenderer:function(n,e){e=Qn.getAddedChildren(n.getProvider(),e);0<e.length&&(e=n._getSortDataArray(e)).forEach(function(e){var t=n.createDataRenderer(e);t&&(n._rendererArrayMap.add(e.id(),t),t.getRenderer()&&B.insertElementRenderer(n,e,t,!0))})},insertElementRenderer:function(e,t,n,r){var i=B._getNextData(e,t);i?(i=e.getDataRenderer(i).getRenderer()).parentNode.insertBefore(n.getRenderer(),i):e.getRendererContainer(t).appendChild(n.getRenderer()),!0===r&&B.appendDataChildrenRenderer(e,t)},_getNextData:function(e,t,n){if(!1!==n){n=Qn.getAddedChildren(e.getProvider(),t);if(0<n.length)return e._getSortDataArray(n)[0]}n=e._getSortDataArray(Qn.getAddedSiblingArray(e.getProvider(),t)),n=n[n.indexOf(t)+1];return n||((t=t.getProperty("parent"))?B._getNextData(e,t,!1):void 0)},updateDataRenderer:function(t,e){var n=t.getDataRenderer(e);n&&n.getRenderer()&&(B.insertElementRenderer(t,e,n),0<(n=Qn.getAddedChildren(t.getProvider(),e)).length&&(n=t._getSortDataArray(n)).forEach(function(e){B.updateDataRenderer(t,e)}))}},z={getVisibleChildren:function(t,e){return gt(e.getChildren(!1),function(e){return t.containsData(e)&&t._isLevelVisible(e)})},hasChildrenVisible:function(e,t){return 0<z.getVisibleChildren(e,t).length}},o={initRenderNode:function(e){e._nodeWrapper=We("a","node"),e._nodeWrapper.setAttribute("role","node"),e._inWrapper=We("div","in"),e._nodeWrapper.appendChild(e._inWrapper),e.getRenderer().appendChild(e._nodeWrapper)},updateRenderCheckConfig:function(e,t,n,r){!0===t.getDataViewProperty(n,"checkbox_visible")&&(r.checkbox_visible=!0,r.checked=t.isChecked(n),r.checkable=t.isCheckable(n))},updateRenderLevelCheckConfig:function(e,t,n,r){!0===e.getRenderConfig("checkbox_visible")&&!0!==e.getRenderConfig("checked")&&t._isTreeStatesCheck()&&(r.indeterminate_checked=t._hasChildrenChecked(n))},updateRenderRemoveConfig:function(e,t,n,r){r.remove_icon_visible=!0===t.getDataViewProperty(n,"remove_icon_visible")},updateRenderExpandConfig:function(e,t,n,r){var i=t.hasChildrenVisible(n);(r.has_children=i)&&(r.expanded=t.isExpanded(n),r.expand_icon_visible=!1!==t.getDataViewProperty(n,"expand_icon_visible"),r.expandable=t.isExpandable(n))},updateRendererCheck:function(e,t,n,r){var i;!0===e.getRenderConfig("checkbox_visible")?((i=o._getCheckboxWrapper(e)).innerHTML=o._getCheckboxTemplate(e),e.insertToNodeWrapperFirst(i)):e._checkBoxWrapper&&_n(e._checkBoxWrapper)},_getCheckboxTemplate:function(e){return!0===e.getRenderConfig("checked")?e.getViewRenderConfig("checkbox_checked_icon_template"):!0===e.getRenderConfig("indeterminate_checked")?e.getViewRenderConfig("checkbox_indeterminate_icon_template"):e.getViewRenderConfig("checkbox_unchecked_icon_template")},_getCheckboxClass:function(e){var t=["checkbox"];return!0===e.getRenderConfig("checked")?t.push("checked"):!0===e.getRenderConfig("indeterminate_checked")?t.push("indeterminate"):t.push("unchecked"),!0===e.getRenderConfig("checkable")?t.push("checkable"):t.push("uncheckable"),t.join(" ")},_getCheckboxWrapper:function(e){return e._checkBoxWrapper||(e._checkBoxWrapper=We("span","checkbox"),e._checkBoxWrapper.setAttribute("__z_dop_","check")),e._checkBoxWrapper},updateRendererRemove:function(e,t,n,r){var i;!0===e.getRenderConfig("remove_icon_visible")?(i=o._getRemoveWrapper(e),e.appendToNodeWrapper(i)):e._removeWrapper&&_n(e._removeWrapper)},_getRemoveWrapper:function(e){return e._removeWrapper||(e._removeWrapper=We("span","remove"),e._removeWrapper.innerHTML=e.getViewRenderConfig("remove_icon_template"),e._removeWrapper.setAttribute("__z_dop_","remove")),e._removeWrapper},updateRendererExpand:function(e,t,n,r){var i;!0===e.getRenderConfig("expand_icon_visible")?((i=o._getExpandWrapper(e)).innerHTML=e._getExpandTemplate(),Jt(i,o._getExpandClass(e)),e.insertToNodeWrapperFirst(i)):e._expandWrapper&&_n(e._expandWrapper)},_getExpandTemplate:function(e){return!0===e.getRenderConfig("expanded")?e.getViewRenderConfig("expand_expanded_icon_template"):e.getViewRenderConfig("expand_collapsed_icon_template")},_getExpandClass:function(e){var t=["expand"];return!0===e.getRenderConfig("expanded")?t.push("expanded"):t.push("collapsed"),!0===e.getRenderConfig("expandable")?t.push("expandable"):t.push("unexpandable"),t.join(" ")},_getExpandWrapper:function(e){return e._expandWrapper||(e._expandWrapper=We("span"),e._expandWrapper.setAttribute("__z_dop_","expand")),e._expandWrapper},updateRenderIn:function(e,t,n,r){var i=e._inWrapper,o=(pn(i),t.render);if(ut(o)){if(!1===o.apply(t,[n,i,e._renderer]))return}else{o=e.getRenderConfig("template");if(o)return void(i.innerHTML=Tn(o,n.getProperties(!1)))}t=e.getRenderConfig("icon");t&&((o=We("img")).setAttribute("src",t),i.appendChild(o)),!0===e.getRenderConfig("label_visible")&&((n=We("span","label")).innerHTML=e.getRenderConfig("label"),i.appendChild(n))},updateRenderAttributes:function(n,e,t,r){n._nodeAttributes&&Ct(n._nodeAttributes,function(e,t){o._removeNodeWrapperAttribute(n,e,t)}),n._nodeAttributes=n.getRenderConfig("attributes"),n._nodeAttributes&&Ct(n._nodeAttributes,function(e,t){o._setNodeWrapperAttribute(n,e,t)})},_removeNodeWrapperAttribute:function(e,t,n){e=e.getRenderer();"class"===t?Kt(e,n):e.removeAttribute(t,n)},_setNodeWrapperAttribute:function(e,t,n){e=e.getRenderer();"class"===t?Xt(e,n):e.setAttribute(t,n)}},N={startAnimation:function(e,t,n,r){var i;e&&(t&&e?(xn(e,"animationend",i=function(){n&&n.apply(r),Pn(e,"animationend",i),delete e._animationendListener_$,Kt(e,t)}),e._animationendListener_$=i,Xt(e,t)):n&&n.apply(r))},completeAnimation:function(e){var t;!e||(t=e._animationendListener_$)&&(t(),delete e._animationendListener_$)}},f={VIEW_ATTR_TYPE_MAP:{label_visible:"boolean",expand_icon_visible:"boolean",checkbox_visible:"boolean",remove_icon_visible:"boolean",selectable:"boolean",checkable:"boolean",expandable:"boolean",select_on_hover:"boolean",expand_on_click:"boolean",expand_on_dbl_click:"boolean",make_visible_on_select:"boolean",accordion:"boolean",auto_select:"boolean",three_states_check:"boolean",check_on_click:"boolean",sortable:"boolean"},VIEW_ATTR_METHOD_MAP:{on_data_click:"onDataClick",on_data_dblclick:"onDataDblClick",on_expand:"onExpand",on_collapse:"onCollapse"},VIEW_ATTR_INIT_METHOD_MAP:{init_expand_all:"expandAll"},DATA_ATTR_TYPE_MAP:{visible:"boolean",label_visible:"boolean",expand_icon_visible:"boolean",checkbox_visible:"boolean",remove:"boolean",selectable:"boolean",checkable:"boolean",expandable:"boolean",remove_icon_visible:"boolean",disabled:"boolean"},VIEWS:{"zw-pagination":{level:!1,view:"Pagination"},"zw-grid":{level:!1,view:"Grid",parse:function(e,t,n){var r,i,o,a,s=Wt("tr>th",t),l=[];return 0<s.length&&(r=[],s.forEach(function(e){e=e.parentNode;r.indexOf(e)<0&&r.push(e)}),i=[],r.forEach(function(e){i=pt(i,er.parseToObjectArray(e,!0,n))}),o=i.length,Wt("tr>td",t).forEach(function(e,t){t%o==0&&(a={},er.parseAttributes(e.parentNode,a),l.push(a));t=i[t%o];a[t.field]=e.innerHTML}),ut(n)&&l.forEach(function(e){er._convertItemAttr(e,n)}),e.setColumns(i)),l}},"zw-listview":{level:!1,view:"ListView"},"zw-tree":{level:!0,view:"Tree"},"zw-collapse":{level:!1,view:"Collapse"},"zw-carousel":{level:!1,view:"Carousel"},"zw-tabs":{level:!1,view:"Tabs"}},parse:function(r,i){r=r||{},Ct(f.VIEWS,function(t,e){var n=tt.dom.queryAll(t,i);0!==n.length&&ft(n,function(e){f.parseView(t,e,r)})})},parseView:function(e,t,n){n=n||{};function r(e,t){return f._convertAttrValue(e,t,u,n)}var d,i,o,a,s,e=f.VIEWS[e],h=f.VIEW_ATTR_TYPE_MAP,u=f.DATA_ATTR_TYPE_MAP,_=f.VIEW_ATTR_METHOD_MAP,p=f.VIEW_ATTR_INIT_METHOD_MAP,l=f.parseViewArgs(t,function(e,t){return f._convertAttrValue(e,t,h,n)}),c=(l.hasOwnProperty("var_name")&&(i=l.var_name,delete l.var_name),l.hasOwnProperty("data")&&(d=n[l.data],delete l.data),xt.createInstance(e.view,[l]));if(c)return i&&(n[i]=c),i=ut(e.parse)?e.parse(c,t,r):er.parseToObjectArray(t,!0===e.level,r),i=pt(i,d),c.addData&&(e=tr.parse(i,n.data_keyword_mapping),o=[],a=[],s=[],e.forEach(function(e){f.filterDataAttach(e,"selected",o),f.filterDataAttach(e,"checked",a),f.filterDataAttach(e,"expanded",s)}),c.addData(e),f.setViewAttachData(c,c.addSelect,o),f.setViewAttachData(c,c.addCheck,a),f.setViewAttachData(c,c.expand,s)),f.callViewInitMethod(c,l,p),f.setViewCallBackMethod(c,l,n,_),t.parentNode.insertBefore(c.getRoot(),t.nextSibling),c.update(),_n(t),c},parseViewArgs:function(e,n){var r={};return er.parseAttributes(e,r),er.parseTemplate(e,r),ut(n)&&Ct(r,function(e,t){r[e]=n(e,t)}),r},callViewInitMethod:function(r,e,i){Ct(e,function(e,t){var n;i.hasOwnProperty(e)&&(n=r[i[e]],ut(n)&&(r.removeProperty(e),n.apply(r,[])))})},setViewCallBackMethod:function(n,e,r,i){return Ct(e,function(e,t){i.hasOwnProperty(e)&&((t=r[t])&&n.setCallBack(i[e],t,r),n.removeProperty(e))}),e},filterDataAttach:function(e,t,n){return"true"===e.getProperty(t)&&(n.push(e),e.removeProperty(t)),n},setViewAttachData:function(e,t,n){0<n.length&&t&&t.apply(e,[n])},_convertAttrValue:function(e,t,n,r){if(n.hasOwnProperty(e)){n=n[e];if("boolean"===n)return"true"===t;"app_value"===n&&(t=r[t])}return t}},U=(Ge(b,Ze,Ue({___zdefaults_:{template:null,remove_icon_visible:!1,remove_icon_template:r.remove,auto_select:!1,select_on_hover:!1,hoverable:!1},_onViewChange:function(e,t,n){b.superClass._onViewChange.apply(this,arguments),"auto_select"===e&&this._selectProvider&&this._doViewAutoSelectUpdate()},_doViewAutoSelectUpdate:function(){var e;!this._needAutoSelect()||(e=I.findNextUsableDataByDom(this))&&this.setSelect(e)},beforeRemove:function(e){},_onDataAdd:function(e){b.superClass._onDataAdd.apply(this,arguments),this._needAutoSelect()&&this._isDataAutoSelectable(e)&&this.setSelect(e)},_needAutoSelect:function(e){return!0===this.getProperty("auto_select")&&(0<arguments.length?this.getLastSelected()===e:!this.getLastSelected())},_isDataAutoSelectable:function(e){return null!=e&&this.isVisible(e)&&!this._isDisabled(e)&&this.isSelectable(e)}},Ke(b),{_onDataRemove:function(e){var t,n;this._needAutoSelect(e)&&((t=this.getDataRenderer(e))&&(n=t.getRenderer()),t=I.findNextUsableDataByDom(this,n)),b.superClass._onDataRemove.apply(this,arguments),t&&this.setSelect(t),this._removeHover(e,!1)},_onModelChange:function(e){b.superClass._onModelChange.apply(this,arguments),"set_provider"===e&&(!this._needAutoSelect()||(e=I.findNextUsableDataByDom(this))&&this.setSelect(e),this._clearHover(!1))}})),Ge(x,Qe,{getChildrenRendererContainer:function(e){return this._childrenRendererContainer},updateRenderConfig:function(e,t,n){x.superClass.updateRenderConfig.apply(this,arguments),n.template=e.getDataViewProperty(t,"template"),n.selectable=e.isSelectable(t),n.hover=e.isHover(t)},updateRendererStatus:function(e,t,n){x.superClass.updateRendererStatus.apply(this,arguments),Yt(this._renderer,"unselectable",!0!==this.getRenderConfig("selectable")),Yt(this._renderer,"hover",!0===this.getRenderConfig("hover"))}}),function(){U.superClass.constructor.apply(this,arguments)}),G=(Ge(U,et,{getViewDefaultTypes:function(){return["click","dblclick"]},handle_click:function(e,t){var n=t.getDataAt(e);n&&(t._isDisabled(n)||(this.isHitRemove(e)?this.handleRemove(n,e):this.isHitCheckBox(e)?this.handleCheck(n,e):this.isHitExpand(e)?this.handleExpand(n,e):(this._handleClickAction(n,e),t._onDataClick(n,e))))},_handleClickAction:function(e,t){var n=this.getView();return!(!n._isExpandable||!n._isExpandable(e)||!0!==n.getProperty("expand_on_click")||!0!==this.handleExpand(e,t))||(!!(n.isCheckable&&(!0===n.getDataViewProperty(e,"checkbox_visible")||n.hasCheckColumn&&!0===n.hasCheckColumn())&&n.isCheckable(e)&&!0===n.getProperty("check_on_click")&&!0===this.handleCheck(e,t))||void this.handleSelect(e,t))},handleRemove:function(e,t){var n=this.getView(),r=n.beforeRemove(e);ut(r)?r(function(){n.removeData(e)}):!1!==r&&n.removeData(e)},handleSelect:function(e,t){var n=this.getView();return!!n.isSelectable(e)&&(n.isSelected(e)||n.setSelect(e),!0)},handleCheck:function(e,t){var n=this.getView();return!(!n.toggleCheck||!n.isCheckable(e))&&(n.toggleCheck(e),!0)},handleExpand:function(e,t){var n=this.getView();return!(!n.toggleExpand||!n.isExpandable(e))&&(n.toggleExpand(e),!0)},handle_dblclick:function(e,t){e.stopPropagation();var n=t.getDataAt(e);n&&(t._isDisabled(n)||(this._isHitOPTarget(e)||!0!==t.getProperty("expand_on_click")&&!0===t.getProperty("expand_on_dbl_click")&&this.handleExpand(n,e),t._onDataDblClick(n,e)))},isHitCheckBox:function(e){return this._isHitOPTypeTarget(e,"check")},isHitRemove:function(e){return this._isHitOPTypeTarget(e,"remove")},isHitExpand:function(e){return this._isHitOPTypeTarget(e,"expand")},_isHitOPTarget:function(e){return null!=bn.getEventTarget(e,"[__z_dop_]")},_isHitOPTypeTarget:function(e,t){e=bn.getEventTarget(e,"[__z_dop_]");return!!e&&e.getAttribute("__z_dop_")===t}}),function(){G.superClass.constructor.apply(this,arguments)}),H=(Ge(G,et,{getViewDefaultTypes:function(){return["mouseover","mouseleave"]},handle_mouseover:function(e,t){var n;!0===t.getProperty("hoverable")&&((n=t.getDataAt(e))?t._isDisabled(n)||t._isHoverable(n)&&(t._setHoverData(n,!0,e),!0===t.getProperty("select_on_hover")&&t.isSelectable(n)&&(t.isSelected(n)||t.setSelect(n))):(n=bn.getEventTarget(e,"[__z_did_]"))&&t.getRoot().contains(n)||t._setHoverData(null,!0,e))},handle_mouseleave:function(e,t){!0===t.getProperty("hoverable")&&t._setHoverData(null,!0,e)}}),Ge(P,b,{getRendererRootContainer:function(){return this._rootUL},getRendererContainer:function(e){return this._rootUL},getDataRendererClass:function(e){return H}}),Ge(w,P,Ue({___zdefaults_:e()},v(),$e())),Ge(R,P,Ue({___zdefaults_:Ue(e(),t()),_onViewChange:function(e,t,n){R.superClass._onViewChange.apply(this,arguments),this._doViewThreeStatesCheckUpdate(e)},_doViewThreeStatesCheckUpdate:function(e){"three_states_check"===e&&this._checkProvider&&this.clearCheck()},getDataRendererClass:function(e){return W},getDataAt:function(e){return I.isEvtInRendererNode(e)?R.superClass.getDataAt.apply(this,arguments):null},makeVisible:function(e){e&&(Qn.getAncestorArray(e).forEach(function(e){this.expand(e)},this),R.superClass.makeVisible.apply(this,arguments))}},C(R),y(R),Xe(),{_isExpandable:function(e){var t=!1;return!0!==(t=!this.hasChildrenVisible(e)||t)&&!1!==this.isExpandable(e)}})),function(){this._renderer=We("li","item"),o.initRenderNode(this),H.superClass.constructor.apply(this,arguments)}),W=(Ge(H,x,{updateRenderConfig:function(e,t,n){H.superClass.updateRenderConfig.apply(this,arguments),n.attributes=e.getDataRenderProperty(t,"attributes"),o.updateRenderCheckConfig(this,e,t,n),o.updateRenderRemoveConfig(this,e,t,n)},updateRenderer:function(e,t,n){H.superClass.updateRenderer.apply(this,arguments),o.updateRendererCheck(this,e,t,n),o.updateRendererRemove(this,e,t,n),o.updateRenderIn(this,e,t,n),o.updateRenderAttributes(this,e,t,n)},updateRendererStatus:function(e,t,n){H.superClass.updateRendererStatus.apply(this,arguments),Yt(this._renderer,"checked",!0===this.getRenderConfig("checked")),Yt(this._renderer,"uncheckable",!1===this.getRenderConfig("checkable"))},insertToNodeWrapperFirst:function(e){var t=this._nodeWrapper.firstElementChild;t!==e&&this._nodeWrapper.insertBefore(e,t)},appendToNodeWrapper:function(e){this._nodeWrapper.appendChild(e)},getNodeWrapper:function(){return this._nodeWrapper},reBuildRenderer:function(){this._renderer.appendChild(this._nodeWrapper)}}),function(){this._childrenRendererContainer=We("ul","children"),W.superClass.constructor.apply(this,arguments)}),l=(Ge(W,H,{_isRendererVisible:function(e,t){var n=W.superClass._isRendererVisible.apply(this,arguments);return n=!0===n?e._isVisibleByRootData(t):n},_isRendererBodyVisible:function(e,t){return e._isBodyVisibleByRootData(t)},updateRenderConfig:function(e,t,n){W.superClass.updateRenderConfig.apply(this,arguments),n.body_visible=this._isRendererBodyVisible(e,t),n.is_root_data=e._isRootData(t),o.updateRenderLevelCheckConfig(this,e,t,n),o.updateRenderExpandConfig(this,e,t,n)},updateRenderer:function(e,t,n){var r=this._renderer;Yt(r,"body_hidden",!1===this.getRenderConfig("body_visible")),!1===this.getRenderConfig("body_visible")?He(this.getNodeWrapper(),"display","none"):tn(this.getNodeWrapper(),"display"),Yt(r,"root_data",!0===this.getRenderConfig("is_root_data")),W.superClass.updateRenderer.apply(this,arguments),Yt(r,"leaf",!0!==this.getRenderConfig("has_children")),o.updateRendererExpand(this,e,t,n),this._updateChildrenRendererContainer()},updateRendererStatus:function(e,t,n){W.superClass.updateRendererStatus.apply(this,arguments);var r=this._renderer;Yt(r,"indeterminate-checked",!0===this.getRenderConfig("indeterminate_checked")),Yt(r,"expanded",!0===this.getRenderConfig("expanded")),Yt(r,"unexpandable",!1===this.getRenderConfig("expandable"))},_getExpandTemplate:function(){return o._getExpandTemplate(this)},_updateChildrenRendererContainer:function(){var e=this._childrenRendererContainer;!0===this.getRenderConfig("has_children")?(e.parentNode||this._renderer.appendChild(e),!0===this.getRenderConfig("expanded")?tn(e,"display"):He(e,"display","none")):_n(e)}}),Ge(D,b,{getRendererContainer:function(e){return this._table},getColGroup:function(){return this._tableColGroup}}),{isAscSort:function(e){return"asc"===e},getColumnNextOrder:function(e,t){e=e.getDataViewProperty(t,"sort_orders"),t=t.getProperty("sort"),t=l.getSortOrder(t),t=e.indexOf(t);return t===e.length-1?e[0]:e[t+1]},getSortOrder:function(e){return e?Ne(e)?e.order:e:null},getSortIndex:function(e){return Ne(e)?e.index+1:null},getSortedColumnArray:function(e){e=e.filter(function(e){return e.hasProperty("sort")});return e.sort(l._sortMultipleColumnArray),e},getSortCompare:function(e,t){var n,a,s=l._getSortedColumnCompareArray(e,t);return!s||0<(a=s.length)&&(n=function(e,t){for(var n=0;n<a;n++){var r,i=s[n],o=i.compare;if(0!==(r=l.isAscSort(i.order)?o(e,t):-o(e,t)))return r}return r}),n},_getSortedColumnCompareArray:function(r,e){var e=l.getSortedColumnArray(e),t=[];return e.forEach(function(n){var e=n.compare;ut(e)||(e=function(e,t){e=r._getCellValue(e,n),t=r._getCellValue(t,n);return t<e?1:e<t?-1:0}),t.push({order:l.getSortOrder(n.getProperty("sort")),compare:e})}),t},setColumnSort:function(e,t,n,r){var i,o;n?r?0===(i=(o=l.getSortedColumnArray(e)).length)?t.set("sort",n):1===i?o[0]===t?t.set("sort",n):(t.set("sort",{order:n,index:1}),l.updateColumnSortIndex(e)):(o=0<=o.indexOf(t)?t.getProperty("sort").index:i,t.set("sort",{order:n,index:o})):(l._clearOtherColumnSort(e,t),t.set("sort",n)):r?(t.removeProperty("sort"),l.updateColumnSortIndex(e)):l.clearColumnSort(e)},clearColumnSort:function(e){e.each(function(e){e.removeProperty("sort")})},_clearOtherColumnSort:function(e,t){e.each(function(e){t!==e&&e.removeProperty("sort")})},updateColumnSortIndex:function(e){var t,n,e=l.getSortedColumnArray(e),r=e.length;1===r?(n=(t=e[0]).getProperty("sort"),Ne(n)&&t.set("sort",n.order)):1<r&&e.forEach(function(e,t){var n=e.getProperty("sort"),r=Ne(n);r&&n.index===t||e.set("sort",{order:r?n.order:n,index:t})})},_sortMultipleColumnArray:function(e,t){var e=e.getProperty("sort"),t=t.getProperty("sort"),n=Ne(e),r=Ne(t);if(n&&!r)return 1;if(!n&&r)return-1;if(n&&r){n=e.index,r=t.index;if(n<r)return-1;if(r<n)return 1}return 0}}),F={calcMaxLevel:function(t){var i=0;return t.toRootArray(!1).forEach(function(n){var e=Qn.getAddedDescendantArray(t,n),r=1;e.forEach(function(e){e=e.getProperty("parent");for(var t=1;e&&(t++,e!==n);)e=e.getProperty("parent");r=at(r,t)}),i=at(i,r)}),i},calcDataRowIndex:function(e){var t=0;for(e=e.getProperty("parent");e;)t++,e=e.getProperty("parent");return t},calcColSpan:function(t,e){var n=0;return Qn.getAddedDescendantArray(t.getProvider(),e).forEach(function(e){t._isVisible(e)&&!t.hasChildrenVisible(e)&&n++}),at(1,n)},calcRowSpan:function(e,t){return e.hasChildrenVisible(t)?1:F.calcMaxLevel(e.getProvider())-F.calcDataRowIndex(t)},appendAllDataRenderer:function(t){t._getSortDataArray(t.getProvider().toRootArray(!1)).forEach(function(e){F._appendDataRenderer(t,e)})},_appendDataRenderer:function(e,t){var n=e.getDataRenderer(t);n&&(e.getRendererContainer(t).appendChild(n.getRenderer()),F.appendDataChildrenRenderer(e,t))},appendDataChildrenRenderer:function(t,e){e=gt(e.getChildren(!1),t.containsData,t);0<e.length&&(e=t._getSortDataArray(e)).forEach(function(e){F._appendDataRenderer(t,e)})}},j=(Ge(A,D,Ue({___zdefaults_:Ue({model_select:!0,model_check:!0,template:null},e({checkbox_visible:!1}),n(),u()),getRendererRootContainer:function(){return this._tableHead},getDataRendererClass:function(e){return q},isCheckColumn:function(e){return this.getProvider()._checkColumn===e},hasCheckColumn:function(e){return null!=this.getProvider()._checkColumn},isTreeColumn:function(e){return this.getProvider()._treeColumn===e},_onModelChange:function(e,t){F.appendAllDataRenderer(this),A.superClass._onModelChange.apply(this,arguments)},_clearDataRendererImpl:function(){A.superClass._clearDataRendererImpl.apply(this,arguments),this._updateHeadTR()},_beforeModelChange:function(e,t){"data"===e&&"parent"!==t.property||this._updateHeadTR(),A.superClass._beforeModelChange.apply(this,arguments)},_updateHeadTR:function(){var e=F.calcMaxLevel(this.getProvider());this._rowTRArray=[],pn(this._tableHead);for(var t=0;t<e;t++){var n=We("tr");this._rowTRArray[t]=n,this._tableHead.appendChild(n)}},getRowTRArray:function(){return this._rowTRArray},_onViewUpdate:function(){this._updateColGroup(),A.superClass._onViewUpdate.apply(this,arguments)},_updateColGroup:function(){pn(this._tableColGroup);var e,t=this.getProvider();this._colGroupWidth=0,t&&((e=this.getProperty("root_data"))?this.hasChildrenVisible(e)?t.hEachByData(e,this._appendColGroupItem,this):this._appendColGroupItem(e):t.hEach(this._appendColGroupItem,this)),this.onColGroupChange(this._tableColGroup)},onColGroupChange:function(){},_getColGroupWidth:function(){return this._colGroupWidth},_isColNeedAdded:function(e){return!1!==this.isVisible(e)&&(!this._isAllChildrenHidden(e)&&(!this.hasChildrenVisible(e)&&(!(!(t=this._isVisible(e))&&!e.getProperty("parent"))&&{visible:t})));var t},_isAllChildrenHidden:function(e){return!!e.hasChildren()&&!this.hasChildrenVisible(e)},_appendColGroupItem:function(e){var t,n,r=this._isColNeedAdded(e);!1!==r&&(t=0,n=We("col"),!0===r.visible&&(t=this.isColumnMinimized(e)?0|this.getProperty("minimize_width"):it(e.getProperty("width"))),t=at(0,t),this._colGroupWidth+=t,n._width=t,He(n,"width",t+"px"),this._tableColGroup.appendChild(n))},hEachColumn:function(n,r){var e,t=this.getProvider();t&&((e=this.getProperty("root_data"))?t.hEachByData(e,function(e){var t=this._isColNeedAdded(e);!1!==t&&n.apply(r,[e,t.visible])},this):t.hEach(function(e){var t;this.hasChildrenVisible(e)||!1!==(t=this._isColNeedAdded(e))&&n.apply(r,[e,t.visible])},this))},setColumnMinimize:function(e,t){!0===t?e.set("minimized",!0):e.remove("minimized")},isColumnMinimized:function(e){return!0===e.get("minimized")}},C(A),y(A),{getRendererContainer:function(e){e=F.calcDataRowIndex(e);return this._rowTRArray[e]}})),function(){j.superClass.constructor.apply(this,arguments)}),q=(Ge(j,et,{getViewDefaultTypes:function(){return["click"]},handle_click:function(e,t){var n,r,i,o=t.getDataAt(e);o&&(t._isDisabled(o)||(t.isColumnMinimized(o)?t.setColumnMinimize(o,!1):this.isCheckBox(e)?this.handleCheck(o,e):this.isMinimize(e)?t.setColumnMinimize(o,!0):(this._isSortable(o)&&(n=l.getColumnNextOrder(t,o),(r="multiple"===t.getDataViewProperty(o,"sort_mode"))&&(null==(i=t.getProperty("multiple_sort_modifier_key"))?e.ctrlKey||e.metaKey||(r=!1):e[i.toLowerCase()+"Key"]||(r=!1)),l.setColumnSort(t.getProvider(),o,n,r)),t._onDataClick(o,e))))},isCheckBox:function(e){return this._isOPTypeTarget(e,"check")},isRemove:function(e){return this._isOPTypeTarget(e,"remove")},isExpand:function(e){return this._isOPTypeTarget(e,"expand")},isMinimize:function(e){return this._isOPTypeTarget(e,"minimize")},_isOPTarget:function(e){return null!=bn.getEventTarget(e,"[__z_dop_]")},_isOPTypeTarget:function(e,t){e=bn.getEventTarget(e,"[__z_dop_]");return!!e&&e.getAttribute("__z_dop_")===t},handleCheck:function(e,t){var n=this.getView();return!(!n.toggleCheck||!n.isCheckable(e))&&(n.toggleCheck(e),!0)},_isSortable:function(e){var t=this.getView();return!t.hasChildrenVisible(e)&&!0===t.getDataViewProperty(e,"sortable")}}),function(){this._renderer=We("th"),o.initRenderNode(this),q.superClass.constructor.apply(this,arguments)});Ge(q,x,{_isRendererVisible:function(e,t){var n=q.superClass._isRendererVisible.apply(this,arguments);return n=!0===(n=!0===(n=!0===n?e._isVisibleByRootData(t):n)?e._isBodyVisibleByRootData(t):n)?!e._isAllChildrenHidden(t):n},updateRenderConfig:function(e,t,n){q.superClass.updateRenderConfig.apply(this,arguments),n.template=e.getDataViewProperty(t,"head_template"),n.is_root_data=e._isRootData(t),n.colspan=F.calcColSpan(e,t),n.rowspan=F.calcRowSpan(e,t),n.tree_column=e.isTreeColumn(t),n.has_children=e.hasChildrenVisible(t);var r=e.getDataRenderProperty(t,"attributes");this.updateRenderMinimizeConfig(e,t,n),!0!==this.getRenderConfig("minimized")?(this.updateRenderCheckConfig(e,t,n),o.updateRenderLevelCheckConfig(this,e,t,n),this.updateRenderSortConfig(e,t,n)):(e=this.getRenderConfig("label"))&&(null==r?r={title:e}:Ne(r)&&(r.hasOwnProperty("title")||(r.title=e))),n.attributes=r},updateRenderCheckConfig:function(e,t,n){e.isCheckColumn(t)?(n.check_column=!0,n.checkbox_visible=!0,n.checked=e.isChecked(t),n.checkable=e.isCheckable(t)):o.updateRenderCheckConfig(this,e,t,n)},updateRenderer:function(e,t,n){q.superClass.updateRenderer.apply(this,arguments),Yt(this._renderer,"root_data",!0===this.getRenderConfig("is_root_data")),Yt(this._renderer,"leaf",!0!==this.getRenderConfig("has_children")),this._renderer.setAttribute("colspan",this.getRenderConfig("colspan")),this._renderer.setAttribute("rowspan",this.getRenderConfig("rowspan"));var r=!0===this.getRenderConfig("minimized");Yt(this._renderer,"minimized",r),o.updateRenderAttributes(this,e,t,n),r?(this._checkBoxWrapper&&_n(this._checkBoxWrapper),this._sortWrapper&&_n(this._sortWrapper),this._minimizeWrapper&&_n(this._minimizeWrapper),this._inWrapper.innerHTML=this.getRenderConfig("minimize_label")):(o.updateRendererCheck(this,e,t,n),o.updateRenderIn(this,e,t,n),this.updateRendererSort(e,t,n),this.updateRendererMinimize(e,t,n))},updateRendererStatus:function(e,t,n){q.superClass.updateRendererStatus.apply(this,arguments),Yt(this._renderer,"tree-column",!0===this.getRenderConfig("tree_column")),Yt(this._renderer,"check-column",!0===this.getRenderConfig("check_column")),Yt(this._renderer,"checked",!0===this.getRenderConfig("checked")),Yt(this._renderer,"uncheckable",!1===this.getRenderConfig("checkable")),Yt(this._renderer,"indeterminate-checked",!0===this.getRenderConfig("indeterminate_checked"))},updateRenderSortConfig:function(e,t,n){!0!==this.getRenderConfig("has_children")?(n.sortable=!0===e.getDataViewProperty(t,"sortable"),n.sort=e.getDataRenderProperty(t,"sort")):n.sortable=!1},updateRendererSort:function(e,t,n){Yt(this._renderer,"sortable",!0===this.getRenderConfig("sortable"));var r,i,o=this.getRenderConfig("sort");!0!==this.getRenderConfig("has_children")&&null!=o?(r=this._getSortWrapper(),i=this._getSortTemplate(),0<(o=l.getSortIndex(o))&&(i+="<span class='index'>"+o+"</span>"),r.innerHTML=i,Jt(r,this._getSortClass()),this.appendToNodeWrapper(r)):this._sortWrapper&&_n(this._sortWrapper)},_getSortClass:function(){var e=["sort"],t=this.getRenderConfig("sort");return null!=t&&(e.push("sorted"),e.push(l.getSortOrder(t))),!0===this.getRenderConfig("sortable")?e.push("sortable"):e.push("unsortable"),e.join(" ")},_getSortWrapper:function(){return this._sortWrapper||(this._sortWrapper=We("span"),this._sortWrapper.setAttribute("__z_dop_","sort")),this._sortWrapper},_getSortTemplate:function(){return l.isAscSort(l.getSortOrder(this.getRenderConfig("sort")))?this.getViewRenderConfig("sort_asc_icon_template"):this.getViewRenderConfig("sort_desc_icon_template")},updateRenderMinimizeConfig:function(e,t,n){var r;!0!==this.getRenderConfig("has_children")?(r=!0===e.getDataViewProperty(t,"minimizable"),(n.minimizable=r)&&(r=e.isColumnMinimized(t),(n.minimized=r)?(n.minimize_width=this.getViewRenderConfig("minimize_width"),n.minimize_label=this.getViewRenderConfig("minimize_label")):n.minimize_icon_template=this.getViewRenderConfig("minimize_icon_template"))):n.minimizable=!1},updateRendererMinimize:function(e,t,n){var r=this.getRenderConfig("minimizable");Yt(this._renderer,"minimizable",r),r?(r=this.getRenderConfig("minimized"),Yt(this._renderer,"minimized",r),r||this.appendToNodeWrapper(this._getMinimizeWrapper())):this._minimizeWrapper&&_n(this._minimizeWrapper)},_getMinimizeWrapper:function(){return this._minimizeWrapper||(this._minimizeWrapper=We("span","minimize"),this._minimizeWrapper.setAttribute("__z_dop_","minimize"),this._minimizeWrapper.innerHTML=this.getViewRenderConfig("minimize_icon_template")),this._minimizeWrapper},insertToNodeWrapperFirst:function(e){var t=this._nodeWrapper.firstElementChild;t!==e&&this._nodeWrapper.insertBefore(e,t)},appendToNodeWrapper:function(e){this._nodeWrapper.appendChild(e)},getNodeWrapper:function(){return this._nodeWrapper},reBuildRenderer:function(){this._renderer.appendChild(this._nodeWrapper)}});function $(){this._tableBody=We("tbody"),$.superClass.constructor.apply(this,arguments),this._table.appendChild(this._tableBody),Xt(this.getRoot(),"z-tbody")}function X(){this._tableBody=We("tbody"),X.superClass.constructor.apply(this,arguments),this._table.appendChild(this._tableBody),Xt(this.getRoot(),"z-tbody")}function K(){return this instanceof K?sn.isElement(e=arguments[0])?f.parseView("zw-listview",e):(K.superClass.constructor.apply(this,arguments),void Xt(this.getRoot(),"z-listview")):xt.createInstance(K,arguments);var e}function J(){J.superClass.constructor.apply(this,arguments)}function Y(){return this instanceof Y?(e=arguments[0],sn.isElement(e)?f.parseView("zw-tabs",e):(this._contentContainer=We("div","contents"),this._prevEle=We("span","to_prev"),this._nextEle=We("span","to_next"),this._tabsView=We("div","tabs"),Y.superClass.constructor.apply(this,arguments),e=this.getRoot(),Xt(e,"z-tabs"),this._tabsView.appendChild(this._rootUL),this._tabsView.appendChild(this._prevEle),this._tabsView.appendChild(this._nextEle),e.appendChild(this._tabsView),this._doTabPositionUpdate(),this._doTabContentVisibleUpdate(),this._doUpdateTabScrollAndSize(),void this.addController(new J))):xt.createInstance(Y,arguments);var e}function Z(){return this instanceof Z?sn.isElement(e=arguments[0])?f.parseView("zw-tree",e):(Z.superClass.constructor.apply(this,arguments),void Xt(this.getRoot(),"z-tree")):xt.createInstance(Z,arguments);var e}function Q(){this._contentContainer=We("div","content"),Q.superClass.constructor.apply(this,arguments)}function ee(){return this instanceof ee?sn.isElement(e=arguments[0])?f.parseView("zw-collapse",e):(ee.superClass.constructor.apply(this,arguments),void Xt(this.getRoot(),"z-collapse")):xt.createInstance(ee,arguments);var e}function te(){return this instanceof te?sn.isElement(e=arguments[0])?f.parseView("zw-carousel",e):(this._contentContainer=We("div","contents"),this._initDataContentInterface(!0),this._indicatorView=We("div","indicators"),te.superClass.constructor.apply(this,arguments),this._initIndicatorView(),void Xt(this.getRoot(),"z-carousel")):xt.createInstance(te,arguments);var e}var ne=function(e,t){var n,r=t.getProperty("field");return n=null==(n=r?mt(e.getProperties(!1),r):n)?null!=(e=t.getProperty("default"))?e:"":n},re=(Ge($,D,Ue({___zdefaults_:Ue({model_select:!0,model_expand:!0,model_check:!0},e()),makeVisible:function(e){},setTableHead:function(e){this._tableHead=e},getRendererRootContainer:function(){return this._tableBody},getRendererContainer:function(e){return this._tableBody},hEachColumn:function(e,t){this._tableHead&&this._tableHead.hEachColumn(e,t)},isColumnMinimized:function(e){return!!this._tableHead&&this._tableHead.isColumnMinimized(e)},hasCheckColumn:function(){return!1},isCheckColumn:function(e){return!1},_getCellValue:function(e,t){return this.getCellValue(e,t)},getCellValue:function(e,t){return ne(e,t)},getDataRendererClass:function(e){return re}},v(),$e())),function(){this._renderer=We("tr","item"),re.superClass.constructor.apply(this,arguments)}),ie=(Ge(re,Qe,{updateRenderConfig:function(e,t,n){re.superClass.updateRenderConfig.apply(this,arguments),this._renderConfig.row_template=e.getDataViewProperty(t,"row_template"),this._renderConfig.selectable=e.isSelectable(t),this._renderConfig.hover=e.isHover(t),e.hasCheckColumn()&&(n.checkbox_visible=!0,n.checked=e.isChecked(t),n.checkable=e.isCheckable(t))},updateRenderer:function(e,t,n){re.superClass.updateRenderer.apply(this,arguments),pn(this._renderer);var r=this.getRenderConfig("row_template");r?this._renderer.innerHTML=Tn(r,t.getProperties(!1)):e.hEachColumn(this._renderColumn,this)},updateRendererStatus:function(e,t,n){re.superClass.updateRendererStatus.apply(this,arguments),Yt(this._renderer,"unselectable",!1===this.getRenderConfig("selectable")),Yt(this._renderer,"hover",!0===this.getRenderConfig("hover")),Yt(this._renderer,"checked",!0===this.getRenderConfig("checked")),Yt(this._renderer,"uncheckable",!1===this.getRenderConfig("checkable"))},_renderColumn:function(e,t){var n=this._view,r=We("td",{className:e.get("className")||e.get("class"),style:e.get("style"),attributes:e.get("attributes")});return this._renderer.appendChild(r),!0===t&&(n.isColumnMinimized(e)||(this._renderCommonColumn(r,e),n.isCheckColumn(e)&&this._renderCheckColumn(r,e))),r},_renderCommonColumn:function(e,t){var n=this._view,r=this._data,i=t.render;ut(i)?i.apply(n,[e,r,t,n,this._renderer]):(i=(i=t.getProperty("template"))?Tn(i,r.getProperties(!1)):n._getCellValue(r,t),e.innerHTML=i)},_renderCheckColumn:function(e,t){Xt(e,"check-column");var n=o._getCheckboxWrapper(this);n.innerHTML=o._getCheckboxTemplate(this),e.insertBefore(n,e.firstChild)}}),Ge(X,D,Ue({___zdefaults_:Ue({model_select:!0,model_expand:!0,model_check:!0},e(),t()),_onViewChange:function(e,t,n){X.superClass._onViewChange.apply(this,arguments),this._doViewThreeStatesCheckUpdate(e)},_doViewThreeStatesCheckUpdate:function(e){"three_states_check"===e&&this._checkProvider&&this.clearCheck()},makeVisible:function(e){},setTableHead:function(e){this._tableHead=e},getRendererRootContainer:function(){return this._tableBody},getRendererContainer:function(e){return this._tableBody},hEachColumn:function(e,t){this._tableHead&&this._tableHead.hEachColumn(e,t)},isColumnMinimized:function(e){return!!this._tableHead&&this._tableHead.isColumnMinimized(e)},hasCheckColumn:function(){return this._tableHead.hasCheckColumn()},isCheckColumn:function(e){return this._tableHead.isCheckColumn(e)},isTreeColumn:function(e){return!0===e.getProperty("tree")},_getCellValue:function(e,t){return this.getCellValue(e,t)},getCellValue:function(e,t){return ne(e,t)},getDataRendererClass:function(e){return ie}},m(X),y(X),Xe(),{_isExpandable:function(e){var t=!1;return!0!==(t=!this.hasChildrenVisible(e)||t)&&!1!==this.isExpandable(e)}})),function(){ie.superClass.constructor.apply(this,arguments)});Ge(ie,re,{_isRendererVisible:function(e,t){var n=ie.superClass._isRendererVisible.apply(this,arguments);return n=!0===n?e._isVisibleByRootData(t):n},updateRenderConfig:function(e,t,n){ie.superClass.updateRenderConfig.apply(this,arguments),this._renderConfig.is_root_data=e._isRootData(t),o.updateRenderLevelCheckConfig(this,e,t,n),o.updateRenderExpandConfig(this,e,t,n),this._renderConfig.data_level=e._getDataLevel(t)},updateRenderer:function(e,t,n){Yt(this._renderer,"root_data",!0===this.getRenderConfig("is_root_data")),ie.superClass.updateRenderer.apply(this,arguments),Yt(this._renderer,"leaf",!0!==this.getRenderConfig("has_children"))},updateRendererStatus:function(e,t,n){ie.superClass.updateRendererStatus.apply(this,arguments),Yt(this._renderer,"unexpandable",!1===this.getRenderConfig("expandable")),Yt(this._renderer,"indeterminate-checked",!0===this.getRenderConfig("indeterminate_checked"))},_renderColumn:function(e,t){var n=this._view,r=ie.superClass._renderColumn.apply(this,arguments);!0===t&&(n.isColumnMinimized(e)||n.isTreeColumn(e)&&this._renderTreeColumn(r,e))},_renderTreeColumn:function(e,t){Xt(e,"tree-column"),!0===this.getRenderConfig("has_children")&&!1!==this.getRenderConfig("expand_icon_visible")&&((n=o._getExpandWrapper(this)).innerHTML=o._getExpandTemplate(this),Jt(n,o._getExpandClass(this)),e.insertBefore(n,e.firstChild));for(var n,r=this.getRenderConfig("data_level"),i=0;i<r;i++)e.insertBefore(We("span","indent"),e.firstChild)}}),Ge(K,w,{__className_:"ListView"}),Ge(J,et,{add:function(e){J.superClass.add.apply(this,arguments);var t=e._prevEle,t=(xn(t,"mousedown",this.toPrev,this),xn(t,"mouseup",this.stopScroll,this),xn(t,"mouseleave",this.stopScroll,this),e._nextEle);xn(t,"mousedown",this.toNext,this),xn(t,"mouseup",this.stopScroll,this),xn(t,"mouseleave",this.stopScroll,this),Ln.addWheelListener(e._tabsView,this.handleTabsWheel,this)},remove:function(){var e=this._view._prevEle,e=(Pn(e,"mousedown",this.toPrev,this),Pn(e,"mouseup",this.stopScroll,this),Pn(e,"mouseleave",this.stopScroll,this),this._view._nextEle);Pn(e,"mousedown",this.toNext,this),Pn(e,"mouseup",this.stopScroll,this),Pn(e,"mouseleave",this.stopScroll,this),Ln.removeWheelListener(this._view._tabsView,this.handleTabsWheel,this),J.superClass.remove.apply(this,arguments)},handleTabsWheel:function(e){var t=e.wheelDelta<0||0<e.deltaY||0<e.detail?10:-10,n=this._view.getProperty("tab_position"),n="top"===n||"bottom"===n?"scrollLeft":"scrollTop",r=this._view._rootUL[n];this._view._rootUL[n]+=t,r!==this._view._rootUL[n]&&e.preventDefault()},stopScroll:function(){this._scrollStop=!0},toPrev:function(){this.startScroll(-6)},toNext:function(){this.startScroll(6)},startScroll:function(e){this._scrollStop=!1,this._scrollOffset=e;e=this._view.getProperty("tab_position");this._scrollDirection="top"===e||"bottom"===e?"scrollLeft":"scrollTop",Pt.cancelCallRAFInterval(this.scroll,this),Dt(this.scroll,this)},scroll:function(){if(!0===this._scrollStop)return!1;var e=this._view._rootUL[this._scrollDirection];this._view._rootUL[this._scrollDirection]+=this._scrollOffset,e===this._view._rootUL[this._scrollDirection]&&this.stopScroll()}}),Ge(Y,w,Ue({__className_:"Tabs",___zdefaults_:{onresize:!0,content_visible:!0,content_lazy_load:!1,content_auto_resize:!0,content_container:null,tab_position:"top",auto_select:!0,scroll_to_left_arrow_icon_template:r.tabs_scroll_to_left_arrow,scroll_to_right_arrow_icon_template:r.tabs_scroll_to_right_arrow,scroll_to_up_arrow_icon_template:r.tabs_scroll_to_up_arrow,scroll_to_down_arrow_icon_template:r.tabs_scroll_to_down_arrow},_getPrevEle:function(){return this._prevEle},_getNextEle:function(){return this._nextEle},_onViewUpdate:function(){Y.superClass._onViewUpdate.apply(this,arguments),this._doUpdateTabScrollAndSize()},_onViewChange:function(e,t,n){Y.superClass._onViewChange.apply(this,arguments),"tab_position"===e?this._doTabPositionUpdate():"content_visible"===e?this._doTabContentVisibleUpdate():"content_lazy_load"===e?this._doTabContentLazyLoadUpdate():"content_container"===e&&this._doTabContentContainerUpdate()},_doTabPositionUpdate:function(){var e=this.getRoot();Kt(e,"top bottom left right"),Xt(e,this.getProperty("tab_position")),this._isContentVisible()&&this._isUseDefaultContentContainer()&&this._insertContentContainerByOrder(),this._doTabScrollArrowUpdate()},_doTabScrollArrowUpdate:function(){var e=this.getProperty("tab_position");"left"===e||"right"===e?(this._prevEle.innerHTML=this.getProperty("scroll_to_up_arrow_icon_template"),this._nextEle.innerHTML=this.getProperty("scroll_to_down_arrow_icon_template")):(this._prevEle.innerHTML=this.getProperty("scroll_to_left_arrow_icon_template"),this._nextEle.innerHTML=this.getProperty("scroll_to_right_arrow_icon_template"))},_insertContentContainerByOrder:function(){var e=this.getRoot();"bottom"===this.getProperty("tab_position")?e.insertBefore(this._contentContainer,e.firstElementChild):e.appendChild(this._contentContainer)},_doTabContentVisibleUpdate:function(){var e;this._isContentVisible()?(this._isUseDefaultContentContainer()&&this._insertContentContainerByOrder(),this._doTabContentLazyLoadUpdate(),(e=this.getLastSelected())&&this.setCurrentDataContent(e)):(this.clearDataContent(),this._isUseDefaultContentContainer()&&_n(this._contentContainer))},_doTabContentLazyLoadUpdate:function(){this._isContentLazyLoad()||this.eachData(function(e){this.isDataContentAdded(e)||this.addDataContent(e)},this)},_doTabContentContainerUpdate:function(){this._isUseDefaultContentContainer()?this._isContentVisible()&&this._insertContentContainerByOrder():_n(this._contentContainer)},getContentContainer:function(){var e=this.getProperty("content_container");return e?Ft(e):this._contentContainer},_isUseDefaultContentContainer:function(){return null==this.getProperty("content_container")},_onDataAdd:function(e){Y.superClass._onDataAdd.apply(this,arguments),this._isContentVisible()&&!this._isContentLazyLoad()&&this.addDataContent(e)},_onDataRemove:function(e){Y.superClass._onDataRemove.apply(this,arguments),this._isContentVisible()&&this.removeDataContent(e)},_onDataClear:function(){Y.superClass._onDataClear.apply(this,arguments),this._isContentVisible()&&this.clearDataContent()},_onDataChange:function(e,t){Y.superClass._onDataChange.apply(this,arguments),this._isContentVisible()&&"content"===t.property&&(this.removeDataContent(e),this.getLastSelected()===e?this.setCurrentDataContent(e):this._isContentLazyLoad()||this.addDataContent(e))},_onModelChange:function(e){Y.superClass._onModelChange.apply(this,arguments),"set_provider"===e&&this._doTabContentLazyLoadUpdate()},_onSelectBatchChange:function(){var e;Y.superClass._onSelectBatchChange.apply(this,arguments),!this._isContentVisible()||(e=this.getLastSelected())&&this.setCurrentDataContent(e)},_getScrollView:function(){return this._rootUL},_isContentVisible:function(){return!1!==this.getProperty("content_visible")},_isContentLazyLoad:function(){return!0===this.getProperty("content_lazy_load")},_doResizeUpdate:function(){Y.superClass._doResizeUpdate.apply(this,arguments),this._doUpdateTabScrollAndSize()},_doUpdateTabScrollAndSize:function(e){this._doUpdateTabScroll(),this._doUpdateTabSize()},_doUpdateTabScroll:function(){var e=this.getProperty("tab_position");tn(this._tabsView,"padding-top"),tn(this._tabsView,"padding-bottom"),tn(this._tabsView,"padding-left"),tn(this._tabsView,"padding-right"),"top"===e||"bottom"===e?(e=this._rootUL.scrollWidth,this._tabsView.clientWidth<e?("none"===en(this._prevEle,"display")&&(tn(this._prevEle,"display"),tn(this._nextEle,"display")),He(this._tabsView,"padding-left",this._prevEle.offsetWidth+"px"),He(this._tabsView,"padding-right",this._nextEle.offsetWidth+"px")):(He(this._prevEle,"display","none"),He(this._nextEle,"display","none"))):(e=this._rootUL.scrollHeight,this._tabsView.clientHeight<e?("none"===en(this._prevEle,"display")&&(tn(this._prevEle,"display"),tn(this._nextEle,"display")),He(this._tabsView,"padding-top",this._prevEle.offsetHeight+"px"),He(this._tabsView,"padding-bottom",this._nextEle.offsetHeight+"px")):(He(this._prevEle,"display","none"),He(this._nextEle,"display","none")))},_doUpdateTabSize:function(){if(this._isContentVisible()&&this._isUseDefaultContentContainer()){if(!1!==this.getProperty("content_auto_resize")){var e=this.getRoot().parentNode;if(e&&en(e,"height")){var t,e=this.getProperty("tab_position");if("top"===e||"bottom"===e)return e=this.getRootSize(),t=this._rootUL.offsetHeight,void He(this._contentContainer,"height",e.height-t-1+"px")}}tn(this._contentContainer,"height")}}},p())),Ge(Z,R,{__className_:"Tree"}),Ge(Q,H,{updateRenderConfig:function(e,t,n){Q.superClass.updateRenderConfig.apply(this,arguments),this._renderConfig.expanded=e.isExpanded(t);var r=!1!==e.getDataViewProperty(t,"expand_icon_visible");!0==(this._renderConfig.expand_icon_visible=r)&&(this._renderConfig.expandable=e.isExpandable(t)),this._renderConfig.content=e.getDataRenderProperty(t,"content")},updateRenderer:function(e,t,n){Q.superClass.updateRenderer.apply(this,arguments),Yt(this._renderer,"expanded",!0===this.getRenderConfig("expanded")),Yt(this._renderer,"unexpandable",!0!==this.getRenderConfig("expandable")),this._updateRendererExpand(),this._updateRendererContent()},_updateRendererExpand:function(){var e;!1!==this.getRenderConfig("expand_icon_visible")?((e=this._getExpandWrapper()).innerHTML=this._getExpandTemplate(),Jt(e,this._getExpandClass()),this.insertToNodeWrapperFirst(e)):this._expandWrapper&&_n(this._expandWrapper)},_getExpandTemplate:function(){return!0===this.getRenderConfig("expanded")?this.getViewRenderConfig("expand_expanded_icon_template"):this.getViewRenderConfig("expand_collapsed_icon_template")},_getExpandClass:function(){var e=["expand"];return!0===this.getRenderConfig("expanded")?e.push("expanded"):e.push("collapsed"),!0===this.getRenderConfig("expandable")?e.push("expandable"):e.push("unexpandable"),e.join(" ")},_getExpandWrapper:function(){return this._expandWrapper||(this._expandWrapper=We("span"),this._expandWrapper.setAttribute("__z_dop_","expand")),this._expandWrapper},_updateRendererContent:function(){var e=this.getRenderConfig("content");this._currentContent!==e&&(a.releaseContent(this._currentContentObj),this._currentContent=e,this._currentContentObj=a.getContentObject(e),this._currentContentObj&&((e=this._currentContentObj.contentEle)&&this._contentContainer.appendChild(e),a.showContent(this._currentContentObj))),this._contentContainer.parentNode||this._renderer.appendChild(this._contentContainer),!0===this.getRenderConfig("expanded")?(a.showContent(this._currentContentObj),this._currentContentObj&&this._currentContentObj.contentEle?tn(this._contentContainer,"display"):He(this._contentContainer,"display","none")):(a.hideContent(this._currentContentObj),He(this._contentContainer,"display","none"))},dispose:function(){Q.superClass.dispose.apply(this,arguments),this._currentContentObj&&a.releaseContent(this._currentContentObj)}}),Ge(ee,w,Ue({__className_:"Collapse",___zdefaults_:Ue({make_visible_on_select:!1},t({expand_on_click:!0})),getDataRendererClass:function(e){return Q},getDataAt:function(e){return I.isEvtInRendererNode(e)?ee.superClass.getDataAt.apply(this,arguments):null}},Xe()));Ge(te,w,Ue({__className_:"Carousel",___zdefaults_:{auto_select:!0,indicator_visible:!0,scroll_arrow_visible:!0,auto_play:!0,interval:3e3,hover_pause:!0,scroll_to_prev_arrow_template:"<a class='fz-icon fz-angle-left'></a>",scroll_to_next_arrow_template:"<a class='fz-icon fz-angle-right'></a>"},_initIndicatorView:function(){this._prevEle=We("span","to_prev"),this._prevEle.innerHTML=this._getCommonProperty("scroll_to_prev_arrow_template"),this._nextEle=We("span","to_next"),this._nextEle.innerHTML=this._getCommonProperty("scroll_to_next_arrow_template"),this._indicatorView.appendChild(this._rootUL),this.getRoot().appendChild(this._contentContainer),this.getRoot().appendChild(this._prevEle),this.getRoot().appendChild(this._nextEle),this.getRoot().appendChild(this._indicatorView)},_getPrevEle:function(){return this._prevEle},_getNextEle:function(){return this._nextEle},_getContentContainer:function(){return this._contentContainer},_onDataAdd:function(e){te.superClass._onDataAdd.apply(this,arguments),this.addDataContent(e)},_onDataRemove:function(e){te.superClass._onDataRemove.apply(this,arguments),this.removeDataContent(e)},_onDataClear:function(){te.superClass._onDataClear.apply(this,arguments),this.clearDataContent()},_onDataChange:function(e,t){te.superClass._onDataChange.apply(this,arguments),"content"===t.property&&(this.removeDataContent(e),this.getLastSelect()===e?this.setCurrentDataContent(e):this.addDataContent(e))},_onSelectBatchChange:function(){te.superClass._onSelectBatchChange.apply(this,arguments);var e=this.getLastSelect();e&&this.setCurrentDataContent(e),$TimeUtil.cancelCallLater(this.toNext,3e3,this),!0===this._getCommonProperty("auto_play")&&wt(this.toNext,1e3,this)},toNext:function(){var e=this._getNextData();e&&this.setSelect(e)},_getPrevData:function(){var e=this._getSortDataArray(this.getProvider().toRootArray(!1)),t=-1,n=0,r=this.getLastSelect(),r=(r&&(t=e.indexOf(r),n=1),e.length);0<=t&&((t=e.splice(t)).shift(),e.unshift.apply(e,t));for(var i=r-1;n<=i;i--){var o=e[i];if(this.isVisible(o)&&!this.isDisabled(o)&&this.isSelectable(o))return o}},_getNextData:function(){for(var e=this._getSortDataArray(this.getProvider().toRootArray(!1)),t=this.getLastSelect(),n=(t&&(t=e.splice(0,e.indexOf(t)),e.shift(),e.push.apply(e,t)),e.length),r=0;r<n;r++){var i=e[r];if(this.isVisible(i)&&!this.isDisabled(i)&&this.isSelectable(i))return i}}},_(),{beforeHideContent:function(e){this._lastContent=e;var e=this.getLastSelect();e&&(e=this.getDataContent(e),this._lastContent._id,e._id)}}));function oe(e){this._pager=e,oe.superClass.constructor.apply(this,[])}function ae(){ae.superClass.constructor.apply(this,arguments)}function se(){return this instanceof se?sn.isElement(e=arguments[0])?f.parseView("zw-pagination",e):(se.superClass.constructor.apply(this,arguments),this._initPageView(),I.addWidgetClass(this.getRoot()),Xt(this.getRoot(),"z-pagination"),void this.addController(new ae)):xt.createInstance(se,arguments);var e}function le(){le.superClass.constructor.apply(this,arguments)}function ce(){if(!(this instanceof ce))return xt.createInstance(ce,arguments);var e=arguments[0];if(sn.isElement(e))return f.parseView("zw-grid",e);this._initGridView();var e=nr(arguments,"columns"),t=(ce.superClass.constructor.apply(this,arguments),this._initCenterTables(),this._initDefaultColumns(),this.getRoot());I.addWidgetClass(t),Xt(t,"z-grid"),t.appendChild(this._headDiv),t.appendChild(this._bodyDiv),t.appendChild(this._pagerDiv),this._doViewOverflowUpdate(),this._updateLayout(),this.addController(new le),this.addController(new G),e&&this.setColumns(e)}var de=function(e,t,n,r,i){return 0===t?"to_prev":(--t,(n=at(1,n))<=i?t<=n-1?t:t===n?"to_next":void 0:r<=i/2?t===i-1?"to_next_more":t===i?n-1:t===i+1?"to_next":t<i-1?t:void 0:n-i/2-1<r?0===t?0:1===t?"to_prev_more":t===i+1?"to_next":t<=i?n+t-i-1:void 0:0===t?0:1===t?"to_prev_more":t===i+2?"to_next":t===i+1?n-1:t===i?"to_next_more":t<i?r-((i-2)/2|0)+(t-2):void 0)},he=(Ge(oe,w,{_getPagerCommonProperty:function(e){return this._pager.getProperty(e)},_getPagerPageIndex:function(){return this._pager._getPageIndex()-1},_setPagerPageIndex:function(e){this._pager.set("page_index",e+1)},_getPagerPageNumber:function(){return this._pager._getPageNumber()},_getPagerPagerCount:function(){return this._pager._getPagerCount()},isVisible:function(e){return null!=e.getProperty("role")},getLabel:function(e){e=e.getProperty("role");return null!=e?"to_prev"===e?this._getPagerCommonProperty("to_prev_icon_template"):"to_next"===e?this._getPagerCommonProperty("to_next_icon_template"):"to_prev_more"===e?this._getPagerCommonProperty("to_prev_more_icon_template"):"to_next_more"===e?this._getPagerCommonProperty("to_next_more_icon_template"):e+1:e},isDisabled:function(e){e=e.getProperty("role");if(null==e)return!0;var t=this._getPagerPageIndex();return"to_prev"===e?t<=0:"to_next"===e&&t>=this._getPagerPageNumber()-1},_onDataClick:function(e){var t,e=e.getProperty("role");null!=e&&(_t(e)?this._setPagerPageIndex(e):(t=this._getPagerPageIndex(),"to_prev"===e?0<t&&this._setPagerPageIndex(t-1):"to_next"===e?t<this._getPagerPageNumber()-1&&this._setPagerPageIndex(t+1):"to_prev_more"===e?this._setPagerPageIndex(at(0,t-(this._getPagerPagerCount()-2))):"to_next_more"===e&&this._setPagerPageIndex(st(this._getPagerPageNumber()-1,t+(this._getPagerPagerCount()-2)))))},updatePagerData:function(){this._updatePagerDataCount(),this._updatePagerDataRole()},_updatePagerDataCount:function(){var e=this._getPagerPagerCount()+4,t=this.getDataSize();if(t!==e)if(t<e)for(var n=t;n<e;n++)this.addData(new rr);else for(var r=this.getDataArray(),i=e;i<t;i++)this.removeData(r[i])},_updatePagerDataRole:function(){var n=this._getPagerPageNumber(),r=this._getPagerPageIndex(),i=this._getPagerPagerCount();this.clearSelect(),this.eachData(function(e,t){t=de(e,t,n,r,i);e.set("role",t),t===r&&this.setSelect(e)},this),this.update()},getDataRendererClass:function(e){return he}}),function(){he.superClass.constructor.apply(this,arguments)}),ue=(Ge(he,H,{updateRenderConfig:function(e,t,n){he.superClass.updateRenderConfig.apply(this,arguments),this._renderConfig.role=t.getProperty("role")},updateRenderer:function(e,t,n){he.superClass.updateRenderer.apply(this,arguments),Yt(this._renderer,"to_prev","to_prev"===this.getRenderConfig("role")),Yt(this._renderer,"to_next","to_next"===this.getRenderConfig("role")),Yt(this._renderer,"to_prev_more","to_prev_more"===this.getRenderConfig("role")),Yt(this._renderer,"to_next_more","to_next_more"===this.getRenderConfig("role"))}}),Ge(ae,et,{add:function(e){ae.superClass.add.apply(this,arguments),xn(e._gerRefreshWrapper(),"click",this.handleRefresh,this),xn(e._gerSizeSelect(),"change",this.handleSizeChange,this)},remove:function(e){Pn(this._view._gerRefreshWrapper(),"click",this.handleRefresh,this),Pn(this._view._gerSizeSelect(),"change",this.handleSizeChange,this),ae.superClass.remove.apply(this,arguments)},handleRefresh:function(){this._view._onRefresh(this._view.getPageConfig())},handleSizeChange:function(){var e=0|this._view._gerSizeSelect().value;this._view.set("page_size",e)}}),Ge(se,Je,{__className_:"Pagination",___zdefaults_:{layout:ze("WIDGET_PAGINATION_LAYOUT"),page_sizes:ze("WIDGET_PAGINATION_PAGE_SIZES"),page_size:ze("WIDGET_PAGINATION_PAGE_SIZE"),total_template:ze("WIDGET_PAGINATION_TOTAL_TEMPLATE"),refresh_icon_template:r.refresh,page_index:1,total:0,pager_count:ze("WIDGET_PAGINATION_PAGER_COUNT"),to_prev_icon_template:r.pagination_to_prev,to_next_icon_template:r.pagination_to_next,to_prev_more_icon_template:r.pagination_to_prev_more,to_next_more_icon_template:r.pagination_to_next_more},_initPageView:function(){this._pagerULView=new oe(this);var e=this._pagerULView.getRoot();Xt(e,"pager"),this.getRoot().appendChild(e),this._updatePageSizeSelect(),this._handlePageChange(),this._doViewLayoutUpdate()},_onViewChange:function(e,t,n){switch(se.superClass._onViewChange.apply(this,arguments),e){case"page_index":this._doViewPageIndexUpdate();break;case"page_size":this._doViewPageSizeUpdate();break;case"total":this._doViewTotalUpdate();break;case"page_sizes":this._doViewPageSizesUpdate();break;case"pager_count":this._doViewPagerCountUpdate();break;case"layout":this._doViewLayoutUpdate();break;case"total_template":this._updateTotalInfo();break;case"to_prev_icon_template":case"to_next_icon_template":case"to_prev_more_icon_template":case"to_next_more_icon_template":this._updatePagerULView();break;case"refresh_icon_template":this._doViewRefreshIconUpdate()}},_doViewPageIndexUpdate:function(){this._handlePageChange()},_doViewPageSizeUpdate:function(){this._updatePageSizeSelect(!0),this._updatePageIndex(),this._handlePageChange()},_doViewTotalUpdate:function(){this._updatePageIndex(),this._handlePageChange()},_doViewPageSizesUpdate:function(){this._updatePageSizeSelect();var e=this.getProperty("page_sizes"),t=this._getPageSize();e.indexOf(t)<0&&this.set("page_size",e[0])},_updatePageSizeSelect:function(e){var t=this.getProperty("page_sizes"),n=this._gerSizeSelect();!0===e?n.value=this._getPageSize():1<t.length?(pn(n),t.forEach(function(e){var t=We("option");t.setAttribute("value",e),t.innerHTML=e,n.appendChild(t)}),n.value=this._getPageSize()):_n(n)},_doViewPagerCountUpdate:function(){this._updatePagerULView()},_doViewLayoutUpdate:function(){var n=this.getRoot();pn(n),this.getProperty("layout").split(",").forEach(function(e){var t;switch(e){case"sizes":t=this._gerSizeSelect();break;case"pager":this._pagerULView&&(t=this._pagerULView.getRoot());break;case"total":t=this._gerTotalWrapper();break;case"refresh":t=this._gerRefreshWrapper()}t&&n.appendChild(t)},this)},_gerSizeSelect:function(){return this._sizeSelect||(this._sizeSelect=We("select","sizes"),this._sizeSelect.setAttribute("__z_dop_","size_select")),this._sizeSelect},_gerTotalWrapper:function(){return this._totalWrapper||(this._totalWrapper=We("span","total")),this._totalWrapper},_gerRefreshWrapper:function(){return this._refreshWrapper||(this._refreshWrapper=We("span","refresh"),this._refreshWrapper.setAttribute("__z_dop_","refresh"),this._refreshWrapper.innerHTML=this.getProperty("refresh_icon_template")),this._refreshWrapper},_updatePagerULView:function(){this._pagerULView&&this._pagerULView.update()},_updateTotalInfo:function(){this._gerTotalWrapper().innerHTML=Tn(this.getProperty("total_template"),this.getPageConfig())},_doViewRefreshIconUpdate:function(){this._gerRefreshWrapper().innerHTML=this.getProperty("refresh_icon_template")},_updatePageIndex:function(){var e=at(1,this._getPageNumber());return e<this._getPageIndex()&&(e=at(1,e-1),this.set("page_index",e),!0)},_handlePageChange:function(){this._pagerULView&&(this._pagerULView.updatePagerData(),this._callBatch(this._onPageChange,"page_change_cb_"))},_onPageChange:function(){var e=this.getPageConfig();if(this._updateTotalInfo(),this._currentPagerConfig){if(this._currentPagerConfig.index===e.index&&this._currentPagerConfig.size===e.size)return;e.changed=!0}this._currentPagerConfig=Ue({},e),this._callOn("onPageChange","on.page.change",e,[e])},_getPageNumber:function(){return ct(this._getTotal()/this._getPageSize())},_getPageSize:function(){return this.getProperty("page_size")},_getTotal:function(){return this.getProperty("total")},_getPagerCount:function(){return this.getProperty("pager_count")},_getPageIndex:function(){return this.getProperty("page_index")},getPageConfig:function(){var e=this._getPageIndex(),t=e-1,n=this._getPageSize(),r=t*n,i=this._getTotal(),o=0,a=0;return 0<i&&(o=t*n+1,a=st(i,(1+t)*n)),{index:e,size:n,skip:r,limit:n,offset:r,number:this._getPageNumber(),start:o,end:a,total:i}},onPageChange:function(e,t){this.addListener("on.page.change",e,t)},_onRefresh:function(e){this._callOn("onRefresh","on.page.refresh",e,[e])},onRefresh:function(e,t){this.addListener("on.page.refresh",e,t)}}),{sortable:function(e,t){e=e.getProperty("sortable");t.set("sortable",!0===e||"custom"===e)},sort_mode:"sort_mode",multiple_sort_modifier_key:"multiple_sort_modifier_key",sort_orders:"sort_orders",sort_asc_icon_template:"sort_asc_icon_template",sort_desc_icon_template:"sort_desc_icon_template",minimize_icon_template:"minimize_icon_template",minimize_width:"minimize_width",minimize_label:"minimize_label"}),_e={selectable:"selectable",auto_select:"auto_select",row_template:"row_template",expand_icon_visible:"expand_icon_visible",expand_collapsed_icon_template:"expand_collapsed_icon_template",expand_expanded_icon_template:"expand_expanded_icon_template",expand_on_click:"expand_on_click",expand_on_dbl_click:"expand_on_dbl_click",accordion:"accordion",checkbox_unchecked_icon_template:"checkbox_unchecked_icon_template",checkbox_checked_icon_template:"checkbox_checked_icon_template",checkbox_indeterminate_icon_template:"checkbox_indeterminate_icon_template",check_on_click:"check_on_click",three_states_check:"three_states_check",root_data:"root_data"},c={getOffsetHeight:function(e){return hn.getElementWindowBounds(e).height},createFixedHeadView:function(e){var t=c._createHeadView(e,function(e){if(!1===e.getProperty("visible"))return!1;e=Qn.getDataRoot(e).getProperty("fixed");return!0===e||"left"===e});return c.initHeadViewShareProperty(e,t),t},createFixedRightHeadView:function(e){var t=c._createHeadView(e,function(e){return!1!==e.getProperty("visible")&&"right"===Qn.getDataRoot(e).getProperty("fixed")});return c.initHeadViewShareProperty(e,t),t},createCenterHeadView:function(e){return c._createHeadView(e,function(e){if(!1===e.getProperty("visible"))return!1;e=Qn.getDataRoot(e).getProperty("fixed");return!0!==e&&"left"!==e&&"right"!==e})},_createHeadView:function(t,e){e=new A({isVisible:e,_hasChildrenChecked:function(e){return this.isCheckColumn(e)?pe._hasDataChecked(t):A.prototype._hasChildrenChecked.apply(this,arguments)}});return e.onViewUpdate(t._onColumnUpdate,t),e},initHeadViewShareProperty:function(n,r){Ct(ue,function(e,t){ut(t)?t(n,r):r.set(t,n.getProperty(e))},n)},createBodyView:function(e,t,n){var r=new $(c.getBodyOverridingMethods(e));return c._onBodyViewChange(e,r),!1!==n&&c.initBodyViewShareProperty(e,r),r.setTableHead(t),r},getBodyOverridingMethods:function(n){return{isHover:function(e){return n.isHover(e)},_getCellValue:function(e,t){return n._getCellValue(e,t)},_isFilterVisible:function(e){return n._isFilterVisible(e)},isVisible:function(e){return n.isVisible(e)},isCheckColumn:function(e){return n._isCheckColumn(e)},hasCheckColumn:function(){return n._hasCheckColumn()},isCheckable:function(e){return n.isCheckable(e)},isSelectable:function(e){return n.isSelectable(e)}}},_onBodyViewChange:function(t,e){e.onDataClick(function(e){t._onDataClick.apply(t,[e.data,e.event])}),e.onDataDblClick(function(e){t._onDataDblClick.apply(t,[e.data,e.event])}),e.onViewUpdate(function(){t._onBodyUpdate()})},initBodyViewShareProperty:function(n,r){Ct(_e,function(e,t){ut(t)?t(n,r):r.set(t,n.getProperty(e))},n)}},pe={bubblingBodyEventToGrid:function(t){var e=t._bodyCenterTable;e.onCheckChange(function(e){t._onCheckChange(e)},t),e.onSelectChange(function(e){t._onSelectChange(e)}),e.onSelectBatchChange(function(e){t._onSelectBatchChange(e)})},syncHeadViewProperty:function(e,t,n,r){ue.hasOwnProperty(t)&&(t=ue[t],ut(t)?(e._headCenterTable&&t(e,e._headCenterTable),e._headLeftTable&&t(e,e._headLeftTable),e._headRightTable&&t(e,e._headRightTable)):(e._headCenterTable&&e._headCenterTable.set(t,n),e._headLeftTable&&e._headLeftTable.set(t,n),e._headRightTable&&e._headRightTable.set(t,n)))},syncBodyViewProperty:function(e,t,n,r){_e.hasOwnProperty(t)&&(t=_e[t],ut(t)?(e._bodyCenterTable&&t(e,e._bodyCenterTable),e._bodyLeftTable&&t(e,e._bodyLeftTable),e._bodyRightTable&&t(e,e._bodyRightTable)):(e._bodyCenterTable&&e._bodyCenterTable.set(t,n),e._bodyLeftTable&&e._bodyLeftTable.set(t,n),e._bodyRightTable&&e._bodyRightTable.set(t,n)))},syncBodyHeadCheck:function(t){t._headCenterTable.onCheckChange(function(e){pe._syncBodyCheckFromHead(t)}),t._bodyCenterTable.onCheckChange(function(e){t._callBatch(function(){pe._syncHeadCheckFromBody(t)},"sync_head_check_from_body__cb_")}),t._bodyCenterTable.onModelChange(function(e){e=e.type;"set_provider"!==e&&"provider"!==e||t._callBatch(function(){pe._syncHeadCheckFromBody(t)},"sync_head_check_from_body__cb_")})},_syncHeadCheckFromBody:function(e){var t,n,r,i,o;!0!==e._$is_sync_body_head_check_columning&&(e._$is_sync_body_head_check_columning=!0,!(t=e._columnProvider)||(t=t._checkColumn)&&(n=pe._isAllDataChecked(e),i=(r=pe._getCheckColumnTable(e)).isChecked(t),o=!0,n?i||(r.addCheck(t),o=!1):i&&(r.removeCheck(t),o=!1),o&&r._updateData(t)),delete e._$is_sync_body_head_check_columning)},_syncBodyCheckFromHead:function(e){var t,n;!0!==e._$is_sync_body_head_check_columning&&(e._$is_sync_body_head_check_columning=!0,!(t=e._columnProvider)||(t=t._checkColumn)&&((n=e._headCenterTable).isChecked(t)?(e._bodyCenterTable.checkAll(),pe._isAllDataChecked(e)||n.removeCheck(t)):e._bodyCenterTable.clearCheck()),delete e._$is_sync_body_head_check_columning)},_isAllDataChecked:function(e){var t=e._bodyCenterTable.getDataArray(!1).length;return 0<t&&e._bodyCenterTable.getChecked(!1).length===t},_hasDataChecked:function(e){return 0<e._bodyCenterTable.getChecked(!1).length},_getCheckColumnTable:function(e){var t=e._columnProvider;if(t){var n,t=t._checkColumn;if(t)return(n=e._hasColumnFixed&&e._headLeftTable.isVisible(t)?e._headLeftTable:n)||e._hasColumnFixedRight&&e._headRightTable.isVisible(t)&&(n=e._headRightTable),n=n||e._headCenterTable}},syncColGroupUpdate:function(e,t){e.setCallBack("onColGroupChange",function(e){Rt(function(){t._tableColGroup.innerHTML=e.innerHTML})})}},fe=function(e){var t=!1,n=!1;return e.toRootArray(!1).forEach(function(e){e=e.getProperty("fixed");!0===e||"left"===e?t=!0:"right"===e&&(n=!0)}),{fixed:t,fixed_right:n}};Ge(le,et,{add:function(e){le.superClass.add.apply(this,arguments),xn(e._vScrollbarDiv,"scroll",this.handleVScroll,this),xn(e._hScrollbarDiv,"scroll",this.handleHScroll,this),xn(e._bodyCenterDiv,"touchstart",this.handleTouchStart,this),xn(e._bodyCenterDiv,"touchmove",this.handleTouchMove,this),xn(e._bodyCenterDiv,"touchend",this.handleTouchEnd,this)},remove:function(){var e=this._view;Pn(e._vScrollbarDiv,"scroll",this.handleVScroll,this),Pn(e._hScrollbarDiv,"scroll",this.handleHScroll,this),Pn(e._bodyCenterDiv,"touchstart",this.handleTouchStart,this),Pn(e._bodyCenterDiv,"touchmove",this.handleTouchMove,this),Pn(e._bodyCenterDiv,"touchend",this.handleTouchEnd,this),le.superClass.remove.apply(this,arguments)},getViewDefaultTypes:function(){return["keydown","wheel"]},handle_keydown:function(e,t){var n,r=e.keyCode,i=t._vScrollbarDiv,i=(i.parentNode&&(n=i.scrollTop,38===r?i.scrollTop-=20:40===r?i.scrollTop+=20:33===r?i.scrollTop-=t._bodyDiv.clientHeight-3:34===r&&(i.scrollTop+=t._bodyDiv.clientHeight-3),38!==r&&40!==r&&33!==r&&34!==r||i.scrollTop!==n&&e.preventDefault()),t._hScrollbarDiv);i.parentNode&&(n=i.scrollLeft,37===r?i.scrollLeft-=20:39===r&&(i.scrollLeft+=20),37!==r&&39!==r||i.scrollLeft!==n&&e.preventDefault())},handle_wheel:function(e,t){var n=e.wheelDelta<0||0<e.deltaY||0<e.detail,r=t._vScrollbarDiv,t=t._hScrollbarDiv,i=e.target,o="v";"v"===(o=t.contains(i)?"h":o)?r.parentNode||(o=null):t.parentNode||(o=null),"v"===o?(i=r.scrollTop,n?r.scrollTop+=30:r.scrollTop-=30,r.scrollTop!==i&&e.preventDefault()):"h"===o&&(r=t.scrollLeft,n?t.scrollLeft+=20:t.scrollLeft-=20,t.scrollLeft!==r&&(e.preventDefault(),this._view._syncBodyHScroll()))},handleTouchStart:function(e){(this._view._hScrollbarDiv.parentNode||this._view._vScrollbarDiv.parentNode)&&(this._touchPoint=this._getTouchPoint(e))},handleTouchMove:function(e){var t,n;this._touchPoint&&(e.preventDefault(),t=(e=this._getTouchPoint(e)).x-this._touchPoint.x,n=e.y-this._touchPoint.y,ot(t)>ot(n)?this._view._hScrollbarDiv.parentNode&&(this._view._hScrollbarDiv.scrollLeft-=t):this._view._vScrollbarDiv.parentNode&&(this._view._vScrollbarDiv.scrollTop-=n),this._touchPoint=e)},handleTouchEnd:function(e){this._touchPoint=null},_getTouchPoint:function(e){e=e.touches[0];return{x:e.clientX,y:e.clientY}},handleVScroll:function(){this._view._syncBodyVScroll()},handleHScroll:function(){this._view._syncBodyHScroll()}});Ge(ce,Ye,Ue({__className_:"Grid",___zdefaults_:Ue({onresize:!0,overflow:"hidden",pageable:!1,hoverable:!1,selectable:!1,make_visible_on_select:!0},e(),n(),u()),_onViewChange:function(e,t,n){ce.superClass._onViewChange.apply(this,arguments),"pageable"!==e?("overflow"===e&&this._doViewOverflowUpdate(),pe.syncHeadViewProperty(this,e,t,n),pe.syncBodyViewProperty(this,e,t,n),this.update()):this._doViewPagerUpdate(e,t,n)},_doViewOverflowUpdate:function(){Yt(this.getRoot(),"overflow-scroll","scroll"===this.getProperty("overflow"))},makeVisible:function(e){var t;!e||(t=this._bodyCenterTable.getDataRendererElement(e))&&Rt(function(){un.scrollIntoView(t,this._getScrollView()),this._syncVScrollByBody()},this)},_getScrollView:function(){return this._bodyDiv}},{_initGridView:function(){this._headDiv=We("div","head"),this._headLeftDiv=We("div","left"),this._headCenterDiv=We("div","center"),this._headRightDiv=We("div","right"),this._headDiv.appendChild(this._headCenterDiv),this._headDiv.appendChild(this._headLeftDiv),this._headDiv.appendChild(this._headRightDiv),this._bodyDiv=We("div","body"),this._bodyLeftDiv=We("div","left"),this._bodyCenterDiv=We("div","center"),this._bodyRightDiv=We("div","right"),this._bodyDiv.appendChild(this._bodyCenterDiv),this._bodyDiv.appendChild(this._bodyLeftDiv),this._bodyDiv.appendChild(this._bodyRightDiv),this._pagerDiv=We("div","pager"),this._vScrollbarHeightDiv=We("div"),this._vScrollbarDiv=We("div","v-scrollbar"),this._vScrollbarDiv.appendChild(this._vScrollbarHeightDiv),this._hScrollbarHeightDiv=We("div","scroll"),this._hScrollbarDiv=We("div","h-scrollbar"),this._hScrollbarDiv.appendChild(this._hScrollbarHeightDiv),this._headCenterTable=c.createCenterHeadView(this),this._headCenterTableRoot=this._headCenterTable.getRoot(),this._headCenterDiv.appendChild(this._headCenterTableRoot),this._bodyCenterTable=this._createBodyView(this._headCenterTable,!1),this._bodyCenterTableRoot=this._bodyCenterTable.getRoot(),this._bodyCenterDiv.appendChild(this._bodyCenterTableRoot),pe.syncBodyHeadCheck(this)},_initCenterTables:function(){c.initHeadViewShareProperty(this,this._headCenterTable),c.initBodyViewShareProperty(this,this._bodyCenterTable),pe.syncColGroupUpdate(this._headCenterTable,this._bodyCenterTable),pe.bubblingBodyEventToGrid(this)}},{_onProviderChange:function(){ce.superClass._onProviderChange.apply(this,arguments),this._bodyCenterTable.setProvider(this.getProvider()),this._hasColumnFixed&&this._bodyLeftTable.setProvider(this.getProvider()),this._hasColumnFixedRight&&this._bodyRightTable.setProvider(this.getProvider())},_updateBodyData:function(e){e&&(this._bodyCenterTable&&this._bodyCenterTable._updateData(e),this._bodyLeftTable&&this._bodyLeftTable._updateData(e),this._bodyRightTable&&this._bodyRightTable._updateData(e))},_updateBodyAllData:function(){this._bodyCenterTable&&this._bodyCenterTable._updateAllData(),this._bodyLeftTable&&this._bodyLeftTable._updateAllData(),this._bodyRightTable&&this._bodyRightTable._updateAllData()},_updateHeadColumn:function(e){e&&(this._headCenterTable&&this._headCenterTable._updateData(e),this._headLeftTable&&this._headLeftTable._updateData(e),this._headRightTable&&this._headRightTable._updateData(e))},update:function(e,t){!0!==t?(ce.superClass.update.apply(this,arguments),this._updateBody(e),this._headCenterTable&&this._headCenterTable.update(e),this._headLeftTable&&this._headLeftTable.update(e),this._headRightTable&&this._headRightTable.update(e)):this._updateBody(e)},_updateBody:function(e){this._bodyCenterTable&&this._bodyCenterTable.update(e),this._bodyLeftTable&&this._bodyLeftTable.update(e),this._bodyRightTable&&this._bodyRightTable.update(e)}},{_initDefaultColumns:function(){this._columnProvider=new qe,this._headCenterTable.setProvider(this._columnProvider),this._addColumnProviderListener()},setColumns:function(e,t){dt(e)||(e=[e]);e=tr.parse(e),!0===t&&e.forEach(function(e){e._bind(e.get("_$z_data"))}),t=new qe;t.add(e),l.updateColumnSortIndex(t),this._setColumnProvider(t)},findColumn:function(e,t){return this._columnProvider.find.apply(this._columnProvider,arguments)},getColumnArray:function(e){return this._columnProvider.toArray.apply(this._columnProvider,arguments)},_beforeSetColumnProvider:function(e){e._checkColumn=e.find(function(e){return"check"===e.getProperty("type")&&!e.hasChildren()&&!e.getProperty("parent")})},_setColumnProvider:function(e){this._beforeSetColumnProvider(e),this._removeColumnProviderListener(),this._columnProvider=e,this._updateFixedColumns(),this._headCenterTable.setProvider(e),this._hasColumnFixed&&this._headLeftTable.setProvider(e),this._hasColumnFixedRight&&this._headRightTable.setProvider(e),this._addColumnProviderListener(),this._onColumnChange("set_provider"),this._sortBodyData()},_isCheckColumn:function(e){return!!e&&this._columnProvider._checkColumn===e},_hasCheckColumn:function(){return null!=this._columnProvider._checkColumn},_addColumnProviderListener:function(){this._columnProvider.addProviderChangeListener(this._handleColumnProviderChange,this),this._columnProvider.addDataChangeListener(this._handleColumnChange,this),this._columnProvider.removeIndexChangeListener(this._handleColumnIndexChange,this)},_removeColumnProviderListener:function(){this._columnProvider&&(this._columnProvider.removeProviderChangeListener(this._handleColumnProviderChange,this),this._columnProvider.removeDataChangeListener(this._handleColumnChange,this),this._columnProvider.removeIndexChangeListener(this._handleColumnIndexChange,this))},_handleColumnProviderChange:function(e){this._updateFixedColumns(),l.updateColumnSortIndex(this._columnProvider),this._onColumnChange("provider",e)},_handleColumnChange:function(e){var t=e.property;"fixed"===t?this._updateFixedColumns():"sort"===t&&this._onSortChange(),this._onColumnChange("data",e)},_handleColumnIndexChange:function(e){this._onModelChange("index",e)},_onColumnChange:function(e,t){this._callOn("onColumnChange","on.column.change",{type:e,event:t},[e,t])},onColumnChange:function(e,t){this.addListener("on.column.change",e,t)},_updateFixedColumns:function(){var e=this._columnProvider,e=fe(e);this._hasColumnFixed===e.fixed&&this._hasColumnFixedRight===e.fixed_right||(this._hasColumnFixed=e.fixed,this._hasColumnFixedRight=e.fixed_right,this._hasColumnFixed?this._createLeftTables():this._removeFixedTable(this._headLeftTable,this._bodyLeftTable),this._hasColumnFixedRight?this._createRightTables():this._removeFixedTable(this._headRightTable,this._bodyRightTable))},_createLeftTables:function(){this._headLeftTable||(this._headLeftTable=c.createFixedHeadView(this)),this._bodyLeftTable||(this._bodyLeftTable=this._createBodyView(this._headLeftTable),pe.syncColGroupUpdate(this._headLeftTable,this._bodyLeftTable));var e=this._headLeftTable.getRoot(),e=(e.parentNode||(this._headLeftDiv.appendChild(e),this._headLeftTable.setProvider(this._columnProvider)),this._bodyLeftTable.getRoot());e.parentNode||(this._bodyLeftDiv.appendChild(e),this._bodyLeftTable.setProvider(this.getProvider())),this._bodyLeftTable.set("sort_compare",this._getSortCompare())},_createRightTables:function(){this._headRightTable||(this._headRightTable=c.createFixedRightHeadView(this)),this._bodyRightTable||(this._bodyRightTable=this._createBodyView(this._headRightTable),pe.syncColGroupUpdate(this._headRightTable,this._bodyRightTable));var e=this._headRightTable.getRoot(),e=(e.parentNode||(this._headRightDiv.appendChild(e),this._headRightTable.setProvider(this._columnProvider)),this._bodyRightTable.getRoot());e.parentNode||(this._bodyRightDiv.appendChild(e),this._bodyRightTable.setProvider(this.getProvider())),this._bodyRightTable.set("sort_compare",this._getSortCompare())},_removeFixedTable:function(e,t){t&&(_n(t.getRoot()),t.setProvider(new qe)),e&&(_n(e.getRoot()),e.setProvider(new qe))},_createBodyView:function(e,t){return c.createBodyView(this,e,t)}},{_onSortChange:function(){this._callBatch(this._onSortBatchChange,"sort_batch_change__cb_")},_onSortBatchChange:function(){var e=this.getSortConfig();"custom"!==this.getProperty("sortable")&&this._sortBodyData(),this._callOn("onSortChange","on.column.sort.change",e,[e])},_sortBodyData:function(){var e=this._getSortCompare();this._hasColumnFixed&&this._bodyLeftTable.set("sort_compare",e),this._hasColumnFixedRight&&this._bodyRightTable.set("sort_compare",e),this._bodyCenterTable.set("sort_compare",e)},onSortChange:function(e,t){this.addListener("on.column.sort.change",e,t)},clearSort:function(){l.clearColumnSort(this._columnProvider)},getSortConfig:function(){var n,e=l.getSortedColumnArray(this._columnProvider);return 0<e.length?"multiple"===this.getProperty("sort_mode")?(n=[],e.forEach(function(e,t){n.push({field:e.getProperty("field"),order:l.getSortOrder(e.getProperty("sort")),index:t})}),n):((e=e[0]).getProperty("sort"),{field:e.getProperty("field"),order:l.getSortOrder(e.getProperty("sort"))}):null},_getSortCompare:function(){return l.getSortCompare(this,this._columnProvider)}},{_doViewPagerUpdate:function(){var e=this.getProperty("pageable");!0===e?this._addPager():Ne(e)?this._addPager(e):this._removePager()},_addPager:function(e){this._pager||(this._pager=new se,this._pagerDiv.appendChild(this._pager.getRoot()),this._pager.setCallBack("onPageChange",this._onPageChange,this),this._pager.setCallBack("onRefresh",this._onPageRefresh,this)),e&&this._pager.set(e)},_removePager:function(){this._pager&&(this._pager.resetCallBack("onPageChange"),this._pager.resetCallBack("onRefresh"),pn(this._pagerDiv),this._pager=null)},_onPageChange:function(e){this._callOn("onPageChange","on.page.change",e,[e])},onPageChange:function(e,t){this.addListener("on.page.change",e,t)},_onPageRefresh:function(e){this._callOn("onPageRefresh","on.page.refresh",e,[e])},onPageRefresh:function(e,t){this.addListener("on.page.refresh",e,t)},getPagination:function(){return this._pager},getPageConfig:function(){if(this._pager)return this._pager.getPageConfig()}},{_onColumnUpdate:function(){this._callBatch(this._doColumnUpdateSync,"_do_column_update_sync_cb_")},_doColumnUpdateSync:function(){this._syncHeadRowHeight(),this._bodyCenterTable.update(),this._hasColumnFixed&&this._bodyLeftTable.update(),this._hasColumnFixedRight&&this._bodyRightTable.update()},_onBodyUpdate:function(){this._callBatch(this._doBodyUpdateSync,"_do_body_update_sync_cb_")},_doBodyUpdateSync:function(){this._updateLayout(),this._syncBodyRowHeight()},_doResizeUpdate:function(){ce.superClass._doResizeUpdate.apply(this,arguments),this._syncHeadRowHeight(),this._syncBodyRowHeight(),this._updateLayout()},_updateLayout:function(){var e=this.getRootSize();e.height<=0||e.width<=0||(this._updateFixedLayout(),this._updateFixedRightLayout(),this._updateScrollbar())},_updateScrollbar:function(){var e=this.getRoot(),t=this.getRootSize(),n=t.height,r=c.getOffsetHeight(this._headDiv),i=c.getOffsetHeight(this._pagerDiv),n=lt(n-r-i),i=t.width,t=this._headCenterDiv.scrollWidth,o=1<t-i,a=(o&&(this._hScrollbarDiv.parentNode||e.insertBefore(this._hScrollbarDiv,this._pagerDiv),n-=c.getOffsetHeight(this._hScrollbarDiv)),He(this._bodyDiv,"margin-top",r+"px"),!1);"scroll"===this.getProperty("overflow")&&(1<ot(n-c.getOffsetHeight(this._bodyDiv))&&He(this._bodyDiv,"height",n+"px"),a=c.getOffsetHeight(this._bodyCenterDiv)>n),a?(this._vScrollbarDiv.parentNode||e.appendChild(this._vScrollbarDiv),i-=this._vScrollbarDiv.offsetWidth-1,He(this._vScrollbarDiv,"height",n+r+"px"),He(this._vScrollbarHeightDiv,"height",this._bodyDiv.scrollHeight+r+"px"),He(this._headDiv,"width",i+"px"),He(this._bodyDiv,"width",i+"px"),this._syncVScrollByBody()):(_n(this._vScrollbarDiv),tn(this._headDiv,"width"),tn(this._bodyDiv,"width")),o?(He(this._hScrollbarDiv,"width",i+"px"),He(this._hScrollbarHeightDiv,"width",t+"px")):_n(this._hScrollbarDiv)},_updateFixedLayout:function(){var e,t=0;this._hasColumnFixed&&(e=t=this._headLeftTable._getColGroupWidth(),0<t&&(e+=1),He(this._headLeftDiv,"width",e+"px"),He(this._bodyLeftDiv,"width",e+"px")),He(this._headCenterTableRoot,"padding-left",t+"px"),He(this._bodyCenterTableRoot,"padding-left",t+"px")},_updateFixedRightLayout:function(){var e,t=0;this._hasColumnFixedRight&&(e=t=this._headRightTable._getColGroupWidth(),0<t&&(e+=1),He(this._headRightDiv,"width",e+"px"),He(this._bodyRightDiv,"width",e+"px")),He(this._headCenterTableRoot,"padding-right",t+"px"),He(this._bodyCenterTableRoot,"padding-right",t+"px")},_syncHeadRowHeight:function(){var n,e=[this._headCenterTable];this._hasColumnFixed&&e.push(this._headLeftTable),this._hasColumnFixedRight&&e.push(this._headRightTable),e.forEach(function(e){e.getRowTRArray().forEach(function(e){tn(e,"height")})}),1<e.length&&(n=[],e.forEach(function(e){e.getRowTRArray().forEach(function(e,t){n[t]=at(0|n[t],e.offsetHeight+1)})}),e.forEach(function(e){e.getRowTRArray().forEach(function(e,t){He(e,"height",n[t]+"px")})}))},_syncBodyRowHeight:function(){var n,e=[this._bodyCenterTable],r=(this._hasColumnFixed&&e.push(this._bodyLeftTable),this._hasColumnFixedRight&&e.push(this._bodyRightTable),[]);e.forEach(function(e,t){e=Wt("tr[__z_did_]",e._tableBody);(r[t]=e).forEach(function(e){tn(e,"height")})}),1<e.length&&(n=[],r.forEach(function(e){e.forEach(function(e,t){n[t]=at(0|n[t],e.offsetHeight+1)})}),r.forEach(function(e){e.forEach(function(e,t){He(e,"height",n[t]+"px")})}))}},{_syncBodyVScroll:function(){this._bodyDiv.scrollTop=this._vScrollbarDiv.scrollTop},_syncBodyHScroll:function(){this._headCenterDiv.scrollLeft=this._hScrollbarDiv.scrollLeft,this._bodyCenterDiv.scrollLeft=this._hScrollbarDiv.scrollLeft},_syncVScrollByBody:function(){this._vScrollbarDiv.scrollTop=this._bodyDiv.scrollTop}},{_getCellValue:function(e,t){return this.getCellValue(e,t)},getCellValue:function(e,t){return ne(e,t)}},{getDataAt:function(e){var t,e=bn.getEventTarget(e,"[__z_did_]");return e?(t=e.getAttribute("__z_did_"),yt(this.getDataArray(!1),function(e){return e.id()===t})):null}},Ke(ce),{_onHoverChange:function(e,t){this._updateBodyData(e),this._callOn("onHoverChange","on.hover.change",{data:e,isHover:t},[e,t])}},{check:function(e,t){return this._bodyCenterTable.check.apply(this._bodyCenterTable,arguments)},uncheck:function(e){return this._bodyCenterTable.uncheck.apply(this._bodyCenterTable,arguments)},addCheck:function(e){return this._bodyCenterTable.addCheck.apply(this._bodyCenterTable,arguments)},removeCheck:function(e){return this._bodyCenterTable.removeCheck.apply(this._bodyCenterTable,arguments)},clearCheck:function(){return this._bodyCenterTable.clearCheck.apply(this._bodyCenterTable,arguments)},setCheck:function(e){return this._bodyCenterTable.setCheck.apply(this._bodyCenterTable,arguments)},checkAll:function(e){return this._bodyCenterTable.checkAll.apply(this._bodyCenterTable,arguments)},toggleCheck:function(e){return this._bodyCenterTable.toggleCheck.apply(this._bodyCenterTable,arguments)},getChecked:function(e){return this._bodyCenterTable.getChecked.apply(this._bodyCenterTable,arguments)},isChecked:function(e){return this._bodyCenterTable.isChecked.apply(this._bodyCenterTable,arguments)},isCheckable:function(e){return!1!==this.getDataViewProperty(e,"checkable")},_onCheckChange:function(e){this._callOn("onCheckChange","on.check.change",e,[e])},onCheckChange:function(e,t){this.addListener("on.check.change",e,t)}},{isSelectable:function(e){return!0===this.getDataViewProperty(e,"selectable")},select:function(e,t){return this._bodyCenterTable.select.apply(this._bodyCenterTable,arguments)},unselect:function(e){return this._bodyCenterTable.unselect.apply(this._bodyCenterTable,arguments)},addSelect:function(e){return this._bodyCenterTable.addSelect.apply(this._bodyCenterTable,arguments)},removeSelect:function(e){return this._bodyCenterTable.removeSelect.apply(this._bodyCenterTable,arguments)},clearSelect:function(){return this._bodyCenterTable.clearSelect.apply(this._bodyCenterTable,arguments)},setSelect:function(e){return this._bodyCenterTable.setSelect.apply(this._bodyCenterTable,arguments)},selectAll:function(e){return this._bodyCenterTable.selectAll.apply(this._bodyCenterTable,arguments)},getSelected:function(e){return this._bodyCenterTable.getSelected.apply(this._bodyCenterTable,arguments)},getLastSelected:function(){return this._bodyCenterTable.getLastSelected.apply(this._bodyCenterTable,arguments)},isSelected:function(e){return this._bodyCenterTable.isSelected.apply(this._bodyCenterTable,arguments)},_onSelectChange:function(e){this._callOn("onSelectChange","on.select.change",e,[e])},onSelectChange:function(e,t){this.addListener("on.select.change",e,t)},_onSelectBatchChange:function(e){this._callOn("onSelectBatchChange","on.select.batch.change",e,[e]),0<e.length&&!0===this.getProperty("make_visible_on_select")&&this.makeVisible(this.getLastSelected())},onSelectBatchChange:function(e,t){this.addListener("on.select.batch.change",e,t)}},{}));function ge(){return this instanceof ge?sn.isElement(e=arguments[0])?f.parseView("zw-treegrid",e):(ge.superClass.constructor.apply(this,arguments),we(this),void Xt(this.getRoot(),"z-treegrid")):xt.createInstance(ge,arguments);var e}function ye(){ye.superClass.constructor.apply(this,arguments)}function ve(){ve.superClass.constructor.apply(this,arguments)}function Ce(){return this instanceof Ce?sn.isElement(e=arguments[0])?f.parseView("zw-menu",e):(Ce.superClass.constructor.apply(this,arguments),Xt(this.getRoot(),"z-menu"),this._ToggleModeClass(),void this.addController(new ye)):xt.createInstance(Ce,arguments);var e}function me(){me.superClass.constructor.apply(this,arguments)}function be(){this._headerDiv=We("div","header "),this._bodyDiv=We("div","body"),this._closeWrapper=We("span","close"),be.superClass.constructor.apply(this,arguments);var e=this.getRoot();I.addWidgetClass(e),Xt(e,"popup"),e.appendChild(this._headerDiv),e.appendChild(this._bodyDiv),this.addController(new me)}function xe(){xe.superClass.constructor.apply(this,arguments);var e=this.getRoot();this._arrowDiv=We("div","arrow"),e.insertBefore(this._arrowDiv,e.firstElementChild)}var Pe=function(t,e,n){var r=new X(Ue(c.getBodyOverridingMethods(t),{isTreeColumn:function(e){return t._isTreeColumn(e)},hasChildrenVisible:function(e){return t.hasChildrenVisible?t.hasChildrenVisible(e):X.prototype.hasChildrenVisible.apply(this,arguments)}}));return c._onBodyViewChange(t,r),!1!==n&&c.initBodyViewShareProperty(t,r),r.setTableHead(e),r},we=function(t){var e=t._bodyCenterTable;e.onExpand(function(e){t._onExpandAdd.apply(t,arguments)}),e.onCollapse(function(e){t._onExpandRemove.apply(t,arguments)}),e.onCollapseAll(function(e){t._onExpandClear.apply(t,arguments)}),e.onExpandSet(function(e){t._onExpandSet.apply(t,arguments)}),e.onExpandChange(function(e){t._onExpandChange.apply(t,arguments)})},Re=(Ge(ge,ce,{__className_:"TreeGrid",___zdefaults_:Ue(t()),_createBodyView:function(e,t){return Pe(this,e,t)},_beforeSetColumnProvider:function(e){ge.superClass._beforeSetColumnProvider.apply(this,arguments);var t=(t=e.find(function(e){return!0===e.getProperty("tree")&&!e.hasChildren()}))||((t=e._checkColumn)||e.find(function(e){return!e.hasChildren()}));e._treeColumn=t},_isTreeColumn:function(e){return!!e&&this._columnProvider._treeColumn===e},makeVisible:function(e){e&&(Qn.getAncestorArray(e).forEach(function(e){this.expand(e)},this),ge.superClass.makeVisible.apply(this,arguments))},getExpanded:function(e){return this._bodyCenterTable.getExpanded.apply(this._bodyCenterTable,arguments)},expand:function(e){return this._bodyCenterTable.expand.apply(this._bodyCenterTable,arguments)},collapse:function(e){return this._bodyCenterTable.collapse.apply(this._bodyCenterTable,arguments)},expandAll:function(e){return this._bodyCenterTable.expandAll.apply(this._bodyCenterTable,arguments)},collapseAll:function(){return this._bodyCenterTable.collapseAll.apply(this._bodyCenterTable,arguments)},toggleExpand:function(e){return this._bodyCenterTable.toggleExpand.apply(this._bodyCenterTable,arguments)},isExpanded:function(e){return this._bodyCenterTable.isExpanded.apply(this._bodyCenterTable,arguments)},_onExpandAdd:function(e){this._callOn("onExpand","on.expand.add",e,[e])},onExpand:function(e,t){this.addListener("on.expand.add",e,t)},_onExpandRemove:function(e){this._callOn("onCollapse","on.expand.remove",e,[e])},onCollapse:function(e,t){this.addListener("on.expand.remove",e,t)},_onExpandClear:function(e){this._callOn("onCollapseAll","on.expand.clear",e,[e])},onCollapseAll:function(e,t){this.addListener("on.expand.clear",e,t)},_onExpandSet:function(e){this._callOn("onExpandSet","on.expand.set",e,[e])},onExpandSet:function(e,t){this.addListener("on.expand.set",e,t)},_onExpandChange:function(e){this._callOn("onExpandChange","on.expand.change",e,[e])},onExpandChange:function(e,t){this.addListener("on.expand.change",e,t)}}),{ROOT_POP_DIRECTION_MAP:{down:"down_right",down_right:"down_right",down_left:"down_left",up:"up_right",up_right:"up_right",up_left:"up_left",right:"right_down",right_down:"right_down",right_up:"right_up",left:"left_down",left_down:"left_down",left_up:"left_up",default:"down_right"},SUB_POP_DIRECTION_MAP:{down:"right_down",down_right:"right_down",down_left:"left_down",up:"right_up",up_right:"right_up",up_left:"left_up",right:"right_down",right_down:"right_down",right_up:"right_up",left:"left_down",left_down:"left_down",left_up:"left_up",default:"right_down"},getPopDirection:function(e,t){var n=null==(n=e.getProperty("direction"))?e._isVertical()?"right":"bottom":n.toLowerCase();return Re.isRootMenu(t)?Re.ROOT_POP_DIRECTION_MAP[n]||Re.ROOT_POP_DIRECTION_MAP.default:Re.SUB_POP_DIRECTION_MAP[n]||Re.SUB_POP_DIRECTION_MAP.default},isRootMenu:function(e){return null==e.getProperty("parent")},getMenuExpandExpandedTemplate:function(e){if(Re.isRootMenu(data))return view._renderConfig.root}}),d=(Ge(ye,et,{getViewDefaultTypes:function(){return["blur","click"]},handle_blur:function(){"debug"!==h.focus_ui_mode&&this.getView().collapseAll()},handle_click:function(e,t){t.getDataAt(e)||(t.collapseAll(),t._setHoverData(null,!0,e))},add:function(e){ye.superClass.add.apply(this,arguments),this.getView().getRoot().setAttribute("tabindex",0)},remove:function(){this.getView().getRoot().removeAttribute("tabindex"),ye.superClass.remove.apply(this,arguments)}}),Ge(ve,W,{updateRenderConfig:function(e,t,n){e.isDivider(t)?n.divider=!0:(ve.superClass.updateRenderConfig.apply(this,arguments),this._updateMenuRenderConfig(e,t,n))},_updateMenuRenderConfig:function(e,t,n){var r=Re.isRootMenu(t);n.root_menu=r,!0===this.getRenderConfig("has_children")&&(n.pop_direction=Re.getPopDirection(e,t),r&&(n.expand_icon_visible=!0===e.getDataViewProperty(t,"expand_icon_visible","root_expand_icon_visible")))},updateRenderer:function(e,t,n){var r=!0===this.getRenderConfig("divider");Yt(this._renderer,"divider",r),r||(ve.superClass.updateRenderer.apply(this,arguments),Kt(this._renderer,"down_right down_left up_right up_left right_down right_up left_down left_up"),(r=this.getRenderConfig("pop_direction"))&&Xt(this._renderer,r),Yt(this._renderer,!0===this.getRenderConfig("root_menu")&&!0===this.getRenderConfig("expand_icon_visible")))},_getExpandTemplate:function(){var e,t,n=!0===this.getRenderConfig("expanded");return!0===this.getRenderConfig("root_menu")?(t=n?this.getViewRenderConfig("root_expand_expanded_icon_template"):this.getViewRenderConfig("root_expand_collapsed_icon_template"))||(e=this.getRenderConfig("pop_direction"))&&(t=this.getViewRenderConfig("expand_"+e.split("_")[0]+"_icon_template")):t=(t=n?this.getViewRenderConfig("expand_expanded_icon_template"):this.getViewRenderConfig("expand_collapsed_icon_template"))||this.getViewRenderConfig("expand_right_icon_template"),t}}),Ge(Ce,R,Ue({__className_:"Menu",___zdefaults_:{selectable:!1,expand_on_click:!1,accordion:!0,hoverable:!0,three_states_check:!1,check_on_click:!0,hover_delay:200,mode:"horizontal",direction:null,root_expand_icon_visible:!1,root_expand_expanded_icon_template:null,root_expand_collapsed_icon_template:null,expand_icon_visible:!0,expand_expanded_icon_template:null,expand_collapsed_icon_template:null,expand_up_icon_template:S,expand_down_icon_template:E,expand_left_icon_template:k,expand_right_icon_template:L,open_on_hover:!1,close_on_click:!0},_displayToResize:function(){Ce.superClass._displayToResize.apply(this,arguments);var e=this.getRoot().parentNode;e&&He(e,"overflow","visible")},_onViewChange:function(e,t,n){Ce.superClass._onViewChange.apply(this,arguments),this._doMenuViewUpdate(e)},_doMenuViewUpdate:function(e,t,n){"mode"===e&&this._ToggleModeClass()},_ToggleModeClass:function(){Yt(this.getRoot(),"horizontal",!this._isVertical()),Yt(this.getRoot(),"vertical",this._isVertical())},_isVertical:function(){return"vertical"===this.getProperty("mode")},_onExpandChange:function(){Ce.superClass._onExpandChange.apply(this,arguments),this._hasExpanded()&&this.getRoot().focus({preventScroll:!0})},_setHoverData:function(){var e=this._hoverData,t=(Ce.superClass._setHoverData.apply(this,arguments),this._hoverData);e!==t&&this._handleExpandByHover(e,t)},_handleExpandByHover:function(e,t){var n,r;t?(n=Re.isRootMenu(t),r=this._hasExpanded(),e&&this.isExpanded(e)&&!Qn.isDescendantOf(t,e)&&(!n||!Re.isRootMenu(e)||this.isExpandable(t)&&this._hasDescendantVisible(t)||!1!==this.getProperty("open_on_hover"))&&this.collapse(e),n&&!r&&!1===this.getProperty("open_on_hover")||this._expandByHover(t)):e&&this.isExpanded(e)&&(Re.isRootMenu(e)&&!1===this.getProperty("open_on_hover")||this.collapse(e))},_expandByHover:function(e){var t;this.isExpandable(e)&&this._hasDescendantVisible(e)&&(t=this.getProperty("hover_delay"),!Re.isRootMenu(e)&&0<t?wt(function(){this._hoverData&&this.expand(this._hoverData)},t,this):this.expand(e))},_onDataClick:function(e,t){Re.isRootMenu(e)?this._isExpandable(e)?this.toggleExpand(e):this.collapseAll():!1===this.getProperty("close_on_click")||this.hasChildrenVisible(e)||this.collapseAll(),this.hasChildrenVisible(e)||this._onMenuItemClick(e,t),Ce.superClass._onDataClick.apply(this,arguments)},_onMenuItemClick:function(e,t){this._callOn("onMenuItemClick","on.menu.item.click",{data:e,event:t},[e,t])},onMenuItemClick:function(e,t){this.addListener("on.menu.item.click",e,t)},_hasExpanded:function(){return 0<this._expandProvider.size()},getDataRendererClass:function(e){return ve},isDivider:function(e){return!0===e.getProperty("divider")}},{_isAccordion:function(){return!0},_isDisabled:function(e){return this.isDivider(e)||this.isDisabled(e)},makeVisible:function(){}})),{_CachedPopUpViewMap:{},addCacheView:function(e){var t=e.getClassName(),n=d._CachedPopUpViewMap[t];n||(d._CachedPopUpViewMap[t]=n=[]),n.push(e)},removeCacheView:function(e){var t=e.getClassName(),t=d._CachedPopUpViewMap[t];t&&vt(t,e)},closeAll:function(e){pt([],d._CachedPopUpViewMap[e]).forEach(function(e){e.close()})},z_index:1e4,open:function(e,t){d.addCacheView(e),this.completeAnimations(e);var n=e.getRoot(),r=(e._beforeOpen(),en(n,"opacity"));He(n,"opacity",0),He(n,"left","-10100px"),d.resetStaticPosition(t),t.appendChild(n),Rt(function(){d.startAnimations(e),He(n,"opacity",r),"-10100px"===en(n,"left")&&tn(n,"left"),e._onOpen()})},_getAnimationEle:function(e){var t=e._bodyDiv;return t&&t.parentNode?e.getRoot():e._getContentEle()},completeAnimations:function(e){N.completeAnimation(d._getAnimationEle(e)),N.completeAnimation(e._maskDiv)},startAnimations:function(t,n){d._startMaskAnimations(t,n);var e,r,i=d._getAnimationEle(t);i&&(e=!0===n?t.getProperty("close_animation"):t.getProperty("open_animation"),(r=t.getRoot()).scrollLeft=0,r.scrollTop=0,N.startAnimation(i,e,function(){var e;!0===n&&(!0!==t.getProperty("release_on_close")||(e=t._currentContentObj)&&r.contains(e.contentEle)&&a.releaseContent(e),_n(r))}))},_startMaskAnimations:function(e,t){var n=e._maskDiv;n&&(e=!0===t?e.getProperty("mask_close_animation"):e.getProperty("mask_open_animation"),N.startAnimation(n,e,function(){!0===t&&_n(n)}))},isOpen:function(e){return e&&e.getRoot().parentNode&&Zt(e.getRoot(),"open")},close:function(e){var t=e.beforeClose();!1!==t&&(h.event&&e instanceof Be&&h.event.stopImmediatePropagation(),ut(t)?t(function(){d._doClose(e)}):d._doClose(e))},_doClose:function(e){d.removeCacheView(e),this.completeAnimations(e),d.startAnimations(e,!0),e._beforeClose(),e._onClose(),e._afterClose()},setPosition:function(n,r){["left","right","top","bottom"].forEach(function(e){var t=r[e];null!=t?He(n,e,t+"px"):tn(n,e)})},resetStaticPosition:function(e){"static"===en(e,"position")&&He(e,"position","relative")},addDismissListener:function(e,t,n){e&&Wt(yn("data-dismiss",n),e).forEach(function(e){xn(e,"click",t.close,t)})},removeDismissListener:function(e,t,n){e&&Wt(yn("data-dismiss",n),e).forEach(function(e){Pn(e,"click",t.close,t)})}}),g={DIRECTION_CLASS_MAP:{right:"to-right",right_down:"to-right-down",right_up:"to-right-up",left:"to-left",left_down:"to-left-down",left_up:"to-left-up",up:"to-up",up_right:"to-up-right",up_left:"to-up-left",down:"to-down",down_right:"to-down-right",down_left:"to-down-left"},POSITION_CLASS_MAP:{top_right:"top-right",top_left:"top-left",bottom_right:"bottom-right",bottom_left:"bottom-left",center:"center"},POSITION_DIRECTION_MAP:{top_left:"down",top_right:"down",bottom_left:"up",bottom_right:"up"},setDirectionClass:function(e,t,n){Kt(e,g.ALL_DIRECTION_CLASS),Xt(e,g.DIRECTION_CLASS_MAP[t]||n)},setPositionClass:function(e,t,n){Kt(e,g.ALL_POSITION_CLASS),Xt(e,g.POSITION_CLASS_MAP[t]||n)},getScreenCenterDirection:function(e){e=bn.isPointerEvent(e)?(t=(n=hn.getEventWindowOffset(e)).x,n.y):De.isRect(e)?(t=e.x+e.width/2,e.y+e.height/2):De.isPoint(e)?(t=e.x,e.y):(t=(n=e.getBoundingClientRect()).left+n.width/2,n.top+n.height/2);var t,n=hn.getWindowSize(),r=n.width,n=n.height;return t<r/3?e<n/3?"right_down":2*n/3<e?"right_up":"right":2*r/3<t?e<n/3?"left_down":2*n/3<e?"left_up":"left":!(e<n/3)&&2*n/3<e?"up":"down"},getStackPosition:function(e,t,n,r,i,o,a){switch(r){case"top_left":return g._getTopLeftStackPosition(e,t,n,i,o,a);case"bottom_left":return g._getBottomLeftStackPosition(e,t,n,i,o,a);case"bottom_right":return g._getBottomRightStackPosition(e,t,n,i,o,a);default:return g._getTopRightStackPosition(e,t,n,i,o,a)}},_getTopLeftStackPosition:function(e,t,n,r,i,o){r=g.getPositionDirection("top_left",r);var a=g.DIRECTION_CLASS_MAP[r],n=n?Wt("."+e+".top-left."+a,n):Wt("."+e+".top-left."+a),e=n[n.length-1];if(!e)return{top:i,left:i};var s,l,d=t.offsetWidth,h=t.offsetHeight,c=0|rt(en(e,"top")),u=0|rt(en(e,"left")),_=e.offsetWidth,p=e.offsetHeight;switch(r){case"left":s=c,l=u-d-o;break;case"right":s=c,l=u+_+o;break;case"up":s=c-o-h,l=i;break;default:s=c+p+o,l=i}return{top:s,left:l}},_getTopRightStackPosition:function(e,t,n,r,i,o){r=g.getPositionDirection("top_right",r);var a=g.DIRECTION_CLASS_MAP[r],n=n?Wt("."+e+".top-right."+a,n):Wt("."+e+".top-right."+a),e=n[n.length-1];if(!e)return{top:i,right:i};var s,l,d=t.offsetWidth,h=t.offsetHeight,c=0|rt(en(e,"top")),u=0|rt(en(e,"right")),_=e.offsetWidth,p=e.offsetHeight;switch(r){case"left":s=c,l=u+_+o;break;case"right":s=c,l=u-o-d;break;case"up":s=c-o-h,l=i;break;default:s=c+p+o,l=i}return{top:s,right:l}},_getBottomRightStackPosition:function(e,t,n,r,i,o){r=g.getPositionDirection("bottom_right",r);var a=g.DIRECTION_CLASS_MAP[r],n=n?Wt("."+e+".bottom-right."+a,n):Wt("."+e+".bottom-right."+a),e=n[n.length-1];if(!e)return{bottom:i,right:i};var s,l,d=t.offsetWidth,h=t.offsetHeight,c=0|rt(en(e,"bottom")),u=0|rt(en(e,"right")),_=e.offsetWidth,p=e.offsetHeight;switch(r){case"left":s=c,l=u+_+o;break;case"right":s=c,l=u-o-d;break;case"down":s=c-o-h,l=i;break;default:s=c+p+o,l=i}return{bottom:s,right:l}},_getBottomLeftStackPosition:function(e,t,n,r,i,o){r=g.getPositionDirection("bottom_left",r);var a=g.DIRECTION_CLASS_MAP[r],n=n?Wt("."+e+".bottom-left."+a,n):Wt("."+e+".bottom-left."+a),e=n[n.length-1];if(!e)return{bottom:i,left:i};var s,l,d=t.offsetWidth,h=t.offsetHeight,c=0|rt(en(e,"bottom")),u=0|rt(en(e,"left")),_=e.offsetWidth,p=e.offsetHeight;switch(r){case"left":s=c,l=u-d-o;break;case"right":s=c,l=u+o+_;break;case"down":s=c-o-h,l=i;break;default:s=c+p+o,l=i}return{bottom:s,left:l}},getPositionDirection:function(e,t){return t||g.POSITION_DIRECTION_MAP[e]||"down"}},De=(g.ALL_DIRECTION_CLASS=bt(g.DIRECTION_CLASS_MAP).join(" "),g.ALL_POSITION_CLASS=bt(g.POSITION_CLASS_MAP).join(" "),{isRect:function(e){return!!Ne(e)&&(e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&e.hasOwnProperty("width")&&e.hasOwnProperty("height"))},isPoint:function(e){return!!Ne(e)&&(e.hasOwnProperty("x")&&e.hasOwnProperty("y"))},hostPopup:function(e,t,n,r){r=Ue({},a.getLabelContent(r));var i=a.getContentElement(r.content),o=(i&&!r.hasOwnProperty("release_on_close")&&(r.release_on_close=!0),new e(r));return Rt(function(){o.open(n)}),i&&(d.addDismissListener(i,o,t),o._afterClose=function(){d.removeDismissListener(i,o,t)}),o},open:function(e,t,n,r,i){"screen_center"===r&&(r=g.getScreenCenterDirection(n)),g.setDirectionClass(t,r,"to-top");var o=nt.body;d.open(e,o),De._positionOnHost(o,t,n,r,i)},_positionOnHost:function(d,h,e,u,_){var t,n,r,i=0,p=0,o=(bn.isPointerEvent(e)?t=hn.getEventPageOffset(e):De.isRect(e)?(!0===e.scroll?t={x:e.x,y:e.y}:((t=hn.getWindowPageOffset()).x+=e.x,t.y+=e.y),i=e.width,p=e.height):De.isPoint(e)?!0===e.scroll?t={x:e.x,y:e.y}:((t=hn.getWindowPageOffset()).x+=e.x,t.y+=e.y):(t=hn.getElementPageOffset(e),i=e.offsetWidth,p=e.offsetHeight),t.x),a=t.y,f=h.offsetWidth,g=h.offsetHeight,s=0,l=0,c=Ne(_),l=c?(s=0|_.x,0|_.y):s=0|_;switch(u){case"right":r=a+p/2-g/2,n=o+i,c||(l=0);break;case"right_down":r=a,n=o+i,c||(l=0);break;case"right_up":r=a+p-g,n=o+i,c||(l=0);break;case"left":r=a+p/2-g/2,n=o-f,c||(l=0,s=-s);break;case"left_down":r=a,n=o-f,c||(l=0,s=-s);break;case"left_up":r=a+p-g,n=o-f,c||(l=0,s=-s);break;case"up_right":r=a-g,n=o,c||(s=0,l=-l);break;case"up_left":r=a-g,n=o+i-f,c||(s=0,l=-l);break;case"down":r=a+p,n=o+i/2-f/2,c||(s=0);break;case"down_right":r=a+p,n=o,c||(s=0);break;case"down_left":r=a+p,n=o+i-f,c||(s=0);break;default:r=a-g,n=o+i/2-f/2,c||(s=0,l=-l)}e=hn.getElementPageOffset(d);He(h,"left",n+s-e.x+"px"),He(h,"top",r+l-e.y+"px")}}),i=(Ge(me,et,{add:function(e){me.superClass.add.apply(this,arguments),xn(e._closeWrapper,"click",this.handleCloseClick,this)},remove:function(){Pn(this._view._closeWrapper,"click",this.handleCloseClick,this),me.superClass.remove.apply(this,arguments)},handleCloseClick:function(e){e.stopPropagation(),this.getView().close()},getViewDefaultTypes:function(){return!0===this.getView().getProperty("close_on_press_escape")?["click","keydown"]:["click"]},handle_keydown:function(e,t){d.isOpen(t)&&27===e.keyCode&&!0===t.getProperty("close_on_press_escape")&&t.close()},handle_click:function(e,t){d.isOpen(t)&&(!0===t.getProperty("close_on_click")&&(e.stopPropagation(),t.close()),gn(e.target)||e.stopPropagation())},getWindowDefaultTypes:function(){var e=[];return!0===this.getView().getProperty("close_on_click_outside")&&e.push("click"),!0===this.getView().getProperty("close_on_window_blur")&&e.push("blur"),e},handle_window_click:function(e,t){if(!0===t.getProperty("close_on_click_outside")&&d.isOpen(t)){var n=t.getRoot();if(!Ht(".z-widget.popup.open",n)){e=e.target;if(!n.contains(e)||e===t._maskDiv){if(Zt(n,"z-modal")){if(Ht(".z-widget.popup.open:not(.z-modal)"))return;e=Ht(".z-widget.popup.open.z-message-box");if(null!=e&&e!==n)return}t.close()}}}},handle_window_blur:function(e,t){d.isOpen(t)&&"debug"!==h.focus_ui_mode&&t.close()}}),Ge(be,Je,Ue({___zdefaults_:{close_icon_visible:!1,close_icon_template:r.remove,close_on_click:!1,mask_visible:!1,release_on_close:!1,close_on_click_outside:!1,close_on_window_blur:!1,close_on_press_escape:!1,auto_focus:!0,open_animation:null,close_animation:null,mask_open_animation:"z-animation-fadeIn",mask_close_animation:"z-animation-fadeOut"},_appendToUpdate:function(){},open:function(){},_beforeOpen:function(){this._initPopUpView()},_onOpen:function(){Xt(this.getRoot(),"open"),this._callOn("onOpen","on.open",{type:"open"},[])},onOpen:function(e,t){this.addListener("on.open",e,t)},close:function(){d.close(this)},beforeClose:function(){},_beforeClose:function(){Kt(this.getRoot(),"open")},_onClose:function(){this._callOn("onClose","on.close",{type:"close"},[])},_afterClose:function(){},onClose:function(e,t){this.addListener("on.close",e,t)},isOpen:function(){return d.isOpen(this)},getContentContainer:function(){return this._bodyDiv}},{_initPopUpView:function(){this._initPopUpTitle(),this._initPopUpMask(),this._initPopUpCloseIcon(),this._setPopUpContent()},_initPopUpTitle:function(){var e=this.getProperty("title");this._headerDiv.innerHTML=null==e?"":e},_initPopUpMask:function(){var e;!0===this.getProperty("mask_visible")?(this._maskDiv||(this._maskDiv=We("div","mask")),(e=this.getRoot()).insertBefore(this._maskDiv,e.firstChild)):this._maskDiv&&_n(this._maskDiv)},_initPopUpCloseIcon:function(){!0===this.getProperty("close_icon_visible")?(this._closeWrapper.innerHTML=this.getProperty("close_icon_template"),this.getRoot().appendChild(this._closeWrapper)):_n(this._closeWrapper)},_setPopUpContent:function(){var e,t=a.getContentObject(this.getProperty("content"));t&&(this.setCurrentContent(t,!0),t=this.getRoot(),(e=yt(Wt("[autofocus]",t),function(e){return!1===e.disabled}))?tt.dom.focus(e,{preventScroll:!0}):!0===this.getProperty("auto_focus")&&tt.dom.focus(t,{preventScroll:!0}))},_getContentEle:function(){return this._currentContentObj?this._currentContentObj.contentEle:null}},_())),Ge(xe,be,{___zdefaults_:{delay:0,direction:"right",offset:2,close_on_click_outside:!0,close_on_window_blur:!0,auto_focus:!1,open_animation:"z-animation-fadeIn",close_animation:"z-animation-fadeOut"},open:function(e){var t,n,r,i;this._cancelLater(),(e=bn.isPointerEvent(e)||De.isRect(e)||De.isPoint(e)?e:Ft(e))&&(t=this.getRoot(),n=this.getProperty("delay"),Ne(n)?n=0|n.open:n|=0,r=this.getProperty("direction"),i=this.getProperty("offset"),0<n?this._laterID=wt(function(){De.open(this,t,e,r,i)},n,this):De.open(this,t,e,r,i))},_onOpen:function(){this._laterID=null,xe.superClass._onOpen.apply(this,arguments)},close:function(){this._cancelLater();var e=this.getProperty("delay");Ne(e)?e=0|e.close:e|=0,0<e?this._laterID=wt(function(){d.close(this)},e,this):d.close(this)},_onClose:function(){this._laterID=null,xe.superClass._onClose.apply(this,arguments)},_cancelLater:function(){this._laterID&&(Pt.cancelCallLater(this._laterID),this._laterID=null)}}),{TRIGGER_EVENT:{hover:{open:"mouseenter",close:"mouseleave"},focus:{open:"focus",close:"blur"},click:{open:"click",close:"click"}},getTriggerEvent:function(e,t){return i.TRIGGER_EVENT[e]||i.TRIGGER_EVENT[t]},clearToggleTrigger:function(e,t){i._removeToggleTrigger(e,t),i._removeToggleTrigger(e,t,"close")},_removeToggleTrigger:function(e,t,n){e="_$z_toggle_"+e,n&&(e+="_"+n),n=t[e];n&&(Pn(t,n.trigger,n.listener),delete t[e])},onTrigger:function(e,t,n,r,i){xn(t,n,r);e="_$z_toggle_"+e;i&&(e+="_"+i),t[e]={trigger:n,listener:r}},getToggleItems:function(e,t){var n;if(0<t.length){if(!(n=Ht(t[0])))return}else n=nt.body;t=Wt(yn("data-toggle",e="zw-"+e),n);return n.getAttribute("data-toggle")===e&&t.unshift(n),t}}),Ae={tooltip:function(e,t){return De.hostPopup(ke,"tooltip",e,t)},close:function(){d.closeAll("Tooltip")},tooltipOn:function(e,t,n){(e=Ft(e))&&Ae._tooltipOn(e,t,n)},toggleInit:function(e){i.getToggleItems("tooltip",arguments).forEach(function(e){Ae._tooltipOn(e,e.getAttribute("data-trigger"),"false"!==e.getAttribute("data-auto-close"))})},_tooltipOn:function(e,t,n){i.clearToggleTrigger("tooltip",e);var r,t=i.getTriggerEvent(t,"hover");i.onTrigger("tooltip",e,t.open,function(){d.isOpen(r)||(r=Ae._openTooltip(e,r))}),!1!==n&&i.onTrigger("tooltip",e,t.close,function(){r&&r.close()},"close")},_openTooltip:function(e,t){var n=Ae._getConfig(e);if(!n)return t;var r=null==t;return(t=t||new ke).set(n),Rt(function(){t.open(e)}),r&&d.addDismissListener(a.getContentElement(t.get("content")),t,"popover"),t},_getConfig:function(e){var t,n;return e.hasAttribute("data-content")?t=e.getAttribute("data-content"):(t=e.getAttribute("title"))?(e._tooltip_title=t,e.removeAttribute("title")):t=e._tooltip_title,t?(e.hasAttribute("data-open-delay")&&(n={open:0|e.getAttribute("data-open-delay")}),e.hasAttribute("data-close-delay")&&(n?n.close=0|e.getAttribute("data-close-delay"):n={open:0|e.getAttribute("data-close-delay")}),n=n||0|e.getAttribute("data-delay"),{title:e.getAttribute("data-title"),content:t,direction:e.getAttribute("data-direction")||"right",delay:n,offset:0|e.getAttribute("data-offset"),class:e.getAttribute("data-class"),close_on_click:"true"===e.getAttribute("data-close-on-click")}):null}},ke=function(){if(!(this instanceof ke))return xt.createInstance(ke,arguments);ke.superClass.constructor.apply(this,arguments),Xt(this.getRoot(),"z-tooltip")},Le=(Ge(ke,xe,{__className_:"Tooltip"}),{popover:function(e,t){return De.hostPopup(Se,"popover",e,t)},close:function(){d.closeAll("Popover")},popoverOn:function(e,t,n){(e=Ft(e))&&Le._popoverOn(e,t,n)},toggleInit:function(e){i.getToggleItems("popover",arguments).forEach(function(e){Le._popoverOn(e,e.getAttribute("data-trigger"),"false"!==e.getAttribute("data-auto-close"))})},_popoverOn:function(e,t,n){i.clearToggleTrigger("popover",e);var r,t=i.getTriggerEvent(t,"click");i.onTrigger("popover",e,t.open,function(){d.isOpen(r)||(r=Le._openPopover(e,r))}),!1!==n&&i.onTrigger("popover",e,t.close,function(){d.isOpen(r)&&r.close()},"close")},_openPopover:function(e,t){var n=Le._getConfig(e);if(!n)return t;var r=null==t;return(t=t||new Se).set(n),Rt(function(){t.open(e)}),r&&d.addDismissListener(a.getContentElement(t.get("content")),t,"popover"),t},_getConfig:function(e){var t=e.getAttribute("data-content");return t?{title:e.getAttribute("data-title"),content:t,direction:e.getAttribute("data-direction")||"right",offset:0|e.getAttribute("data-offset"),class:e.getAttribute("data-class"),close_on_click:"true"===e.getAttribute("data-close-on-click"),close_icon_visible:"true"===e.getAttribute("data-close-icon-visible")}:null}}),Se=function(){if(!(this instanceof Se))return xt.createInstance(Se,arguments);Se.superClass.constructor.apply(this,arguments),Xt(this.getRoot(),"z-popover")},Ee=(Ge(Se,xe,{__className_:"Popover"}),{loading:function(e,t,n){var r;{if(t=Ft(t)||nt.body,!1!==e)return(r=t._z_loader||new Te).set(Ue({},a.getLabelContent(e),n)),(t._z_loader=r).open(t),r;t._z_loader?(t._z_loader.close(),delete t._z_loader):Ee._clearTargetLoader(t)}},_clearTargetLoader:function(e){Gt.querySelectorChildren(".z-loader",e).forEach(function(e){_n(e)})}}),Te=function(){if(!(this instanceof Te))return xt.createInstance(Te,arguments);this._loadindDiv=We("div","loading"),Te.superClass.constructor.apply(this,arguments),this._loadindDiv.innerHTML=this.getProperty("loading_icon_template"),this._bodyDiv.appendChild(this._loadindDiv),Xt(this.getRoot(),"z-loader")},Ve=(Ge(Te,be,{__className_:"Loader",___zdefaults_:{loading_icon_template:V,mask_visible:!0},_onViewChange:function(e,t,n){Te.superClass._onViewChange.apply(this,arguments),"loading_icon_template"===e&&(this._loadindDiv.innerHTML=this.getProperty("loading_icon_template"))},open:function(e){e=Ft(e)||nt.body;var t=this.getRoot();e.lastElementChild!==t?d.open(this,e):this._setPopUpContent()}}),{notify:function(e,t){{if(!1!==e)return Ne(t)&&(e=Ve._getTypeLabel(e,t.type)),(t=new Oe(Ue({},t,a.getLabelContent(e)))).open(),t;d.closeAll("Notification")}},_getTypeLabel:function(e,t){var n;return e=null==e?"":e+"",t?((n=We("div","ntype "+t)).innerHTML=(t=r["notify_"+t]||"")?"<span class='icon'>"+t+"</span> <span>"+e+"</span>":e,n.outerHTML):e}}),Oe=function(){if(!(this instanceof Oe))return xt.createInstance(Oe,arguments);Oe.superClass.constructor.apply(this,arguments),Xt(this.getRoot(),"z-notification")},Ie=(Ge(Oe,be,{__className_:"Notification",___zdefaults_:{duration:ze("WIDGET_NOTIFICATION_DURATION"),type:"",position:ze("WIDGET_NOTIFICATION_POSITION"),direction:null,offset:10,gap:6,close_on_click:!0,close_icon_visible:!0,auto_focus:!1},open:function(){var e=this.getRoot(),t=nt.body,n=this.getProperty("position"),r=this.getProperty("direction"),i=0|this.getProperty("offset"),o=0|this.getProperty("gap"),t=(d.open(this,t),g.getStackPosition("z-notification",e,t,n,r,i,o)),i=(d.setPosition(e,t),g.getPositionDirection(n,r)),o=(g.setPositionClass(e,n,"top-right"),g.setDirectionClass(e,i,"to-down"),0|this.getProperty("duration"));0<o&&(this._laterID=wt(this.close,o,this))},_onClose:function(){this._laterID=null,Oe.superClass._onClose.apply(this,arguments)}}),{modal:function(e,t,n){if(e=Ft(e)){if(!1!==t)return Ie._openModal(e,t,n);(t=e._$z_modal)&&Ie._closeModal(e,t)}},close:function(e){var t;!(e=Ft(e))||(t=e._$z_modal)&&Ie._closeModal(e,t)},_openModal:function(e,t,n){var r=e._$z_modal||new Be,i={content:e};return t&&Ct(t,function(e,t){ut(t)?r[e]=t:i[e]=t}),r.set(i),r.open(n),e._$z_modal||(d.addDismissListener(e,r,"modal"),e._$z_modal=r),r},_closeModal:function(e,t){t.close(),d.removeDismissListener(e,t,"modal"),delete e._$z_modal},modalOn:function(e,t,n){(e=Ft(e))&&Ie._modalOn(e,t,n)},toggleInit:function(e){i.getToggleItems("modal",arguments).forEach(function(e){Ie._modalOn(e,e.getAttribute("data-trigger"),"false"!==e.getAttribute("data-auto-close"))})},_modalOn:function(e,t,n){i.clearToggleTrigger("modal",e);var r,t=i.getTriggerEvent(t,"click");i.onTrigger("modal",e,t.open,function(){d.isOpen(r)||(r=Ie._openHostModal(r,e))}),!1!==n&&i.onTrigger("modal",e,t.close,function(){d.isOpen(r)&&r.close()},"close")},_openHostModal:function(e,t){t=Ie._getModalHostConfig(t);if(!t)return e;var n=null==e;return(e=e||new Be).set(t),Rt(function(){e.open()}),n&&d.addDismissListener(a.getContentElement(e.get("content")),e,"modal"),e},_getModalHostConfig:function(e){var t=e.getAttribute("data-content");return t?{title:e.getAttribute("data-title"),content:t,class:e.getAttribute("data-class"),close_on_click:"true"===e.getAttribute("data-close-on-click"),close_on_click_outside:"false"!==e.getAttribute("data-close-on-click-outside"),close_icon_visible:"true"===e.getAttribute("data-close-icon-visible")}:null}}),Me={alert:function(e,t,n,r){return Me.box("alert",e,t,n,r)},confirm:function(e,t,n,r){return Me.box("confirm",e,t,n,r)},prompt:function(e,t,n,r){return Me.box("prompt",e,t,n,r)},box:function(n,r,i,o,a){if(h.Promise)return new Promise(function(e,t){Me._box(n,r,i,o,a,e,t)});Me._box(n,r,i,o,a)},_box:function(e,t,n,r,i,o,d){Ne(r)?(s=r,a=i):ut(r)&&(s=i,a=r),s=Ue({confirm_class:ze("WIDGET_MESSAGEBOX_CONFIRM_CLASS"),cancel_class:ze("WIDGET_MESSAGEBOX_CANCEL_CLASS"),confirm_text:ze("WIDGET_MESSAGEBOX_CONFIRM_TEXT"),cancel_text:ze("WIDGET_MESSAGEBOX_CANCEL_TEXT")},s);var a,s,l,h=!1,u=(s.hasOwnProperty("promise")?h=s.promise:"confirm"!==e&&"prompt"!==e||null!=a||(h=!0),"prompt"===e),c=u&&null,_=!1,i="z-message-box "+e+" "+(s.class||""),p=We("div","zw-modal"),r=We("div","content"),n=(null!=n&&(r.innerHTML+="<div class='header'><span class='title'>"+n+"</span></div>"),We("div","body")),t=(n.innerHTML=t,u&&((l=We("input",s.input_class||"")).value=null==s.value?"":s.value,xn(l,"keydown",function(e){13===e.keyCode&&(_=!0,c=rn.getValue(l),Ie.modal(p,!1))}),n.appendChild(l),l.select()),r.appendChild(n),We("div","footer")),n=We("button",s.confirm_class),e=(n.setAttribute("data-dismiss","modal"),n.innerHTML=s.confirm_text,t.appendChild(n),l?(l.setAttribute("autofocus",!0),l.select()):n.setAttribute("autofocus",!0),"alert"!==e&&((e=We("button",s.cancel_class)).setAttribute("data-dismiss","modal"),e.innerHTML=s.cancel_text,t.appendChild(e)),r.appendChild(t),p.appendChild(r),xn(n,"click",function(){_=!0,c=!u||rn.getValue(l)}),{close_on_click_outside:!0!==s.close_on_click_outside,close_on_press_escape:!0,class:i});(a||o)&&(e.onClose=function(){a&&a(c),!0===h&&o&&(!0===_?o:d)(c)}),Ie.modal(p,e)}},Be=function(){if(!(this instanceof Be))return xt.createInstance(Be,arguments);Be.superClass.constructor.apply(this,arguments),_n(this._bodyDiv),_n(this._headerDiv),Xt(this.getRoot(),"z-modal")};Ge(Be,be,{__className_:"Modal",___zdefaults_:{mask_visible:!0,release_on_close:!0,close_on_click_outside:!0,open_animation:ze("WIDGET_MODAL_OPEN_ANIMATION"),close_animation:ze("WIDGET_MODAL_CLOSE_ANIMATION")},open:function(e){e=Ft(e)||nt.body,d.open(this,e)},getContentContainer:function(){return this.getRoot()}}),Ue(tt.$,{widget:{DefaultController:U,HoverController:G,ContentInterface:_,DataContentInterface:p,LevelCheckInterface:y,LevelListViewInterface:m,ListViewInterface:v,HostPopUpUtil:De,IHostPopUpView:xe,IPopUpView:be,PopUpController:me,PopUpDirectionUtil:g,PopUpUtil:d,ToggleUtil:i,IDataULLevelView:R,IDataULListView:w,IDataULView:P,IDataULLevelRenderer:W,IDataULRenderer:H,IDataWidgetRenderer:x,IDataWidgetView:b,ContentUtil:a,HTMLWidgetParser:f,LevelListViewRenderUtil:B,LevelViewRenderUtil:s,LevelViewVisibleUtil:z,ListViewRenderUtil:M,RenderNodeUtil:o,WAnimationUtil:N,WViewUtil:I}}),tt.widget={ListView:K,Tabs:Y,Tree:Z,Collapse:ee,Pagination:se,Grid:ce,TreeGrid:ge,Menu:Ce,Tooltip:ke,Popover:Se,Loader:Te,Notification:Oe,tooltip:Ae.tooltipOn,popover:Le.popoverOn,modal:Ie.modal,alert:Me.alert,confirm:Me.confirm,prompt:Me.prompt,loading:Ee.loading,notify:Ve.notify,$interface:{DataContentInterface:p}},tt.widget.tooltip.init=Ae.toggleInit,tt.widget.tooltip.open=Ae.tooltip,tt.widget.tooltip.close=Ae.close,tt.widget.popover.init=Le.toggleInit,tt.widget.popover.open=Le.popover,tt.widget.popover.close=Le.close,tt.widget.modal.init=Ie.toggleInit,tt.widget.modal.on=Ie.modalOn}(l),function(h){Fe({FORM_VALIDATOR_RULES_ATTRIBUTE:"v-rules",FORM_VALIDATOR_ATTRIBUTE_PREFIX:"v-",FORM_VALIDATOR_MESSAGE_FOR_ATTRIBUTE:"v-message-for",FORM_VALIDATOR_INVALID_CLASS:"z-validator-invalid",FORM_VALIDATOR_MESSAGE_CLASS:"z-validator-message",FORM_FORM_MODEL_ATTRIBUTE:"ze-model",FORM_FORM_MODEL_TYPE_ATTRIBUTE:"ze-model-type",FORM_FORM_MODEL_RESET:"ze-reset",FORM_FORM_MODEL_EXCLUDE:"ze-exclude",FORM_FORM_MODEL_FOR:"for-ze-model",FORM_FORM_VISIBLE_ATTRIBUTE:"ze-visible",FORM_FORM_HIDDEN_ATTRIBUTE:"ze-hidden",FORM_FORM_DISABLED_ATTRIBUTE:"ze-disabled",FORM_FORM_ATTRIBUTE_REGEX:null,FORM_FORM_EVENT_ATTRIBUTE:"ze-on"});function r(e,t,n){if(!(this instanceof r))return xt.createInstance(r,arguments);this._rules=[],r.superClass.constructor.apply(this,[n]),this.set("form",e),t&&this.set("rules",t)}function i(e,t){if(!(this instanceof i))return xt.createInstance(i,arguments);i.superClass.constructor.apply(this,[t]),this.set("form",e),this._doValidateUpdate(),this._updateStatus()}var u=function(e){return"none"!==en(e,"display")&&"hidden"!==en(e,"visibility")&&0<e.offsetWidth&&0<e.offsetHeight},_=function(e,t,n){!0!==t?("none"===en(e,"display")&&(t=n&&"none"!==n?n:e._$z_default_display&&"none"!==e._$z_default_display?e._$z_default_display:"",He(e,"display",t)),delete e._$z_default_display):("hidden"===en(e,"visibility")&&(t=n&&"hidden"!==n?n:e._$z_default_visibility&&"hidden"!==e._$z_default_visibility?e._$z_default_visibility:"visible",He(e,"visibility",t)),delete e._$z_default_visibility)},p=function(e,t){!0!==t?(e._$z_default_display=en(e,"display"),He(e,"display","none")):(e._$z_default_visibility=en(e,"visibility"),He(e,"visibility","hidden"))},f=function(e){e.setAttribute("disabled","")},g=function(e){e.removeAttribute("disabled")},y={required:"The field is required",integer:"The field must be an integer",numeric:"The field must contain only numbers",alphanumeric:"The field must only contain alpha-numeric characters",alphanumeric_dash:"The field must only contain alpha-numeric characters, underscores and dashes",alphanumeric_space:"The field must only contain alpha-numeric characters and space characters",email:"The field must be a valid email address",ipv4:"The field must be a valid IP",minlength:"The field must be at least %p characters in length",maxlength:"The field must not exceed %p characters in length",greaterthan:"The field must contain a number greater than %p",lessthan:"The field must contain a number less than %p",equal:"The field must be equal to %p",match:"The field must match %p field"},l={appendMessages:function(t,e,n){!1!==n&&(l.clearMessage(t,n),e.forEach(function(e){l._appendMessageItem(t,e,n)}))},appendMessageItem:function(e,t,n){var r;!1!==n&&(r=t.element,l._removeMessageItem(e,r,n),l._appendMessageItem(e,t,n))},_appendMessageItem:function(e,t,n){var r,i,o=t.message,t=t.element,a=n.message_class,s=n.invalid_class,n=n.container;Xt(t,s),n?(i=dn(n,"UL")||dn(n,"OL")?"li":"span",r=We(i,a)):(s=l._getMessageEle(t,e,a))?r=s:i="span",i&&(r=We(i,a),t._val_msg_ele=r,n?n.appendChild(r):tt.dom.insertAfter(r,t)),r.innerHTML=null==o?"":o},removeMessageItem:function(e,t,n){!1!==n&&l._removeMessageItem(e,t,n)},_removeMessageItem:function(e,t,n){var r=n.invalid_class,n=n.message_class,r=(Kt(t,r),t._val_msg_ele);r?(_n(r),delete t._val_msg_ele):(r=l._getMessageEle(t,e,n))&&pn(r)},_getMessageEle:function(e,t,n){var r,i=e.getAttribute("name");return(r=i?Ft(yn(ze("FORM_VALIDATOR_MESSAGE_FOR_ATTRIBUTE"),i),t):r)||(i=e.getAttribute(ze("FORM_FORM_MODEL_ATTRIBUTE")))&&(r=Ft(yn(ze("FORM_VALIDATOR_MESSAGE_FOR_ATTRIBUTE"),i),t)),r||(i=e.nextElementSibling)&&Zt(i,n)&&(r=i),r},clearMessage:function(t,n){var e;!1!==n&&((e=n.container)&&pn(e),e="."+n.invalid_class,Wt(e,t).forEach(function(e){l._removeMessageItem(t,e,n)}))}},o=(Ue(l,{getMessageText:function(e,t,n){var r;return e.hasOwnProperty("message")?r=e.message:t&&(r=y[t]),r?(t=e.name,(r=r.replace("%f",t||"")).replace("%p",n||"")):null},registerMessage:function(e,t){Ne(e)?Ct(e,function(e,t){l._registerMessage(e,t)}):l._registerMessage(e,t)},_registerMessage:function(e,t){null==t?delete y[e]:y[e]=t}}),{RULE_REGEX:/^(.+?)\[(.+)\]$/,INTEGER:/^-?\d+$/,NUMERIC:/^-?\d*\.?\d+$/,ALPHANUMERIC:/^[a-zA-Z0-9]+$/,ALPHANUMERIC_DASH:/^[a-zA-Z0-9_\-]+$/,ALPHANUMERIC_SPACE:/^[a-zA-Z0-9 ]+$/,MAIL:/^([\w.+-]+)@([\da-zA-Z.-]+)\.([a-zA-Z.]{2,})$/,IPV4:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/}),v=function(e,t){var n;return e.hasOwnProperty("element")?n=e.element:e.hasOwnProperty("selector")?n=Ft(e.selector,t):e.hasOwnProperty("id")?n=nt.getElementById(e.id):e.hasOwnProperty("name")&&(n=Ft(yn("name",e.name),t)),n},C=function(e){var t=[],r=ze("FORM_VALIDATOR_ATTRIBUTE_PREFIX"),i=r.length;return Wt("["+ze("FORM_VALIDATOR_RULES_ATTRIBUTE")+"]",e).forEach(function(e){var n={element:e};Ct(tt.dom.getAttributes(e),function(e,t){"name"===e&&(n[e]=t),e.startsWith(r)&&(n[e.substring(i)]=t)}),t.push(n)}),t},a={required:function(e){e=on(e);return ce(e)?!0===e:ht(e)?""!==e.trim():e instanceof FileList?0<e.length:null!=e},integer:function(e){return o.INTEGER.test(on(e))},numeric:function(e){return o.NUMERIC.test(on(e))},alphanumeric:function(e){return o.ALPHANUMERIC.test(on(e))},alphanumeric_dash:function(e){return o.ALPHANUMERIC_DASH.test(on(e))},alphanumeric_space:function(e){return o.ALPHANUMERIC_SPACE.test(on(e))},email:function(e){return o.MAIL.test(on(e))},ipv4:function(e){return o.IPV4.test(on(e))},minlength:function(e,t){e=on(e);return!!ht(e)&&(e=e.trim()).length>=t},maxlength:function(e,t){e=on(e);return!!ht(e)&&(e=e.trim()).length<=t},greaterthan:function(e,t){e=on(e);return!!a._isNumeric(e)&&+e>+a._getCompareValue(t)},lessthan:function(e,t){e=on(e);return!!a._isNumeric(e)&&+e<+a._getCompareValue(t)},equal:function(e,t){return on(e)===a._getCompareValue(t)},match:function(e,t){return on(e)===a._getCompareValue(t)},_isNumeric:function(e){return o.NUMERIC.test(e)},_getCompareValue:function(e){if(a._isNumeric(e))return e;try{var t=Ft(e)||Ft(yn("name",e));if(t)return on(t)}catch(e){}return e}},m=function(e,t,n){ut(t)&&(a[e]=t),n&&l.registerMessage(e,n)},e=function(e){var t=[],i=(ht(e)?t=e.split("|"):dt(e)&&(t=e),[]);return t.forEach(function(e){var t,n,r;ht(e)?((r=o.RULE_REGEX.exec(e))?(t=r[1],n=r[2]):t=e,(r=a[t])&&i.push({rule_name:t,method:r,param:n})):ut(e)&&i.push({method:e})}),i},s={validate:function(e,t,n){if(!(e=Ft(e)))return[];var r,i=s._getConfig(n),i=(n=i.config,i.msg_config),t=pt(C(e),t),t=s.doValidate(e,t);return l.appendMessages(e,t,i),!1===n.autofocus||(r=t[0])&&wt(function(){r.element.focus()},60),t},reset:function(e,t){if(!(e=Ft(e)))return[];var n=s._getConfig(t),t=(t=n.config,n.msg_config);l.clearMessage(e,t)},_getConfig:function(e){e=Ue({invalid_class:ze("FORM_VALIDATOR_INVALID_CLASS"),message_class:ze("FORM_VALIDATOR_MESSAGE_CLASS"),visible_only:!0,autofocus:!0},e);return{config:e,msg_config:!1!==e.message&&{container:Ft(e.message_container),invalid_class:e.invalid_class,message_class:e.message_class}}},doValidate:function(n,e,r){var i=[],o=[];return e.forEach(function(e){var t=v(e,n);t&&(!1!==r&&!u(t)||0<=o.indexOf(t)||(t=s.doValidateRulesItem(t,e))&&(i.push(t),o.push(t.element)))}),i},doValidateRulesItem:function(r,i){var o;return ft(e(i.rules),function(e){var t=e.method,n=e.param;if(!1===t(r,n))return t=e.rule_name,!(o={reason:t,element:r,message:l.getMessageText(i,t,n),rule:i})}),o}},b=(Ge(r,w,{___zdefaults_:{invalid_class:ze("FORM_VALIDATOR_INVALID_CLASS"),message_class:ze("FORM_VALIDATOR_MESSAGE_CLASS"),visible_only:!0,autofocus:!0},afterSetProperty:function(e,t,n){switch(r.superClass.afterSetProperty.apply(this,arguments),e){case"rules":this.reset(),this._doRulesUpdate();break;case"form":this.reset(),this._doFormUpdate(t);break;case"message":case"message_container":case"invalid_class":case"message_class":case"visible_only":this.reset()}},_doFormUpdate:function(e){this.reset(),this._setRuleEleChangeListener("off"),this._form=Ft(e),this._doRulesUpdate()},update:function(){this._form&&(this.reset(),this._doRulesUpdate())},_doRulesUpdate:function(){this._form&&(this._setRuleEleChangeListener("off"),this._rules=pt(C(this._form),this.get("rules")),this._setRuleEleChangeListener("on"))},_setRuleEleChangeListener:function(n){var r,i;this._form&&(r=this._form,i=[],this._rules.forEach(function(e){var t,e=v(e,r);e&&(0<=i.indexOf(e)||(i.push(e),t=this._getChangeEvent(e),("on"===n?xn:Pn)(e,t,this._handleChange,this)))},this))},_getChangeEvent:function(e){var t=this.getChangeEvent(e);if(t)return t;if(sn.isInput(e)){t=e.getAttribute("type");if(null==t||"text"===t||"email"===t||"password"===t||"number"===t||"url"===t)return"input"}else if(sn.isTextArea(e))return"input";return"change"},getChangeEvent:function(e){},_handleChange:function(e){var t,n,r;this._form&&(t=e.target,n=s.doValidate(this._form,this._rules,this.getProperty("visible_only")),(r=yt(n,function(e){return e.element===t}))?l.appendMessageItem(this._form,r,this._getMessageConfig()):l.removeMessageItem(this._form,t,this._getMessageConfig()),this._onValidate(n,r,e))},_onValidate:function(e,t,n){this._callOn("onValidate","on.validate",{errors:e,current:t,event:n},[e,t,n])},_callOn:function(e,t,n,r){var i=this[e];i===this.constructor.prototype[e]?this.dispatchEvent(t,n):i.apply(this,r)},onValidate:function(e,t){this.addListener("on.validate",e,t)},_getMessageConfig:function(){return!1!==this.get("message")&&{container:Ft(this.get("message_container")),invalid_class:this.get("invalid_class"),message_class:this.get("message_class")}},reset:function(){this._form&&l.clearMessage(this._form,this._getMessageConfig())},validate:function(){var e,t;if(this._form)return e=s.doValidate(this._form,this._rules,this.getProperty("visible_only")),l.appendMessages(this._form,e,this._getMessageConfig()),!1===this.get("autofocus")||(t=e[0])&&wt(function(){t.element.focus()},60),e},registerRule:function(e,t,n){return m(e,t,n)},registerRuleMessage:function(e,t){return l.registerMessage(e,t)}}),{integer:function(e){return null==e?null:(e=e.trim(),/^-?\d+$/.test(e)?0|e:null)},array:function(e){return null==e?null:gt(e.split(","),function(e){return""!==e.trim()})}}),c={set:function(e,t){c._set(e,t)},get:function(e,r){var i={},o=ze("FORM_FORM_MODEL_EXCLUDE");return Ct(c._queryModelEleMap(e),function(e,t){var n;1===(t=!0===r?gt(t,function(e){return!c._isExclude(e,o)}):t).length?n=c._getEleValue(t[0]):(n=[],t.forEach(function(e){n.push(c._getEleValue(e))})),ye(i,e,n)}),i},clear:function(e){c._set(e,null,!0)},_isExclude:function(e,t){return e.hasOwnProperty(t)&&"false"!==e.getAttribute(t)},_queryModelEleMap:function(e){var r=ze("FORM_FORM_MODEL_ATTRIBUTE"),i={};return Wt("["+r+"]",e).forEach(function(e){var t,n=e.getAttribute(r).trim();n&&((t=i[n])||(i[n]=t=[]),t.push(e))}),i},_set:function(e,i,o){!0===o||Ne(i)||(i={}),Ct(c._queryModelEleMap(e),function(e,t){var n,r=null;!0===o?n="":null==(n=mt(i,e))&&(n="",ge(i,e)||(r=ze("FORM_FORM_MODEL_RESET"))),1===t.length?c._setEleValue(t[0],n,r):dt(n)?t.forEach(function(e,t){t=n[t];c._setEleValue(e,t=null==t?"":t,r)}):t.forEach(function(e){c._setEleValue(e,n,r)})})},_setEleValue:function(e,t,n){null!=n&&"false"===e.getAttribute(n)||an(e,t)},_getEleValue:function(e){var t=on(e),e=b[e.getAttribute(ze("FORM_FORM_MODEL_TYPE_ATTRIBUTE"))];return t=e?e(t):t}},n={updateStatus:function(e,t){n.updateVisible(e,t),n.updateDisable(e,t)},updateVisible:function(e,t){n._doUpdate(e,ze("FORM_FORM_VISIBLE_ATTRIBUTE"),t,function(e,t){(!0===t?_:p)(e)}),n._doUpdate(e,ze("FORM_FORM_HIDDEN_ATTRIBUTE"),t,function(e,t){(!0===t?p:_)(e)})},updateDisable:function(e,t){n._doUpdate(e,ze("FORM_FORM_DISABLED_ATTRIBUTE"),t,function(e,t){(!0===t?f:g)(e)})},_doUpdate:function(e,n,r,i){Wt("["+n+"]",e).forEach(function(e){var t=(e.getAttribute(n)||"").trim();t&&i(e,Re.exec(t,r,ze("FORM_FORM_ATTRIBUTE_REGEX")))})}},x=function(e,t,n){Wt("["+ze("FORM_FORM_MODEL_ATTRIBUTE")+"]",e).forEach(function(e){xn(e,"change",t,n)})},P=function(e,t,n){Wt("["+ze("FORM_FORM_MODEL_ATTRIBUTE")+"]",e).forEach(function(e){Pn(e,"change",t,n)})},d=(Ge(i,w,{___zdefaults_:{validate:!0},afterSetProperty:function(e,t,n){switch(i.superClass.afterSetProperty.apply(this,arguments),e){case"form":this._doFormUpdate(t);break;case"validate":this._doValidateUpdate()}},update:function(){this._form&&(P(this._form,this._handleFormModelElementChange,this),x(this._form,this._handleFormModelElementChange,this),this._updateStatus()),this._validator&&this._validator.update()},_doFormUpdate:function(e){this._form&&(P(this._form,this._handleFormModelElementChange,this),t.removeForListener(this._form)),this._form=Ft(e),this._validator&&this._validator.set("form",this._form),this._form&&(x(this._form,this._handleFormModelElementChange,this),t.addForListener(this._form))},_doValidateUpdate:function(){!1!==this.getProperty("validate")?this._validator||(this._validator=r(this._form)):this._validator&&(this._validator.set("form",null),delete this._validator)},_handleFormModelElementChange:function(e){this._updateStatus(),this._callOn("onFormChange","on.form.change",e,[e])},onFormChange:function(e,t){this.addListener("on.form.change",e,t)},_updateStatus:function(e){n.updateStatus(this._form,Ue(this._getValue(),e))},_getValue:function(){return this._form?c.get(this._form):{}},setValue:function(e){this._form&&(e=Ue({},e),c.set(this._form,e),this._updateStatus(e),this._validator&&this._validator.reset())},getValue:function(e){if(!1===e)return this._getValue();if(!this._form)return null;if(this._validator&&0<this._validator.validate().length)return null;return c.get(this._form)},clearValue:function(){if(!this._form)return null;c.clear(this._form),this._updateStatus(),this._validator&&this._validator.reset()},getValidator:function(){return this._validator}}),{on:function(e,t){d._each(e,t,!1),d._each(e,t,!0)},off:function(e,t){d._each(e,t,!1)},_each:function(r,e,i){r=r||h;var t,o=ze("FORM_FORM_EVENT_ATTRIBUTE");if(e){if(!(e=qt(e)))return;t=Wt("["+o+"]",e)}else t=Wt("["+o+"]");t.forEach(function(n){n.getAttribute(o).split(";").forEach(function(e){var t,e=e.trim().split(":");2!==e.length||(t=e[0].trim())&&e[1].split(",").forEach(function(e){(e=e.trim())&&(e=mt(r,e),ut(e)&&(!0===i?wn:Rn)(n,t,e,r))})})})}}),t={addForListener:function(e){Wt(yn(ze("FORM_FORM_MODEL_FOR")),e).forEach(function(e){xn(e,"click",t._handleForClick)})},removeForListener:function(e){Wt(yn(ze("FORM_FORM_MODEL_FOR")),e).forEach(function(e){Pn(e,"click",t._handleForClick)})},_handleForClick:function(e){for(var t=ze("FORM_FORM_MODEL_FOR"),e=bn.getEventTarget(e,"["+t+"]"),n=e.parentNode,r=ze("FORM_FORM_MODEL_ATTRIBUTE"),i=e.getAttribute(t);n;){var o=Ht(yn(r,i),n);if(o)return void o.focus();n=n.parentNode}}};tt.form={Validator:r,Form:i,bindEvent:d.on,unbindEvent:d.off,attrOn:d.on,attrOff:d.off},tt.form.Validator.validate=s.validate,tt.form.Validator.reset=s.reset,tt.form.Validator.registerRule=m,tt.form.Validator.registerRuleMessage=l.registerMessage}(l),l);function dr(r){return Ue({_isSuperVisible:function(e){return r.superClass._isVisible.apply(this,arguments)},_isVisible:function(e){if(!1===this._isVisible_(e))return!1;if(Lr(e)){var t=Or.getFromNodeAgent(this,e);if(null==t||!1===this._isVisible(t))return!1;var n=Or.getToNodeAgent(this,e);if(null==n||!1===this._isVisible(n))return!1;if(t===n&&(e.get("from")!==t||e.get("from")!==n))return!1;if(this._hasLinkBundled()&&this.isLinkBundled(e)&&!this._isLinkBundleAgent(e))return!1}if(kr(e)&&this.getCurrentSubview()!=Mr.getDataSubview(e))return!1;var t=Ir.getGroupAncestorArray(e),r=!0;if(t.forEach(function(e){r=r&&this.isExpanded(e)},this),!0!==r)return!1;var n=Mr.getSameSubviewAncestorArray(e),i=!0;return n.forEach(function(e){i=i&&this._isVisible(e)},this),!0===i}},{afterSetProperty:function(e,t,n){r.superClass.afterSetProperty.apply(this,arguments),"current_subview"===e&&this._updateSubviewTransform(t,n)},setCurrentSubview:function(e){null!=e&&!Er(e)||this.getCurrentSubview()==e||this.setProperty("current_subview",e)},getCurrentSubview:function(){return this.getProperty("current_subview")},_updateSubviewTransform:function(e,t){var n=null,n=t?t.id():"default",t=(this._subViewTransform[n]={zoom:this.get("zoom"),translate_x:this.get("translate_x"),translate_y:this.get("translate_y")},null),t=e?e.id():"default",n=this._subViewTransform[t];this.set(n=null==n?{zoom:1,translate_x:0,translate_y:0}:n)}},Xe(),{expandAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=gt(t,this._isVisible_,this)),this._expandProvider.set(this._filterExpandableData(t))},_isExpandable:function(e){return!!Sr(e)&&this.isExpandable.apply(this,arguments)},_addExpandNeedUpdateData:function(e){this._addNeedUpdateData(e,!0,!0)}},{_getDataRelatedDataArray:function(e,t,n){var r=[];return kr(e)?(r=pt(r,Qn.getAddedDescendantArray(this.getProvider(),e),Qn.getAncestorArray(e)),r=pt(r,Or.getNodeAgentLinks(this,e))):Lr(e)&&(r=Or.getSibling(this,e)),r.forEach(function(e){kr(e)&&r.push.apply(r,Or.getNodeAgentLinks(this,e))},this),r}})}function hr(e){return{_isLinkBundle_:!0,_isLinkBundleable:function(e){return this.isLinkBundleable(e)},isLinkBundleable:function(e){return!1!==this.getDataViewProperty(e,"bundleable","link_bundleable")},_updateLinkBundleProvider:function(){var n;this._removeLinkBundleProviderListener(),this._provider&&(this._linkBundleProvider||(this._linkBundleProvider=new ir(this._provider),(n=this)._linkBundleProvider.onProviderChange=function(e){var t;"remove"===e.type&&(e=e.data,(t=n.getLinkBundles(e)).length<3&&(vt(t,e),n._removeLinkBundle(t)))},this._linkBundleProvider.onDataChange=function(e){n._hasLinkBundled()&&(e=e.source,Lr(e)&&n.isLinkBundled(e)&&n.getLinkBundles(e).forEach(function(e){n._addLinkBundleNeedUpdateData(e)}))}),this._linkBundleProvider.setProvider(this._provider),this._addLinkBundleProviderListener())},_removeLinkBundleProviderListener:function(){this._linkBundleProvider&&this._linkBundleProvider.removeProviderChangeListener(this._handleLinkBundleProviderChange,this)},_addLinkBundleProviderListener:function(){this._linkBundleProvider.addProviderChangeListener(this._handleLinkBundleProviderChange,this)},_handleLinkBundleProviderChange:function(e){var t=e.type;"add"===t?this._onLinkBundleAdd(e.data):"remove"===t?this._onLinkBundleRemove(e.data):"clear"===t?this._onLinkBundleClear(e.data):"set"===t&&this._onLinkBundleSet(e.data),this._onLinkBundleChange(e)},_addLinkBundleNeedUpdateData:function(e){this._addNeedUpdateData(e,!1,!1)},_onLinkBundleAdd:function(e){this._addLinkBundleNeedUpdateData(e),this._callOn("onLinkBundle","on.link.bundle.add",e,[e])},onLinkBundle:function(e,t){this.addListener("on.link.bundle.add",e,t)},_onLinkBundleRemove:function(e){this._addLinkBundleNeedUpdateData(e,!1),this._callOn("onLinkUnbundle","on.link.bundle.remove",e,[e])},onLinkUnbundle:function(e,t){this.addListener("on.link.bundle.remove",e,t)},_onLinkBundleClear:function(e){e.forEach(this._addLinkBundleNeedUpdateData,this),this._callOn("onLinkBundleClear","on.link.bundle.clear",e,[e])},onLinkBundleClear:function(e,t){this.addListener("on.link.bundle.clear",e,t)},_onLinkBundleSet:function(e){e.forEach(this._addLinkBundleNeedUpdateData,this),this._callOn("onLinkBundleSet","on.link.bundle.set",e,[e])},onLinkBundleSet:function(e,t){this.addListener("on.link.bundle.set",e,t)},_onLinkBundleChange:function(e){this._update(),this._callOn("onLinkBundleChange","on.link.bundle.change",e,[e])},onLinkBundleChange:function(e,t){this.addListener("on.link.bundle.change",e,t)},_hasLinkBundled:function(){return 0<this._linkBundleProvider.size()},isLinkBundled:function(e){return!!(e=this._getModelData(e))&&this._linkBundleProvider.contains(e)},_isLinkBundleAgent:function(e){return!!Lr(e)&&this.isLinkBundleAgent(e,this.getLinkBundles(e))},isLinkBundleAgent:function(e,t){return e===t[0]},getLinkBundleSize:function(e){return this.getLinkBundles(e).length},getLinkBundles:function(e){var n,r,i,o,a=e.get("from"),t=e.get("to");return a&&t?(n=e.get("type"),r=e.has("bundle_group"),i=e.get("bundle_group"),o=e.isLoop(),gt(a.getLinksBetween(t),function(e){if(!this.containsData(e))return!1;if(r||e.has("bundle_group"))return e.get("bundle_group")===i;if(o&&e.isLoop())return!0;var t=e.get("type");return t===n&&("ra_hv"!==t&&"ra_vh"!==t||e.get("from")===a)},this)):[]},_getLinkArrayBundles:function(e){var t=[];return e.forEach(function(e){e=this.getLinkBundles(e);1<e.length&&pt(t,e)},this),t},getLinkBundled:function(e){return this._linkBundleProvider.toArray.apply(this._linkBundleProvider,arguments)},bundleLink:function(e){e=this._getModelDataArr(e,Lr);if(0!==e.length)return this._addLinkBundle(this._getLinkArrayBundles(e))},unbundleLink:function(e,t){var n,e=this._getModelDataArr(e,Lr);if(0!==e.length)return!0===t?(n=[],e.forEach(function(e){var t=this.getLinkBundles(e);t.length<3?pt(n,t):n.push(e)},this)):n=this._getLinkArrayBundles(e),this._removeLinkBundle(n)},bundleAllLinks:function(){var e=this._getLinkArrayBundles(gt(this.getDataArray(!1),Lr));return this._linkBundleProvider.set(this._filterLinkBundleableData(e))},unbundleAllLinks:function(){return this._linkBundleProvider.clear.apply(this._linkBundleProvider,arguments)},toggleLinkBundle:function(e){(e=this._getModelData(e))&&(this.isLinkBundled(e)?this.unbundleLink(e):this.bundleLink(e))},_addLinkBundle:function(e){return this._linkBundleProvider.add(this._filterLinkBundleableData(e))},_removeLinkBundle:function(e){e.forEach(function(e){this._linkBundleProvider.remove(e)},this)},_filterLinkBundleableData:function(e){return e.filter(function(e){return this._isLinkBundleable(e)&&!this.isDisabled(e)},this)}}}function ur(){ur.superClass.constructor.apply(this,arguments)}function _r(e){if(!(this instanceof _r))return xt.createInstance(_r,arguments);this._linkArray=[],this._fromLinkArray=[],this._toLinkArray=[],_r.superClass.constructor.apply(this,arguments)}function pr(e,t,n){if(!(this instanceof pr))return xt.createInstance(pr,arguments);1===(a=arguments.length)?r=e:2===a?(i=e,o=t):3===a&&(i=e,o=t,r=n);var r,i,o,a=Ne(r)?[r]:[];pr.superClass.constructor.apply(this,a),i&&this.set("from",i),o&&this.set("to",o)}function fr(){if(!(this instanceof fr))return xt.createInstance(fr,arguments);fr.superClass.constructor.apply(this,arguments)}function gr(){if(!(this instanceof gr))return xt.createInstance(gr,arguments);gr.superClass.constructor.apply(this,arguments)}function yr(e,t,n){if(!(this instanceof yr))return xt.createInstance(yr,arguments);yr.superClass.constructor.apply(this,arguments)}function vr(){vr.superClass.constructor.apply(this,arguments)}function Cr(){Cr.superClass.constructor.apply(this,arguments)}function mr(){mr.superClass.constructor.apply(this,arguments)}function br(){br.superClass.constructor.apply(this,arguments)}function xr(){xr.superClass.constructor.apply(this,arguments)}function Pr(){Pr.superClass.constructor.apply(this,arguments)}function wr(e,t){Jn.isGView(e)||1!==arguments.length||(t=arguments[0],e=null),this._gView=e,this._is_updating=!1,wr.superClass.constructor.apply(this,[t]),this._updateStartOnChange()}function Rr(e,t){this._damper=1,this._maxMotion=0,this._motionRatio=0,this._sNodeMap={},this._sNodeArr=[],this._sLinkArr=[],Rr.superClass.constructor.apply(this,arguments)}function Dr(){if(!(this instanceof Dr))return xt.createInstance(Dr,arguments);this._subViewTransform={},Dr.superClass.constructor.apply(this,arguments),this._initControllerCanvas(),this.addController(new br),this.addController(new mr),this.addController(new xr),this.addController(new Pr)}Fe({GVIEW_NODE_WIDTH:32,GVIEW_NODE_HEIGHT:32,GVIEW_GROUP_WIDTH:36,GVIEW_GROUP_HEIGHT:36,GVIEW_SUBVIEW_WIDTH:60,GVIEW_SUBVIEW_HEIGHT:36,GVIEW_NODE_SHAPE:"circle",GVIEW_NODE_FILL:"#0175a2",GVIEW_NODE_STROKE:"#0175a2",GVIEW_NODE_STROKE_LINE_WIDTH:1,GVIEW_NODE_HEATMAP_COLORS:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},GVIEW_NODE_LABEL_POSITION:"bottom",GVIEW_NODE_LABEL_GAP:3,GVIEW_NODE_SELECT_BORDER_PADDING:2,GVIEW_NODE_OUTLINE_PADDING:2,GVIEW_NODE_OUTLINE_STROKE_LINE_WIDTH:1,GVIEW_GROUP_SHAPE:"roundrect",GVIEW_GROUP_EXPAND_SHAPE:"covexhull",GVIEW_GROUP_EXPAND_FILL:"rgba(50,100,200,0.1)",GVIEW_GROUP_EXPAND_STROKE:"#0175a2",GVIEW_GROUP_EXPAND_PADDING:10,GVIEW_SUBVIEW_SHAPE:"cloud",GVIEW_LINK_STROKE:"#0175a2",GVIEW_LINK_STROKE_LINE_WIDTH:1,GVIEW_LABEL_FILL:"#000",GVIEW_LABEL_BOX_PADDING:2,GVIEW_INFO_FILL:"#000",GVIEW_INFO_BOX_FILL:"#0EB29A",GVIEW_SELECT_BORDER_STROKE_LINE_WIDTH:1,GVIEW_SELECT_BORDER_STROKE:"#0EB29A",GVIEW_SELECT_SHADOW_COLOR:"#0EB29A",GVIEW_SELECT_SHADOW_BLUR:6,GVIEW_HOVER_STYLE:{shadowColor:"#888",shadowBlur:6},GVIEW_LINK_GAP:16,GVIEW_HIT_PADDING:2,GVIEW_GROUP_EXPAND_ON_DBLCLICK:!0,GVIEW_SUBVIEW_DRILL_ON_DBLCLICK:!0,GVIEW_LINK_BUNDLE_ON_DBLCLICK:!0});var Ar={getDrawGroupArray:function(t){return gt(Ar._getDrawNodeArray(t),function(e){return Sr(e)&&t.isExpanded(e)})},getDrawNodeArray:function(t){return gt(Ar._getDrawNodeArray(t),function(e){return Sr(e)?!t.isExpanded(e):kr(e)})},_getDrawNodeArray:function(n){var e=n.getCurrentSubview(),r=e?e.getChildren():n.getRootDataArray(),t=[];return r.sort(function(e,t){return Ar._indexCompare(n,r,e,t)}),r.forEach(function(e){Ar._fillIndexArr(n,e,t)}),gt(t,function(e){return kr(e)})},_fillIndexArr:function(n,e,t){var r;kr(e)&&t.push(e),e.hasChildren()&&((r=e.getChildren(!1)).sort(function(e,t){return Ar._indexCompare(n,r,e,t)}),r.forEach(function(e){Ar._fillIndexArr(n,e,t)}))},_indexCompare:function(e,t,n,r){var i=Ar._getSelectIndex(e,n),e=Ar._getSelectIndex(e,r);return i===e&&(i=t.indexOf(n),e=t.indexOf(r)),e<i?1:i<e?-1:0},_getSelectIndex:function(t,n){var r=[Ar._getDataSelectIndex(t,n)];return kr(n)&&Mr.getSameSubviewDescendantArray(t,n).forEach(function(e){r.push(Ar._getDataSelectIndex(t,n))}),at.apply(null,r)},_getDataSelectIndex:function(e,t){return e.getSelected(!1).indexOf(t)}},m={getNodeViewProperty:function(e,t,n,r){return m._getDataViewPrefixProperty(e,t,n,"node",r)},getLinkViewProperty:function(e,t,n,r){return m._getDataViewPrefixProperty(e,t,n,"link",r)},getGroupViewProperty:function(e,t,n,r){return m._getDataViewPrefixProperty(e,t,n,"group",r)},getDataViewLabelProperty:function(e,t,n,r){return m._getDataViewPrefixProperty(e,t,n,null,r)},getDataViewInfoProperty:function(e,t,n,r){return m._getDataViewPrefixProperty(e,t,n,null,r)},getDataViewVisibleLabel:function(e,t){return e?!1!==e.getDataViewProperty(t,"label_visible")?e.getLabel(t):null:t.getProperty("name")},getDataViewVisibleInfo:function(e,t){return e?!1!==e.getDataViewProperty(t,"info_visible")?e.getInfo(t):null:t.getProperty("info")},getFont:function(e){return e||Kn.getSystemFont()},getOffset:function(e,t,n){var r=m._getDataViewPrefixProperty(e,t,n+"_offset");return r?{x:0|r.x,y:0|r.y}:{x:0|m._getDataViewPrefixProperty(e,t,n+"_offset_x"),y:0|m._getDataViewPrefixProperty(e,t,n+"_offset_y")}},_getDataViewPrefixProperty:function(e,t,n,r,i){return e?e.getDataViewProperty(t,n,m._getViewPrefixProperty(n,r,i)):t.getProperty(n)},_hasDataViewPrefixProperty:function(e,t,n,r,i){return e?e.hasDataViewProperty(t,n,m._getViewPrefixProperty(n,r,i)):t.hasProperty(n)},_getViewPrefixProperty:function(e,t,n){return n=null==n?t?t+"_"+e:e:n},getVisibleDataBounds:function(t,n){var r=[],i=!0;return null!=n&&0<n.length&&(i=!1),ft(t.getDataArray(!1),function(e){!1===i&&-1===n.indexOf(e)||e.getBounds&&t._isVisible(e)&&((e=e.getBounds(t,!1))&&r.push(e))}),Be.calcRectsUnion(r)},toDataURL:function(e,t){var n=m.getVisibleDataBounds(e);if(null==n)return null;var r=n.width,i=n.height,o=We("canvas"),r=(o.setAttribute("width",r+10),o.setAttribute("height",i+10),o.getContext("2d")),i=e.getProperty("label_font")||Kn.getSystemFont(),i=(r.font!==i&&(r.font=i),E),i=(1!==i&&r.scale(i,i),-(n.x-5)),n=-(n.y-5);return 0==i&&0==n||r.setTransform(1,0,0,1,i,n),e._drawData(r),o.toDataURL(t||"image/png")}},kr=(Ue(Jn,{isNode:function(e,t){var n=Jn._isIModelType(e,"Node",re);return!0===t&&!0===n?!Sr(e)&&!Er(e):n},isLink:function(e,t){var n=Jn._isIModelType(e,"Link",ie);return!0===t&&!0===n?!Tr(e):n},isGroup:function(e){return Jn._isIModelType(e,"Group",oe)},isSubview:function(e){return Jn._isIModelType(e,"Subview",ae)},isLinkSubview:function(e){return Jn._isIModelType(e,"LinkSubview",se)},isGView:function(e){return Jn._isIModelType(e,"GView",ne)}}),Jn.isNode),Lr=Jn.isLink,Sr=Jn.isGroup,Er=Jn.isSubview,Tr=Jn.isLinkSubview,Vr={isPointsNode:function(e){e=e.getType();return"path"===e||"heatmap"===e},getSizeProperty:function(e,t,n){var r="node_"+n;if(e&&e.hasDataViewProperty(t,n,r))return e.getDataViewProperty(t,n,r);if("image"===t.getType()){var i=t.getProperty("image");if(i){i=ht(i)?St.get(i):i;if(i)return i[n]}}return e?e.getDataViewProperty(t,n,r):t.getProperty(n)},setPosition:function(e,t,n){null!=n&&(Vr.isPointsNode(t)?Vr.updateNodePointsByBounds(e,t,n):(t.setProperty("x",n.x),t.setProperty("y",n.y)))},setSize:function(e,t,n){null!=n&&(Vr.isPointsNode(t)?Vr.updateNodePointsByBounds(e,t,n):(t.setProperty("width",n.width),t.setProperty("height",n.height)))},updateNodePointsByBounds:function(e,t,n){var r=t.get("points")||[];if(!(r.length<1)){e=t.getBounds(e);if(null!=e){var i=1;if(n.hasOwnProperty("width")){if(e.width<=0)return;i=n.width/e.width}var o=1;if(n.hasOwnProperty("height")){if(e.height<=0)return;o=n.height/e.height}var a=0,s=e.x,l=(n.hasOwnProperty("x")&&(a=n.x-e.x,s=n.x),0),c=e.y,d=(n.hasOwnProperty("y")&&(l=n.y-e.y,c=n.y),[]);r.forEach(function(e){d.push(Ue(e,{x:s+(e.x+a-s)*i,y:c+(e.y+l-c)*o}))}),t.set("points",d)}}},isGIFNode:function(e){if("image"!==e.getType())return!1;e=e.get("image");return!!ht(e)&&e.endsWith(".gif")}},Or={getLoopSibling:function(t,e){var n=e.getProperty("from"),e=gt(n.getFromLinks(!1),function(e){return n===e.getProperty("to")});return t?gt(e,function(e){return t._isVisible(e)}):e},getSiblingByType:function(e,t,n){return Or._getSibling(e,t,n,!0)},getSibling:function(e,t,n){return Or._getSibling(e,t,n,!1)},_getSibling:function(t,e,n,r){var i,o,a,s=Or.getFromNodeAgent(t,e),l=Or.getToNodeAgent(t,e),c=[];return s&&l&&(i=m.getLinkViewProperty(t,e,"type"),e=Or.getNodeAgentLinks(t,s),o=Or.getNodeAgentLinks(t,l),e.forEach(function(e){o.indexOf(e)<0||t&&!t._isVisible(e)||!0===n&&Or.getFromNodeAgent(t,e)!==s||!0===r&&m.getLinkViewProperty(t,e,"type")!==i||c.push(e)})),1<c.length&&(a=t.getDataArray(!1),c=c.sort(function(e,t){return a.indexOf(e)-a.indexOf(t)})),c},getNodeAgentLinks:function(t,n){var r=[];return t&&Qn.getAddedDescendantArray(t.getProvider(),n).forEach(function(e){!kr(e)||0<(e=e.getLinks()).length&&e.forEach(function(e){Or.getFromNodeAgent(t,e)!==n&&Or.getToNodeAgent(t,e)!==n||r.push(e)})}),gt(pt(r,n.getLinks()),function(e,t){return r.indexOf(e)===t})},getFromNodeAgent:function(e,t){var n,r;return e?(n=Or._getCurrentSubviewAgent(e,t.getProperty("from")))===(r=Or._getCurrentSubviewAgent(e,t.getProperty("to")))?n:Or._getSpanSubviewAgent(e,n,r):t.getProperty("from")},getToNodeAgent:function(e,t){var n,r;return e?(n=Or._getCurrentSubviewAgent(e,t.get("to")),(r=Or._getCurrentSubviewAgent(e,t.get("from")))===n?n:Or._getSpanSubviewAgent(e,n,r)):t.getProperty("to")},_getCurrentSubviewAgent:function(e,t){if(!t)return null;for(var n=t.get("parent");Sr(n);){if(!Sr(n.get("parent")))return!0===e.isExpanded(n)?t:n;!0!==e.isExpanded(n)&&(t=n),n=n.get("parent")}return kr(t)?t:null},_getSpanSubviewAgent:function(e,t,n){if(!t||!n)return null;var r=Mr.getDataSubview(t),i=Mr.getDataSubview(n);if(r===i)return kr(t)?t:null;for(;null!=i&&r!==i;)i=Mr.getDataSubview(i);if(r===i)return t;for(var o=[],a=(o.push(t),t.get("parent"));kr(a)&&!Qn.isDescendantOf(n,a);)o.unshift(a),a=a.get("parent");for(var s=o.length,l=0;l<s;l++){var c=o[l];if(Sr(c)&&!0==!e.isExpanded(c))return c;if(Er(c))return c}return t}},Ir={getGroupAncestorArray:function(e){for(var t=[],n=e.get("parent");n;)Sr(n)&&t.push(n),n=n.get("parent");return t},getGroupVisibleNodes:function(t,e){e=gt(e.getGroupChildren(),function(e){return kr(e)});return t?gt(e,function(e){return t._isVisible_(e)}):e},setPosition:function(e,t,n){var r=t.getBounds(e);Ir.updateChildrenPositionByOffset(e,t,n.x-r.x,n.y-r.y)},updateChildrenPositionByOffset:function(n,e,r,i){e.getGroupChildren().forEach(function(e){var t=e.getBounds(n);e.setPosition({x:t.x+r,y:t.y+i})})}},Mr={getDataSubview:function(e){for(var t=e.get("parent");t&&!Jn.isSubview(t);)t=t.get("parent");return t},getSameSubviewAncestorArray:function(e){for(var t=[],n=e.get("parent");n&&!Er(n);)t.push(n),n=n.get("parent");return t},getSameSubviewDescendantArray:function(e,t){var e=Qn.getAddedDescendantArray(e.getProvider(),t),n=Mr.getDataSubview(t);return gt(e,function(e){return n===Mr.getDataSubview(e)})},expandSameSubviewGroup:function(t,e,n){var r;e&&(r=Mr.getSameSubviewAncestorArray(e),!0===n&&r.unshift(e),r.forEach(function(e){Sr(e)&&t.expand(e)}))},getSpanSubview:function(e,t){if(!e||!t)return null;var n=Qn.getAncestorArray(t);return yt(Qn.getAncestorArray(e),function(e){return-1<n.indexOf(e)&&Er(e)})}},Br={calcLinkDefaultPath:function(e,t,n,r,i,o,a){var s,l,t=-(n.indexOf(t)-(n.length/2-.5))*r;return e.same_direction?(s=e.from,l=e.to):(s=e.to,l=e.from,t=-t),n=Ee(s,l),0<a?[s,Ie.calcRotatedPoint(s,{x:s.x+a,y:s.y+t},n),Ie.calcRotatedPoint(l,{x:l.x-a,y:l.y+t},n),l]:[Ie.calcRotatedPoint(s,{x:s.x,y:s.y+t},n),Ie.calcRotatedPoint(l,{x:l.x,y:l.y+t},n)]},_getPositionPoint:function(e,t,n){var r,i=e.x,o=e.y,a=e.width,d=e.height,s=i+a/2,l=o+d/2,c=t.x,h=t.y,u=c+t.width/2,_=h+t.height/2;switch(n="edge_center"===n?45<(c=Ee({x:s,y:l},{x:u,y:_}))&&c<135?"bottom":135<=c&&c<=225?"left":225<c&&c<315?"top":"right":n){case"center":r={x:s,y:l};break;case"top":r={x:s,y:o};break;case"right":r={x:i+a,y:l};break;case"bottom":r={x:s,y:o+d};break;case"left":r={x:i,y:l};break;case"v_center":r=l<_?{x:s,y:o+d}:{x:s,y:o};break;case"h_center":r=s<u?{x:i+a,y:l}:{x:i,y:l};break;default:r=Oe.calcRectLineIntersection(e,{x:u,y:_},{x:s,y:l},!0)[0]}return r=null==r?{x:s,y:l}:r}},zr={calcLinkLoopPath:function(e,t,n,r){t=t.indexOf(e),e=r.x+r.width,r=r.y,t=n+t*n,n=.551915024494*t;return[{x:e-t,y:r,seg:"bezier_curve_to"},{x:e-t,y:r-n},{x:e-n,y:r-t},{x:e,y:r-t,seg:"bezier_curve_to"},{x:e+n,y:r-t},{x:e+t,y:r-n},{x:e+t,y:r,seg:"bezier_curve_to"},{x:e+t,y:r+n},{x:e+n,y:r+t},{x:e,y:r+t}]}},Nr={calcLinkRAPath:function(e,t,n,r,i,o,a){switch(e){case"ra_hv":return Nr.calcLinkRAHVPath(t,n,r,i,o);case"ra_vh":return Nr.calcLinkRAVHPath(t,n,r,i,o);case"ra_hvh":return Nr.calcLinkRAHVHPath(t,n,r,i,o,a);case"ra_vhv":return Nr.calcLinkRAVHVPath(t,n,r,i,o,a);case"ra_top":return Nr.calcLinkRATopPath(t,n,r,i,o);case"ra_bottom":return Nr.calcLinkRABottomPath(t,n,r,i,o);case"ra_left":return Nr.calcLinkRALeftPath(t,n,r,i,o);case"ra_right":return Nr.calcLinkRARightPath(t,n,r,i,o)}},calcLinkRABottomPath:function(e,t,n,r,i){var o,a,s,e=t.indexOf(e),t=t.length/2,d=r.y+r.height,h=i.y+i.height,r=r.x+r.width/2,i=i.x+i.width/2,l=at(2*n,6),c=e*n,l=at(d,h)+l+c,c=(t-.5)*n-e*n,t=r<i?(a={x:(o={x:r+c,y:d}).x,y:l},{x:(s={x:i-c,y:h}).x,y:l}):(a={x:(o={x:r-c,y:d}).x,y:l},{x:(s={x:i+c,y:h}).x,y:l});return[o,a,t,s]},calcLinkRAHVPath:function(e,t,n,r,i){var o,a,e=t.indexOf(e),t=t.length/2,s=r.y+r.height/2,l=i.y+i.height/2,d=r.x+r.width/2,c=i.x+i.width/2,h=r.x,r=r.x+r.width,u=i.y,i=i.y+i.height,t=(t-.5)*n-e*n,e=d<c?{x:(a=s<l?{x:c+t,y:u}:{x:c-t,y:i}).x,y:(o={x:r,y:s-t}).y}:{x:(a=s<l?{x:c-t,y:u}:{x:c+t,y:i}).x,y:(o={x:h,y:s-t}).y};return[o,e,a]},calcLinkRAHVHPath:function(e,d,t,n,r,i){var o,h,u,a,e=d.indexOf(e),d=d.length,_=d/2,s=n.y+n.height/2,l=r.y+r.height/2,p=n.x+n.width/2,f=r.x+r.width/2,g=n.x,n=n.x+n.width,c=r.x,r=r.x+r.width,y=(_-.5)*t-e*t,_=(_-.5)*t*2,n=p<f?(o={x:n,y:s-y},{x:c,y:l-y}):(o={x:g,y:s-y},{x:r,y:l-y}),c=ot(o.x-n.x),g=i.from_corner_distance,r=i.to_corner_distance,i=-1,v=-1,r=(0<r&&r<c&&(v=r<1?c*r:r),!0),C=!0;return-1!==(i=0<g&&g<c?g<1?c*g:g:i)&&-1!==v?i+v<c-_&&(C=r=!1):(-1!==v&&v<c-_&&(C=!1),-1!==i&&i<c-_&&(r=!1)),!0!==r&&!0!==C||(h=p<f?s<l?(o.x+n.x)/2+y:(o.x+n.x)/2-y:s<l?(o.x+n.x)/2-y:(o.x+n.x)/2+y),!1===r&&(p<f?(u=o.x+i,u+=s<l?(d-e-1)*t:e*t):(u=o.x-i,u-=s<l?(d-e-1)*t:e*t)),!1===C&&(p<f?(a=n.x-v,a-=s<l?e*t:(d-e-1)*t):(a=n.x+v,a+=s<l?e*t:(d-e-1)*t)),!1===r?!0===C&&(a=u):u=!1===C?a:a=h,[o,{x:u,y:o.y},{x:a,y:n.y},n]},calcLinkRALeftPath:function(e,t,n,r,i){var o,a,s,e=t.indexOf(e),t=t.length/2,d=r.x,h=i.x,r=r.y+r.height/2,i=i.y+i.height/2,l=at(2*n,6),c=e*n,l=st(d,h)-l-c,c=(t-.5)*n-e*n,t=r<i?(a={x:l,y:(o={x:d,y:r+c}).y},{x:l,y:(s={x:h,y:i-c}).y}):(a={x:l,y:(o={x:d,y:r-c}).y},{x:l,y:(s={x:h,y:i+c}).y});return[o,a,t,s]},calcLinkRARightPath:function(e,t,n,r,i){var o,a,s,e=t.indexOf(e),t=t.length/2,d=r.x+r.width,h=i.x+i.width,r=r.y+r.height/2,i=i.y+i.height/2,l=at(2*n,6),c=e*n,l=at(d,h)+l+c,c=(t-.5)*n-e*n,t=r<i?(a={x:l,y:(o={x:d,y:r+c}).y},{x:l,y:(s={x:h,y:i-c}).y}):(a={x:l,y:(o={x:d,y:r-c}).y},{x:l,y:(s={x:h,y:i+c}).y});return[o,a,t,s]},calcLinkRATopPath:function(e,t,n,r,i){var o,a,s,e=t.indexOf(e),t=t.length/2,d=r.y,h=i.y,r=r.x+r.width/2,i=i.x+i.width/2,l=at(2*n,6),c=e*n,l=st(d,h)-l-c,c=(t-.5)*n-e*n,t=r<i?(a={x:(o={x:r+c,y:d}).x,y:l},{x:(s={x:i-c,y:h}).x,y:l}):(a={x:(o={x:r-c,y:d}).x,y:l},{x:(s={x:i+c,y:h}).x,y:l});return[o,a,t,s]},calcLinkRAVHPath:function(e,t,n,r,i){var o,e=t.indexOf(e),t=t.length/2,a=r.y+r.height/2,s=i.y+i.height/2,l=r.x+r.width/2,d=i.x+i.width/2,c=r.y,r=r.y+r.height,h=i.x,i=i.x+i.width,t=(t-.5)*n-e*n,n=(e=l<d?a<s?(o={x:l-t,y:r},{x:h,y:s+t}):(o={x:l-t,y:c},{x:h,y:s-t}):a<s?(o={x:l-t,y:r},{x:i,y:s-t}):(o={x:l-t,y:c},{x:i,y:s+t}),{x:o.x,y:e.y});return[o,n,e]},calcLinkRAVHVPath:function(e,d,t,n,r,i){var o,h,u,a,e=d.indexOf(e),d=d.length,_=d/2,p=n.y+n.height/2,f=r.y+r.height/2,s=n.x+n.width/2,l=r.x+r.width/2,g=n.y,n=n.y+n.height,c=r.y,r=r.y+r.height,y=(_-.5)*t-e*t,_=(_-.5)*t*2,n=p<f?(o={x:s-y,y:n},{x:l-y,y:c}):(o={x:s-y,y:g},{x:l-y,y:r}),c=ot(o.y-n.y),g=i.from_corner_distance,r=i.to_corner_distance,i=-1,v=-1,r=(0<r&&r<c&&(v=r<1?c*r:r),!0),C=!0;return-1!==(i=0<g&&g<c?g<1?c*g:g:i)&&-1!==v?i+v<c-_&&(C=r=!1):(-1!==v&&v<c-_&&(C=!1),-1!==i&&i<c-_&&(r=!1)),!0!==r&&!0!==C||(h=p<f?s<l?(o.y+n.y)/2+y:(o.y+n.y)/2-y:s<l?(o.y+n.y)/2-y:(o.y+n.y)/2+y),!1===r&&(p<f?(u=o.y+i,u+=s<l?(d-e-1)*t:e*t):(u=o.y-i,u-=s<l?(d-e-1)*t:e*t)),!1===C&&(p<f?(a=n.y-v,a-=s<l?e*t:(d-e-1)*t):(a=n.y+v,a+=s<l?e*t:(d-e-1)*t)),!1===r?!0===C&&(a=u):u=!1===C?a:a=h,[o,{x:o.x,y:u},{x:n.x,y:a},n]}},Ur={calcLinkCurvePath:function(e,t,n,r,i,o,a,s){switch(e){case"quadratic":return Ur.calcLinkQuadraticPath(t,n,r,i,o,a,s);case"cubic":return Ur.calcLinkCubicPath(t,n,r,i,o,a,s)}},calcLinkCubicPath:function(e,t,n,r,i,o,a){e=Br.calcLinkDefaultPath(e,t,n,r,i,o);if(0===a)return e;t=e[0],n=e[1],r=Ee(t,n),i=Se(t,n),o=i*a,e=t.x+i/2,a=Ie.calcRotatedPoint(t,{x:e,y:t.y-o},r),i=Ie.calcRotatedPoint(t,{x:e,y:t.y+o},r);return t.seg="bezier_curve_to",[t,a,i,n]},calcLinkQuadraticPath:function(e,t,n,r,i,o,a){e=Br.calcLinkDefaultPath(e,t,n,r,i,o);if(0===a)return e;t=e[0],n=e[1],r=Ee(t,n),i=Se(t,n),o=t.x+i/2,e=Ie.calcRotatedPoint(t,{x:o,y:t.y+i*a},r);return t.seg="quadratic_curve_to",[t,e,n]}},Gr={calcArrowRenderProperties:function(e,t,n,r,i,o,a){return 0!==i&&(n=Oe.calcOffsetPointOnLine(n,t,i)),Gr._calcShapeArrow(e,t,n,o,a)||Gr._calcPathArrow(e,t,n,r,a)},calcArrowSizeLength:function(e,t){return t=it(t),e=it(e)+2,lt(e*(t*t/32+t/16+1.9))+1},_calcShapeArrow:function(e,t,n,r,i){var o=i*=.8;if(-1<["rect","circle","roundrect","triangle","right_triangle","pentagon","hexagon","star","parallelogram","cloud","ellipse","diamond"].indexOf(e))return t=Ee(t,n),"circle"===e?t=0:"ellipse"!==e&&"diamond"!==e||(o*=1.2),{type:"shape",shape:e,shape_bounds:e={x:n.x-o/2,y:n.y-i/2,width:o,height:i},rotation:t,bounds:Be.calcRotatedRect(e,t)}},_calcPathArrow:function(e,t,n,r,i){t=Gr._calcArrowPoints(e,t,n,i,r,0);if(t)return{type:"path",shape:e,points:t,bounds:Ie.calcPointsBounds(t)}},_calcArrowPoints:function(e,t,n,r,i,o){null!=o&&0!==o&&(n=Oe.calcOffsetPointOnLine(n,t,o));var a,s=Gr._calcArrowAllPoints(t,n,r,i);switch(e){case"open_arrow":a=s.slice(0,3);break;case"stealth_arrow":a=s;break;case"arrow":a=s.slice(0,3)}return!a||"open_arrow"===e||(o=a[a.length-1])&&(o.seg="close"),a},_calcArrowAllPoints:function(e,t,n,r){var i=e.x,o=e.y,i={x:i+Se(e,t),y:o},r=Le(r/2),a=n*G(r),n=n*H(r),r={x:i.x-a,y:i.y-n},n={x:i.x-a,y:i.y+n},a={x:i.x-2*a/3,y:o},o=Ee(e,t);return[Ie.calcRotatedPoint(e,r,o),Ie.calcRotatedPoint(e,i,o),Ie.calcRotatedPoint(e,n,o),Ie.calcRotatedPoint(e,a,o)]}},Hr={calcGroupBounds:function(e,t,n,r){e=Hr.calcGroupRenderProperties(e,t,n,r);if(e)return e.bounds_render},calcGroupRenderProperties:function(e,t,d,n){var r,i,o,a,h,u,_=Hr._calcGroupExpandRenderProps(e,t);if(null==(r=_?_.bounds:r))return qr.calcNodeRenderProperties(e,t,n);r=d?r:(s=(l=qr.calcNodeBodyBounds(e,t)).width,l=l.height,{x:r.x+r.width/2-s/2,y:r.y+r.height/2-l/2,width:s,height:l}),!0!==n&&(i=qr._calcNodeOutlineBounds(e,t,r),(o=Wr.calcNodeLabelRenderProperties(e,t,r))&&(c=o.bounds),(a=Fr.calcNodeInfoRenderProperties(e,t,r))&&(h=a.bounds),u=qr._calcNodeBorderBounds(e,t,r,i));var s=gt([r,i,c,h],function(e){return null!=e}),l=Be.calcRectsUnion(s),n=0,c=(d||(n=it(m.getNodeViewProperty(e,t,"rotation"))||0),Be.getRectCenter(r));return{is_group:!0,expand_render_props:_,body_bounds:r,body_bounds_render:Be.calcRotatedRect(r,n,c),outline_bounds:i,outline_bounds_render:Be.calcRotatedRect(i,n,c),border_bounds:Be.calcRotatedRect(u,n,c),label_render_props:o,info_render_props:a,bounds:l,bounds_render:Be.calcRotatedRect(l,n,c)}},_calcGroupExpandRenderProps:function(e,t){var n=Hr._calcGroupedChildrenPoints(e,t);if(0===n.length)return null;var r,d,i=Ie.calcPointsBounds(n),o={x:i.x+i.width/2,y:i.y+i.height/2},a="shape";switch(m.getGroupViewProperty(e,t,"expand_shape")){case"rect":l=i;break;case"circle":var s=Se({x:i.x,y:i.y},o),l={x:o.x-s,y:o.y-s,width:2*s,height:2*s};break;case"ellipse":var s=N(2)/2*i.width,c=N(2)/2*i.height;l={x:o.x-s,y:o.y-c,width:2*s,height:2*c};break;case"roundrect":s=0,c=zn.getRoundRectRadii(i,m.getGroupViewProperty(e,t,"expand_roundrect_radius"));c&&0<c.length&&(s=at.apply(null,c),s*=1-G(Le(45))),0<s&&(l=Be.createGrowRect(i,s));break;case"parallelogram":a="path",r=Ie.calcParallelogramPoints(n,0|m.getGroupViewProperty(e,t,"expand_parallelogram_angle"));break;default:a="path",r=Ve.convexHull(n)}return"path"===a&&null!=r&&((d=r[r.length-1])&&(d.seg="close"),l=Ie.calcPointsBounds(r)),{type:a,bounds:l,points:r}},_calcGroupedChildrenPoints:function(t,e){var n=Ir.getGroupVisibleNodes(t,e),r=m.getGroupViewProperty(t,e,"expand_padding"),i=(r|=0,[]);return n.forEach(function(e){e=e.getBounds(t,!1);e&&(i.push({x:e.x-r,y:e.y-r}),i.push({x:e.x-r,y:e.y+e.height+r}),i.push({x:e.x+e.width+r,y:e.y+e.height+r}),i.push({x:e.x+e.width+r,y:e.y-r}))}),i}},Wr={calcNodeLabelRenderProperties:function(e,t,n){var r=Wr._calcLabelSize(e,t);if(null==r)return null;var i,o,a,s,l=r.width,d=r.height,h=n.x,u=n.y,_=n.width,p=n.height,f=0|m.getDataViewLabelProperty(e,t,"label_gap"),n=m.getOffset(e,t,"label"),g=m.getDataViewLabelProperty(e,t,"label_position"),c=m.getDataViewLabelProperty(e,t,"label_direction"),y=0,v=0;switch(g){case"top":i=h+_/2,o=u,"top"===(c=c||"top")&&(v=-f);break;case"left":i=h,o=u+p/2,"left"===(c=c||"left")&&(y=-f);break;case"right":i=h+_,o=u+p/2,"right"===(c=c||"right")&&(y=f);break;case"center":i=h+_/2,o=u+p/2,c=c||"center";break;default:i=h+_/2,o=u+p,"bottom"===(c=c||"bottom")&&(v=f)}switch(i+=y+n.x,o+=v+n.y,c){case"top":a=i-l/2,s=o-d;break;case"bottom":a=i-l/2,s=o;break;case"left":a=i-l,s=o-d/2;break;case"right":a=i,s=o-d/2;break;case"left_top":a=i-l,s=o-d;break;case"left_bottom":a=i-l,s=o;break;case"right_top":a=i,s=o-d;break;case"right_bottom":a=i,s=o;break;default:a=i-l/2,s=o-d/2}var C,g={x:a,y:s,width:l,height:d},n=it(m.getNodeViewProperty(e,t,"label_rotation"))||0,r={label:{size:r,bounds:g,bounds_render:Be.calcRotatedRect(g,n),render_props:{point:{x:a+l/2,y:s+d/2},direction:"center_middle",bounds:g,rotation:n}}};return null==m.getDataViewLabelProperty(e,t,"label_box_stroke")&&null==m.getDataViewLabelProperty(e,t,"label_box_fill")||(C=Be.createGrowRect(g,m.getDataViewLabelProperty(e,t,"label_box_padding")||0),r.label_box={bounds:C,bounds_render:Be.calcRotatedRect(C,n),render_props:{bounds:C,rotation:n}}),C?(r.bounds=r.label_box.bounds,r.bounds_render=r.label_box.bounds_render):(r.bounds=r.label.bounds,r.bounds_render=r.label.bounds_render),r},calcLinkLabelRenderProperties:function(e,t,n){var r=Wr._calcLabelSize(e,t);if(null==r)return null;if(!(s=t.isLoop()?{x:(s=Me.calcPathBounds(n)).x+s.width/2,y:s.y,angle:0}:Wr._calcPathLabelCenter(n)))return null;var i,n=s.x,o=s.y,a=m.getOffset(e,t,"label"),a=(n+=a.x,o+=a.y,0),s=(!0===m.getLinkViewProperty(e,t,"label_rotation")&&(a=90<(s=s.angle)&&s<=270?Te(s-180):s),{x:n,y:o}),n={x:n-r.width/2,y:o-r.height/2,width:r.width,height:r.height},o={label:{size:r,bounds:n,bounds_render:Be.calcRotatedRect(n,a)}};return o.label.render_props={rotation:a,point:s,direction:"center",bounds:n},null==m.getDataViewLabelProperty(e,t,"label_box_stroke")&&null==m.getDataViewLabelProperty(e,t,"label_box_fill")||(i=Be.createGrowRect(n,m.getDataViewLabelProperty(e,t,"label_box_padding")||0),o.label_box={bounds:i,bounds_render:Be.calcRotatedRect(i,a),render_props:{bounds:i,rotation:a}}),i?(o.bounds=o.label_box.bounds,o.bounds_render=o.label_box.bounds_render):(o.bounds=o.label.bounds,o.bounds_render=o.label.bounds),o},_calcPathLabelCenter:function(e){var t=(e=e||[]).length;return t<2?null:t%2==0?Wr._calcEvenPathLabelCenter(e):Wr._calcOddPathLabelCenter(e)},_calcEvenPathLabelCenter:function(e){var t,n=e.length/2|0,r=e[n-1],i=e[n],o=e[n-2],e=e[1+n],n=o&&we.isBezierCurveTo(o.seg)&&e?(t=Me.calcOffsetPointOnPath([o,r,i,e],.5,!0)).angle:(t=Oe.calcOffsetPointOnLine(r,i,.5,!0),Ee(r,i));return t.angle=n,t},_calcOddPathLabelCenter:function(e){var t,n=e.length/2|0,r=e[n],i=e[n-1],e=e[1+n];return i=we.isQuadraticCurveTo(i.seg)?(t=Me.calcOffsetPointOnPath([i,r,e],.5,!0)).angle:(n=ot(i.y-r.y)<ot(e.y-r.y)?i:e,t=Oe.calcOffsetPointOnLine(r,n,.5,!0),Ee(n,r)),t.angle=i,t},_calcLabelSize:function(e,t){var n=m.getDataViewVisibleLabel(e,t);if(null!=n)return Kn.calcTextSize(m.getFont(m.getDataViewLabelProperty(e,t,"label_font")),n)}},Fr={calcNodeInfoRenderProperties:function(e,t,n){var r=Fr._calcInfoSize(e,t);return null==r?null:Fr._calcDataInfoRenderProperties(e,t,r,n.x+n.width,n.y)},calcLinkInfoRenderProperties:function(e,t,n){var r,i=Fr._calcInfoSize(e,t);return null==i?null:(r=t.isLoop()?{x:(r=Me.calcPathBounds(n)).x+r.width/2,y:r.y,angle:0}:Wr._calcPathLabelCenter(n),Fr._calcDataInfoRenderProperties(e,t,i,r.x,r.y))},_calcDataInfoRenderProperties:function(e,t,n,r,i){var o,a=n.width,s=n.height,l=m.getOffset(e,t,"info"),c=0|m.getDataViewInfoProperty(e,t,"info_box_padding"),d=st(10,(a+c)/3),r=r+l.x,i=i-d-s/2-c+l.y,l={x:r-a/2,y:i-s/2,width:a,height:s},h=a+2*c,u=s+2*c,_={x:r,y:i+s/2+c+d},p={x:r,y:i+s/2+c},d={x:r+d,y:i+s/2+c,seg:"close"},c={info:{size:n,bounds:l,render_props:{point:{x:r-a/2+a/2,y:i-s/2+s/2},direction:"center_middle",bounds:l}}};return null==m.getDataViewInfoProperty(e,t,"info_box_stroke")&&null==m.getDataViewInfoProperty(e,t,"info_box_fill")||(o=Ie.calcPointsBounds(n=[_,p,{x:r-h/2,y:i+u/2},{x:r-h/2,y:i-u/2},{x:r+h/2,y:i-u/2},{x:r+h/2,y:i+u/2},d]),c.info_box={bounds:o,render_props:{bounds:o,points:n}}),c.bounds=(o?c.info_box:c.info).bounds,c},_calcInfoSize:function(e,t){var n=m.getDataViewVisibleInfo(e,t);if(null!=n)return Kn.calcTextSize(m.getFont(m.getDataViewLabelProperty(e,t,"info_font")),n)}},jr={calcLinkBounds:function(e,t,n){e=jr.calcLinkRenderProperties(e,t,n);if(e)return e.bounds},calcLinkPathPoints:function(e,t){e=jr._calcLinkPathPoints(e,t);if(e)return e.points},calcLinkRenderProperties:function(e,t,n){var r,i,o,a,s,d,l,h,c=jr._calcLinkPathPoints(e,t);return c&&(r=c.draw_points,i=c.points),i&&1<i.length?((c=Me.calcPathBounds(i))&&!0!==n&&((o=jr._calcLinkArrowRenderProps(e,t,i))&&(a=o.bounds),(s=Wr.calcLinkLabelRenderProperties(e,t,i))&&(d=s.bounds),(l=Fr.calcLinkInfoRenderProperties(e,t,i))&&(h=l.bounds)),n=gt([c,a,d,h],function(e){return null!=e}),{body_bounds:c,points:i,draw_points:r,label_render_props:s,info_render_props:l,arrow_render_props:o,bounds:Be.calcRectsUnion(n)}):null},_calcLinkPathPoints:function(t,e){var n=e.getProperty("from"),r=e.getProperty("to");if(null==n||null==r)return null;var d,i=t?t.getProperty("link_gap"):16;if(e.getPath)o=e.getPath();else if(e.isLoop())c=Or.getLoopSibling(t,e),o=zr.calcLinkLoopPath(e,c,i,n.getBounds(t));else{if(n=Or.getFromNodeAgent(t,e),r=Or.getToNodeAgent(t,e),null==n||null==r)return null;var h,u,_,o,a=jr._calcLinkEdgeBounds(t,e,n,r),s=a.from,a=a.to,l=m.getLinkViewProperty(t,e,"type"),p=jr._isSameDirectionLinkType(l),c=Or.getSiblingByType(t,e,p);l&&((o=Nr.calcLinkRAPath(l,e,c,i,s,a,{from_corner_distance:m.getLinkViewProperty(t,e,"from_corner_distance"),to_corner_distance:m.getLinkViewProperty(t,e,"to_corner_distance")}))||("quadratic"===l&&(p=c[0],h=Or.getFromNodeAgent(t,p),u=[],_=[],c.forEach(function(e){(Or.getFromNodeAgent(t,e)===h?u:_).push(e)}),c=pt(u,_)),o=Ur.calcLinkCurvePath(l,jr._calcRefLinkPathConfig(t,e,c,n,r,s,a),e,c,i,s,a,m.getLinkViewProperty(t,e,"curvature")))),(o=null==o?Br.calcLinkDefaultPath(jr._calcRefLinkPathConfig(t,e,c,n,r,s,a),e,c,i,s,a,0|m.getLinkViewProperty(t,e,"corner_offset")):o)&&(d=Me.roundPath(o,0|m.getLinkViewProperty(t,e,"corner_radius")))}return{points:o,draw_points:d||o}},_isSameDirectionLinkType:function(e){return-1<["ra_hv","ra_vh"].indexOf(e)},_calcLinkEdgeBounds:function(e,t,n,r){var n=n.getBounds(e),r=r.getBounds(e),i=0|m.getLinkViewProperty(e,t,"from_offset"),o=0|m.getLinkViewProperty(e,t,"to_offset"),a=0|m.getLinkViewProperty(e,t,"from_offset_x"),s=0|m.getLinkViewProperty(e,t,"from_offset_y"),l=0|m.getLinkViewProperty(e,t,"to_offset_x"),e=0|m.getLinkViewProperty(e,t,"to_offset_y"),t={x:n.x+n.width/2,y:n.y+n.height/2},c={x:r.x+r.width/2,y:r.y+r.height/2};return 0!=i&&(t=Ie.calcPointOnCircle(t,i,Ee(t,c))),0!=o&&(c=Ie.calcPointOnCircle(c,o,Ee(c,t))),t.x+=a,t.y+=s,c.x+=l,c.y+=e,{from:{x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},to:{x:c.x-r.width/2,y:c.y-r.height/2,width:r.width,height:r.height}}},_calcRefLinkPathConfig:function(e,t,n,r,i,d,o){var a,s,l,c,h,u,n=n[0],t=n!==t?Or.getFromNodeAgent(e,n):r,_=r===t,i=_?(a=i,s=d,o):(a=r,s=o,d),r="path"===t.getType(),o="path"===a.getType();return r&&o&&(o=r=!1),r&&(h={x:(l=Me.calcPointToPathClosestPoint(Be.getRectCenter(i),t.get("points"))).x,y:l.y,width:0,height:0}),o&&(u={x:(c=Me.calcPointToPathClosestPoint(Be.getRectCenter(s),a.get("points"))).x,y:c.y,width:0,height:0}),{from:l=r?l:Br._getPositionPoint(s,u||i,m.getLinkViewProperty(e,n,"from_position")),to:c=o?c:Br._getPositionPoint(i,h||s,m.getLinkViewProperty(e,n,"to_position")),same_direction:_}},_calcLinkArrowRenderProps:function(e,t,n){if((n=n||[]).length<2)return{};var r,i,o,a=m.getLinkViewProperty(e,t,"stroke_line_width"),s=m.getLinkViewProperty(e,t,"from_arrow_shape"),l=m.getLinkViewProperty(e,t,"to_arrow_shape"),s=(s&&(i=m.getLinkViewProperty(e,t,"from_arrow_offset"),(i=Me.calcOffsetPointOnPath(n,i,!0))&&(r=Ie.calcPointOnCircle(i,2,i.angle),r=Gr.calcArrowRenderProperties(s,r,i,m.getLinkViewProperty(e,t,"from_arrow_angle"),0,a,Gr.calcArrowSizeLength(a,m.getLinkViewProperty(e,t,"from_arrow_size"))))),l&&(s=(s=m.getLinkViewProperty(e,t,"to_arrow_offset"))<=1&&0<=s?1-s:(i=Me.calcPathLength(n),at(i-s,0)),(i=Me.calcOffsetPointOnPath(n,s,!0))&&(n=Ie.calcPointOnCircle(i,2,i.angle+180),o=Gr.calcArrowRenderProperties(l,n,i,m.getLinkViewProperty(e,t,"to_arrow_angle"),0,a,Gr.calcArrowSizeLength(a,m.getLinkViewProperty(e,t,"to_arrow_size"))))),[]);return r&&s.push(r.bounds),o&&s.push(o.bounds),{from:r,to:o,bounds:Be.calcRectsUnion(s)}}},qr={calcNodeBounds:function(e,t,n){e=qr.calcNodeRenderProperties(e,t,n);if(e)return e.bounds_render},calcNodeRenderProperties:function(e,t,n){var r,i,d,h,o,a=qr.calcNodeBodyBounds(e,t);if(null==a)return null;!0!==n&&("path"!==(n=t.getType())||(r=qr._calcPathArrowRenderProps(e,t,qr._getNodePoints(t)))&&(s=r.bounds),i=qr._calcNodeOutlineBounds(e,t,a),(d=Wr.calcNodeLabelRenderProperties(e,t,a))&&(l=d.bounds),(h=Fr.calcNodeInfoRenderProperties(e,t,a))&&(c=h.bounds),!(o=qr._calcNodeBorderBounds(e,t,a,i))||"path"!==n&&"shape"!==n||(n=m.getNodeViewProperty(e,t,"stroke_line_width")||0,o=Be.createGrowRect(o,n/2)));var n=gt([a,s,i,l,c],function(e){return null!=e}),s=Be.calcRectsUnion(n),l=it(m.getNodeViewProperty(e,t,"rotation"))||0,c=Be.getRectCenter(a);return{body_bounds:a,body_bounds_render:Be.calcRotatedRect(a,l,c),outline_bounds:i,outline_bounds_render:Be.calcRotatedRect(i,l,c),border_bounds:Be.calcRotatedRect(o,l,c),label_render_props:d,info_render_props:h,path_arrow_render_props:r,bounds:s,bounds_render:Be.calcRotatedRect(s,l,c)}},_calcNodeBorderBounds:function(e,t,n,r){r=r||n;if(r&&(0<r.width||0<r.height))return r=Be.createGrowRect(r,(0|m.getNodeViewProperty(e,t,"select_border_padding","select_border_padding"))+(0|m.getNodeViewProperty(e,t,"select_border_stroke_line_width","select_border_stroke_line_width")))},_calcNodeOutlineBounds:function(e,t,n){if(n&&0<n.width&&0<n.height&&m.getNodeViewProperty(e,t,"outline_stroke"))return Be.createGrowRect(n,(0|m.getNodeViewProperty(e,t,"outline_padding"))+(0|m.getNodeViewProperty(e,t,"outline_stroke_line_width")))},calcNodeBodyBounds:function(e,t){var n=t.getType();return"path"===n?Me.calcPathBounds(qr._getNodePoints(t)):"heatmap"===n?(n=m.getNodeViewProperty(e,t,"heatmap_radius"),$r.calcHMPointsBounds(qr._getNodePoints(t),n)):qr._getShapeAndImageNodeBounds(e,t)},_getShapeAndImageNodeBounds:function(e,t){e=qr._getShapeAndImageNodeSize(e,t);return e.width=it(e.width)||0,e.height=it(e.height)||0,{x:it(t.getProperty("x"))||0,y:it(t.getProperty("y"))||0,width:it(e.width)||0,height:it(e.height)||0}},_getShapeAndImageNodeSize:function(e,t){return{width:Vr.getSizeProperty(e,t,"width"),height:Vr.getSizeProperty(e,t,"height")}},_calcPathArrowRenderProps:function(e,t,n){if((n=n||[]).length<2)return null;var r,i,o,a=m.getNodeViewProperty(e,t,"stroke_line_width"),s=m.getNodeViewProperty(e,t,"begin_arrow_shape"),s=(s&&(l=m.getNodeViewProperty(e,t,"begin_arrow_offset"),(l=Me.calcOffsetPointOnPath(n,l,!0))&&(r=Ie.calcPointOnCircle(l,2,l.angle),r=Gr.calcArrowRenderProperties(s,r,l,m.getNodeViewProperty(e,t,"begin_arrow_angle"),0,a,Gr.calcArrowSizeLength(a,m.getNodeViewProperty(e,t,"begin_arrow_size"))))),m.getNodeViewProperty(e,t,"end_arrow_shape")),l=(s&&(l=(l=m.getNodeViewProperty(e,t,"end_arrow_offset"))<=1&&0<=l?1-l:(i=Me.calcPathLength(n),at(i-l,0)),(i=Me.calcOffsetPointOnPath(n,l,!0))&&(n=Ie.calcPointOnCircle(i,2,i.angle+180),o=Gr.calcArrowRenderProperties(s,n,i,m.getNodeViewProperty(e,t,"end_arrow_angle"),0,a,Gr.calcArrowSizeLength(a,m.getNodeViewProperty(e,t,"end_arrow_size"))))),[]);return r&&l.push(r.bounds),o&&l.push(o.bounds),{begin:r,end:o,bounds:Be.calcRectsUnion(l)}},_getNodePoints:function(e){return e.getProperty("points")||[]}},s={_getLabelProperties:function(n,r){r=r||{};var i={};return Ct(Ue({label_rotation:null,label_font:null,label_gap:null,label_align:null,label_position:null,label_direction:null,label_offset_x:0,label_offset_y:0,label_box_padding:null},s._getStyleProperties("label",{},!0),s._getStyleProperties("label_box",{},!0)),function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),i},_getArrowProperties:function(n,r){var i={};return r=r||{},Ct(Ue({arrow_shape:null,arrow_size:null,arrow_offset:null,arrow_angle:null},s._getStyleProperties("arrow",{},!0)),function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),i},_getStyleProperties:function(e,t,n){return Ue(s._getFillProperties(e,t),s._getStokeProperties(e,t,n))},_getFillProperties:function(n,r){r=r||{};var i={};return Ct({fill:null,fill_gradient_colors:null,fill_gradient_direction:null,fill_pattern_image:null},function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),i},_getStokeProperties:function(n,r,e){r=r||{};var i={};return Ct({stroke:null,stroke_gradient_colors:null,stroke_gradient_direction:null,stroke_pattern_image:null},function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),!0===e&&Ct({stroke_line_width:1,stroke_line_dash:null,stroke_line_dash_offset:0},function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),i},_getPropertyKey:function(e,t){var n=[];return t&&n.unshift(t),e&&n.unshift(e),n.join("_")},_getProperties:function(e,n,r){var i;return r?(i={},n=n||{},Ct(e,function(e,t){n.hasOwnProperty(e=r+"_"+e)&&(t=n[e]),i[e]=t}),i):Ue({},e,n)}},$r=(Ue(s,{LabelProperties:s._getLabelProperties(),InfoProperties:Ue({info_font:null,info_box_padding:null,info_align:null,info_offset_x:0,info_offset_y:0},s._getStyleProperties("info",{},!0),s._getStyleProperties("info_box",{},!0)),LinkFromToLabelProperties:Ue(s._getLabelProperties("from"),s._getLabelProperties("to")),SelectStyleProperties:Ue({select_style:null,select_border_padding:null,select_shadow_blur:null,select_shadow_color:null,select_shadow_offset:null,select_shadow_offset_x:0,select_shadow_offset_y:0},s._getStokeProperties("select_border",{},!0)),NodeProperties:Ue({shape:null,roundrect_radius:null},s._getStyleProperties(null,{},!0),s._getArrowProperties("begin"),s._getArrowProperties("end")),OutlineProperties:Ue({outline_padding:null},s._getStokeProperties("outline",{},!0)),GroupProperties:Ue({expand_shape:null,expand_padding:null,expand_parallelogram_angle:null,expand_roundrect_radius:null},s._getStyleProperties("expand",{},!0)),LinkProperties:Ue({from_position:null,to_position:null,from_offset:null,to_offset:null,from_offset_x:null,from_offset_y:null,to_offset_x:null,to_offset_y:null,corner_offset:null,curvature:null,corner_radius:null,from_corner_distance:null,to_corner_distance:null},s._getStokeProperties(null,{stroke:"#000"},!0),s._getArrowProperties("from"),s._getArrowProperties("to")),getLabelProperties:function(e,t){return s._getProperties(s.LabelProperties,e,t)},getInfoProperties:function(e,t){return s._getProperties(s.InfoProperties,e,t)},getSelectStyleProperties:function(e,t){return s._getProperties(s.SelectStyleProperties,e,t)},getNodeStyleProperties:function(e,t){return s._getProperties(s.NodeProperties,e,t)},getOutlineProperties:function(e,t){return s._getProperties(s.OutlineProperties,e,t)},getGroupProperties:function(e,t){return s._getProperties(s.GroupProperties,e,t)},getLinkProperties:function(e,t){return s._getProperties(s.LinkProperties,e,t)},getLinkFromToLabelProperties:function(e,t){return s._getProperties(s.LinkFromToLabelProperties,e,t)},HeatMapProperties:{heatmap_blur:null,heatmap_colors:null,heatmap_opacity:null,heatmap_max_opacity:null,heatmap_min_opacity:null,heatmap_radius:null,heatmap_min_value:null,heatmap_max_value:null},getHeatMapProperties:function(e,t){return s._getProperties(s.HeatMapProperties,e,t)}}),Ge(ur,rr,{___zdefaults_:Ue({alpha:1,style:null,hover_style:ze("GVIEW_HOVER_STYLE")},s.getLabelProperties({label_rotation:0,label_gap:0,label_align:"center",label_box_padding:ze("GVIEW_LABEL_BOX_PADDING"),label_fill:ze("GVIEW_LABEL_FILL")}),s.getInfoProperties({info_fill:ze("GVIEW_INFO_FILL"),info_box_padding:2,info_box_fill:ze("GVIEW_INFO_BOX_FILL")}),s.getSelectStyleProperties({select_style:"border",select_border_stroke:ze("GVIEW_SELECT_BORDER_STROKE"),select_border_stroke_line_width:ze("GVIEW_SELECT_BORDER_STROKE_LINE_WIDTH"),select_shadow_color:ze("GVIEW_SELECT_SHADOW_COLOR"),select_shadow_blur:ze("GVIEW_SELECT_SHADOW_BLUR")})),draw:function(e){},getBounds:function(e,t,n){var r=arguments[0];return!0!==r&&!1!==r||(e=null,t=r,n=arguments[1]),this._getBounds(e,t=!1!==t?!0:t,n)},_getBounds:function(e,t,n){}}),Ge(_r,ur,Ue({__toTypeString_Node_$:function(){return re},__className_:"Node",___zdefaults_:Ue({x:0,y:0,image:null,rotation:0,width:ze("GVIEW_NODE_WIDTH"),height:ze("GVIEW_NODE_HEIGHT"),label_gap:ze("GVIEW_NODE_LABEL_GAP"),label_position:ze("GVIEW_NODE_LABEL_POSITION"),select_border_padding:ze("GVIEW_NODE_SELECT_BORDER_PADDING")},s.getNodeStyleProperties({shape:ze("GVIEW_NODE_SHAPE"),roundrect_radius:.12,fill:ze("GVIEW_NODE_FILL"),stroke:ze("GVIEW_NODE_STROKE"),stroke_line_width:ze("GVIEW_NODE_STROKE_LINE_WIDTH"),begin_arrow_size:2,begin_arrow_offset:0,begin_arrow_stroke_line_width:null,begin_arrow_angle:46,end_arrow_size:2,end_arrow_offset:0,end_arrow_stroke_line_width:null,end_arrow_angle:46}),s.getOutlineProperties({outline_padding:ze("GVIEW_NODE_OUTLINE_PADDING"),outline_stroke_line_width:ze("GVIEW_NODE_OUTLINE_STROKE_LINE_WIDTH")}),s.getHeatMapProperties({heatmap_blur:.85,heatmap_colors:ze("GVIEW_NODE_HEATMAP_COLORS"),heatmap_opacity:0,heatmap_max_opacity:1,heatmap_min_opacity:0,heatmap_radius:30})),getType:function(){var e=this.get("type");return e||(this.get("image")?"image":this.get("points")?"path":"shape")},getRendererClass:function(e){return ri}},{getLinks:function(e){return!1===e?this._linkArray:pt([],this._linkArray)},getFromLinks:function(e){return!1===e?this._fromLinkArray:pt([],this._fromLinkArray)},getToLinks:function(e){return!1===e?this._toLinkArray:pt([],this._toLinkArray)},getLinksTo:function(e){var t=e.getToLinks(!1);return gt(this.getFromLinks(!1),function(e){return-1<t.indexOf(e)})},getLinksFrom:function(e){var t=e.getFromLinks(!1);return gt(this.getToLinks(!1),function(e){return-1<t.indexOf(e)})},getLinksBetween:function(e){var t=e.getLinks(!1);return this===e?gt(t,function(e){return e.isLoop()}):gt(this.getLinks(!1),function(e){return-1<t.indexOf(e)})},_addFromLink:function(e){this._fromLinkArray.push(e),this._linkArray.indexOf(e)<0&&this._linkArray.push(e),this.dispatchChangeEvent("links",this._linkArray,this._linkArray)},_removeFromLink:function(e){vt(this._fromLinkArray,e),vt(this._linkArray,e),this.dispatchChangeEvent("links",this._linkArray,this._linkArray)},_addToLink:function(e){this._toLinkArray.push(e),this._linkArray.indexOf(e)<0&&this._linkArray.push(e),this.dispatchChangeEvent("links",this._linkArray,this._linkArray)},_removeToLink:function(e){vt(this._toLinkArray,e),vt(this._linkArray,e),this.dispatchChangeEvent("links",this._linkArray,this._linkArray)}},{beforeSetProperty:function(e,t,n){"host"===e&&n&&n.removeChangeListener(this._onHostChange,this),_r.superClass.beforeSetProperty.apply(this,arguments)},afterSetProperty:function(e,t,n){var r;"host"===e&&t&&t.addChangeListener(this._onHostChange,this),"x"===e||"y"===e||"width"===e||"height"===e?Vr.isPointsNode(this)&&((r={})[e]=t,Vr.updateNodePointsByBounds(null,this,r)):"center"===e?this.setCenter(t):"size"===e&&this.setSize(t),_r.superClass.afterSetProperty.apply(this,arguments)},_onHostChange:function(e){var t,n,r=e.property;"x"!==r&&"y"!==r||!0!==this.__isUpdatingFromHost&&!0!==this.__isUpdatingFollower&&(this.__isUpdatingFromHost=!0,t=e.source,Sr(t)||(e=(e.new_value||0)-(e.old_value||0),t.__isUpdatingFollower=!0,n=this.get(r),this.set(r,n+e),delete t.__isUpdatingFollower,delete this.__isUpdatingFromHost))}},{setPosition:function(e){Vr.setPosition(null,this,ke.getArgsPoint.apply(null,arguments))},getPosition:function(){if(!Vr.isPointsNode(this))return{x:this.getProperty("x"),y:this.getProperty("y")};var e=this.getBounds();return e?{x:e.x,y:e.y}:void 0},setCenter:function(e){if(null!=(e=ke.getArgsPoint.apply(null,arguments))){var t;if(Vr.isPointsNode(this)){var n=this.getBounds();if(!n)return;t=n.width,n=n.height}else t=this.getProperty("width"),n=this.getProperty("height");this.setPosition({x:e.x-t/2,y:e.y-n/2})}},getCenter:function(){if(!Vr.isPointsNode(this))return{x:this.getProperty("x")+this.getProperty("width")/2,y:this.getProperty("y")+this.getProperty("height")/2};var e=this.getBounds();return e?{x:e.x+e.width/2,y:e.y+e.height/2}:void 0},getSize:function(){if(!Vr.isPointsNode(this))return{width:this.getProperty("width"),height:this.getProperty("height")};var e=this.getBounds();return e?{width:e.width,height:e.height}:void 0},setSize:function(e){Vr.setSize(null,this,ke.getArgsSize.apply(null,arguments))},_getBounds:function(e,t){return qr.calcNodeBounds(e,this,t)}})),Ge(pr,ur,{__toTypeString_Link_$:function(){return ie},__className_:"Link",___zdefaults_:Ue({type:null,from:null,to:null,label_rotation:!0},s.getLinkProperties({stroke:ze("GVIEW_LINK_STROKE"),stroke_line_width:ze("GVIEW_LINK_STROKE_LINE_WIDTH"),from_offset:0,to_offset:0,corner_radius:0,curvature:.15,from_arrow_size:2,from_arrow_offset:0,from_arrow_stroke_line_width:null,from_arrow_angle:46,to_arrow_size:2,to_arrow_offset:0,to_arrow_stroke_line_width:null,to_arrow_angle:46}),s.getLinkFromToLabelProperties({})),isLoop:function(){var e=this.getProperty("from"),t=this.getProperty("to");return null!=e&&e===t},beforeSetProperty:function(e,t,n){"from"!==e&&"to"!==e||!n||("from"===e?n._removeFromLink(this):"to"===e&&n._removeToLink(this)),pr.superClass.beforeSetProperty.apply(this,arguments)},afterSetProperty:function(e,t,n){"from"!==e&&"to"!==e||!t||("from"===e?t._addFromLink(this):"to"===e&&t._addToLink(this)),pr.superClass.afterSetProperty.apply(this,arguments)},_getBounds:function(e,t){return jr.calcLinkBounds(e,this,t)},getPathPoints:function(e){return jr.calcLinkPathPoints(e,this)},getRendererClass:function(e){return ii}}),Ge(fr,_r,{__toTypeString_Group_$:function(){return oe},__className_:"Group",___zdefaults_:Ue({shape:ze("GVIEW_GROUP_SHAPE")},s.getGroupProperties({width:ze("GVIEW_GROUP_WIDTH"),height:ze("GVIEW_GROUP_HEIGHT"),expand_padding:ze("GVIEW_GROUP_EXPAND_PADDING"),expand_shape:ze("GVIEW_GROUP_EXPAND_SHAPE"),expand_roundrect_radius:.12,expand_parallelogram_angle:78,expand_fill:ze("GVIEW_GROUP_EXPAND_FILL"),expand_stroke:ze("GVIEW_GROUP_EXPAND_STROKE"),expand_stroke_line_width:1})),setPosition:function(e){Ir.setPosition(null,this,ke.getArgsPoint.apply(null,arguments))},_getBounds:function(e,t,n){return e&&null==n&&(n=e.isExpanded(this)),Hr.calcGroupBounds(e,this,n,t)},getGroupChildren:function(){return this.getChildren(!1)},getRendererClass:function(){return oi}}),Ge(gr,_r,{__toTypeString_Subview_$:function(){return ae},__className_:"subview",___zdefaults_:{shape:ze("GVIEW_SUBVIEW_SHAPE"),width:ze("GVIEW_SUBVIEW_WIDTH"),height:ze("GVIEW_SUBVIEW_HEIGHT")}}),Ge(yr,pr,{__toTypeString_Link_$:function(){return ie},__toTypeString_Subview_$:function(){return ae},__toTypeString_LinkSubview_$:function(){return se},__className_:"LinkSubview"}),{_point_templates:{},calcHMPointsValues:function(e){var t=0,n=0;return e.forEach(function(e){e=e.value;null!=e&&(t=st(t,e),n=at(n,e))}),{min:t||0,max:n||0}},calcHMPointsBounds:function(e,r){if(null==e||0===e.length)return null;r|=0;var i=null,o=null,a=null,s=null;return e.forEach(function(e,t){var n=e.hasOwnProperty("radius")?0|e.radius:r;s=0===t?(i=e.x-n,o=e.y-n,a=e.x+n,e.y+n):(i=st(e.x-n,i),o=st(e.y-n,o),a=at(e.x+n,a),at(e.y+n,s))}),{x:i,y:o,width:a-i,height:s-o}},drawHM:function(e,t,n){var r=$r._getShadowCtx(n.width,n.height);$r._updateAlphaCtx(r,e.getRenderConfig("points"),n,e.getRenderConfig("heatmap_min_value"),e.getRenderConfig("heatmap_max_value"),e.getRenderConfig("heatmap_radius"),e.getRenderConfig("heatmap_blur")),$r._colorize(r,n,e.getRenderConfig("heatmap_opacity"),e.getRenderConfig("heatmap_min_opacity"),e.getRenderConfig("heatmap_max_opacity"),e.getRenderConfig("heatmap_colors")),t.drawImage($r._shadowCVS,n.x,n.y)},_updateAlphaCtx:function(i,e,t,o,a,s,n){var l=1-n,c=t.x,d=t.y;e.forEach(function(e){var t=e.x-c,n=e.y-d,r=e.hasOwnProperty("radius")?0|e.radius:s;0<r&&(null!=(e=e.value)&&(e=at(o,st(e,a)),i.globalAlpha=a!==o?(e-o)/(a-o):1),e=t-r,t=n-r,i.drawImage($r._getPointTemplate(r,l),e,t))})},_colorize:function(e,t,n,r,i,d){n=255*n|0,i=255*i|0,r=255*r|0;for(var t=e.getImageData(0,0,t.width,t.height),o=t.data,h=o.length,a=$r._getColorPalette(d),s=3;s<h;s+=4){var l=o[s],c=4*l;c&&(l=0<n?n:l<i?l<r?r:l:i,o[s-3]=a[c],o[s-2]=a[1+c],o[s-1]=a[2+c],o[s]=l)}e.putImageData(t,0,0)},_getColorPalette:function(e){var t=We("canvas"),n=t.getContext("2d"),r=(t.setAttribute("width",256),t.setAttribute("height",1),n.createLinearGradient(0,0,256,1));return Ct(e||{},function(e,t){r.addColorStop(e,t)}),n.fillStyle=r,n.fillRect(0,0,256,1),n.getImageData(0,0,256,1).data},_getShadowCtx:function(e,t){return $r._shadowCVS||($r._shadowCVS=We("canvas"),$r._shadowCTX=$r._shadowCVS.getContext("2d")),$r._shadowCVS.setAttribute("width",e),$r._shadowCVS.setAttribute("height",t),$r._shadowCTX},_getPointTemplate:function(e,t){var n=e+"$"+t;if($r._point_templates[n])return $r._point_templates[n];var r=We("canvas"),i=r.getContext("2d"),o=e,a=e,s=2*e,s=(r.setAttribute("width",s),r.setAttribute("height",s),{x:0,y:0,width:s,height:s});return 1===t?Xn.render(i,s,"circle",{fill:"rgba(0,0,0,1)"}):((t=i.createRadialGradient(o,a,e*t,o,a,e)).addColorStop(0,"rgba(0,0,0,1)"),t.addColorStop(1,"rgba(0,0,0,0)"),Xn.render(i,s,"rect",{fill:t})),$r._point_templates[n]=r}}),Xr={getCalcRenderProperty:function(e,t){e=e.getRenderConfig(ni.CALC_RENDER_PROPS);if(e)return e[t]},getCalcRenderBodyBounds:function(e){return Xr.getCalcRenderProperty(e,"body_bounds")},getCalcRenderLabelProperty:function(e){e=Xr.getCalcRenderProperty(e,"label_render_props");if(e)return e.label},getCalcRenderLabelBoxProperty:function(e){e=Xr.getCalcRenderProperty(e,"label_render_props");if(e)return e.label_box},getCalcRenderInfoProperty:function(e){e=Xr.getCalcRenderProperty(e,"info_render_props");if(e)return e.info},getCalcRenderInfoBoxProperty:function(e){e=Xr.getCalcRenderProperty(e,"info_render_props");if(e)return e.info_box},isRenderBodyVisible:function(e){e=Xr.getCalcRenderBodyBounds(e);return e&&0<e.width&&0<e.height},updateLabelConfig:function(e,t,n,r){null!=e.getRenderConfig("label")&&(Xr.updatePropertiesRenderConfig(e,t,n,r,s.LabelProperties),r.label_font=m.getFont(r.label_font),r.label_in_front=e.getViewRenderConfig("label_in_front"),r.label_style=t.getDataViewProperty(n,"label_style"))},updateInfoConfig:function(e,t,n,r){null!=e.getRenderConfig("info")&&(Xr.updatePropertiesRenderConfig(e,t,n,r,s.InfoProperties),r.info_font=m.getFont(r.info_font),r.info_in_front=e.getViewRenderConfig("info_in_front"),r.info_style=t.getDataViewProperty(n,"info_style"))},updateSelectedConfig:function(e,t,n,r){!0===e.getRenderConfig("selected")&&Xr.updatePropertiesRenderConfig(e,t,n,r,s.SelectStyleProperties)},updatePropertiesRenderConfig:function(e,r,i,o,t,a){Ct(t,function(e,t){var n;o[e]=r.getDataViewProperty(i,e,n=a?a+"_"+e:n)})}},Kr={updateNodeConfig:function(e,t,n,r){var i=qr.calcNodeRenderProperties(t,n);null!=i&&(r[ni.CALC_RENDER_PROPS]=i,i=n.getType(),r.type=i,r.rotation=it(m.getNodeViewProperty(t,n,"rotation"))||0,Xr.updatePropertiesRenderConfig(e,t,n,r,s.NodeProperties,"node"),r.$_begin_arrow_fill=t.hasDataViewProperty(n,"begin_arrow_fill","node_begin_arrow_fill"),r.$_end_arrow_fill=t.hasDataViewProperty(n,"end_arrow_fill","node_end_arrow_fill"),r.$_begin_arrow_stroke=t.hasDataViewProperty(n,"begin_arrow_stroke","node_begin_arrow_stroke"),r.$_end_arrow_stroke=t.hasDataViewProperty(n,"end_arrow_stroke","node_end_arrow_stroke"),r.$_begin_arrow_stroke_line_width=t.hasDataViewProperty(n,"begin_arrow_stroke_line_width","node_begin_arrow_stroke_line_width"),r.$_end_arrow_stroke_line_width=t.hasDataViewProperty(n,"end_arrow_stroke_line_width","node_end_arrow_stroke_line_width"),"image"===i?Kr._updateNodeImageConfig(e,t,n,r):"path"===i?Kr._updateNodePathConfig(e,t,n,r):"heatmap"===i?Kr._updateNodeHeatMapConfig(e,t,n,r):Kr._updateNodeShapeConfig(e,t,n,r),Kr.updateNodeOutlineConfig(e,t,n,r))},_updateNodeImageConfig:function(e,t,n,r){var i;Xr.isRenderBodyVisible(e)&&(i=m.getNodeViewProperty(t,n,"image"),(r.image=i)&&(!(e=ht(i)?St.get(i,e.updateData,e):i)||(i=m.getNodeViewProperty(t,n,"image_color"))&&((t=e.$_color_map=e.$_color_map||{})[i]=t[i]||St.getColorImage(e,i,"canvas"),e=t[i]),r[ni.NODE_IMAGE]=e))},_updateNodePathConfig:function(e,t,n,r){r.points=n.getProperty("points")||[]},_updateNodeHeatMapConfig:function(e,t,n,r){var i=n.getProperty("points")||[];0!==(r.points=i).length&&(Xr.updatePropertiesRenderConfig(e,t,n,r,s.HeatMapProperties,"node"),e=r.heatmap_min_value,t=r.heatmap_max_value,null!=e&&null!=t||(n=$r.calcHMPointsValues(i),null==e&&(r.heatmap_min_value=n.min),null==t&&(r.heatmap_max_value=n.max)))},_updateNodeShapeConfig:function(e,t,n,r){},updateNodeOutlineConfig:function(e,t,n,r){Xr.getCalcRenderProperty(e,"outline_bounds")&&Xr.updatePropertiesRenderConfig(e,t,n,r,s.OutlineProperties,"node")}},Jr={updateLinkConfig:function(e,t,n,r){var i=jr.calcLinkRenderProperties(t,n);null!=i&&(r[ni.CALC_RENDER_PROPS]=i,Xr.updatePropertiesRenderConfig(e,t,n,r,s.LinkProperties,"link"),r.$_from_arrow_fill=t.hasDataViewProperty(n,"from_arrow_fill","link_from_arrow_fill"),r.$_to_arrow_fill=t.hasDataViewProperty(n,"to_arrow_fill","link_to_arrow_fill"),r.$_from_arrow_stroke=t.hasDataViewProperty(n,"from_arrow_stroke","link_from_arrow_stroke"),r.$_to_arrow_stroke=t.hasDataViewProperty(n,"to_arrow_stroke","link_to_arrow_stroke"),r.$_from_arrow_stroke_line_width=t.hasDataViewProperty(n,"from_arrow_stroke_line_width","link_from_arrow_stroke_line_width"),r.$_to_arrow_stroke_line_width=t.hasDataViewProperty(n,"to_arrow_stroke_line_width","link_to_arrow_stroke_line_width"),r.type=n.get("type"),r.loop=n.isLoop(),r.from=n.get("from"),r.to=n.get("to"),r.link_gap=e.getViewRenderConfig("link_gap"),r.from_agent=Or.getFromNodeAgent(t,n),r.to_agent=Or.getToNodeAgent(t,n),r.label_rotation=t.getDataViewProperty(n,"label_rotation","link_label_rotation"))}},Yr={updateGroupConfig:function(e,t,n,r){var i,o=t.isExpanded(n),a=(r.expand=o,Hr.calcGroupRenderProperties(t,n,o));null!=a&&((r[ni.CALC_RENDER_PROPS]=a).is_group&&o&&(Xr.updatePropertiesRenderConfig(e,t,n,i={},s.GroupProperties,"group"),Ct(i,function(e,t){r[e.substring(7)]=i[e]}),r.rotation=0,a=(o=a.expand_render_props).type,"path"===(r.type=a)&&(r.points=o.points)),Kr.updateNodeOutlineConfig(e,t,n,r))}},Zr={drawNodePathArrow:function(e,t){var n,r,i=Xr.getCalcRenderProperty(e,"path_arrow_render_props");i&&((r=i.begin)&&("shape"===(n=r.type)?Zr._drawShapeArrow(e,t,r,"begin_arrow","stroke"):"path"===n&&Zr._drawPathArrow(e,t,r,"begin_arrow","stroke")),(n=i.end)&&("shape"===(r=n.type)?Zr._drawShapeArrow(e,t,n,"end_arrow","stroke"):"path"===r&&Zr._drawPathArrow(e,t,n,"end_arrow","stroke")))},drawLinkArrow:function(e,t){var n,r,i=Xr.getCalcRenderProperty(e,"arrow_render_props");i&&((r=i.from)&&("shape"===(n=r.type)?Zr._drawShapeArrow(e,t,r,"from_arrow","stroke"):"path"===n&&Zr._drawPathArrow(e,t,r,"from_arrow","stroke")),(n=i.to)&&("shape"===(r=n.type)?Zr._drawShapeArrow(e,t,n,"to_arrow","stroke"):"path"===r&&Zr._drawPathArrow(e,t,n,"to_arrow","stroke")))},_drawShapeArrow:function(r,e,i,o,a){var s=i.shape_bounds,t=s.x+s.width/2,n=s.y+s.height/2,l=i.rotation;Gn(e,l,{x:t,y:n},function(e){var t=i.shape,n=Qr.getStrokeOpt(r,s,o+"_stroke");Un(e,n.attr,function(){Xn.render(e,s,t,{fill:Zr._getArrowFillStyle(r,e,i,o,a,s),stroke:n.stroke},{radius:.2})})})},_drawPathArrow:function(e,t,n,r,i){var o,a,s,l=n.shape,c=n.bounds;"open_arrow"!==l?(l=Qr.getStrokeOpt(e,c,r+"_stroke"),o=l.stroke,a=l.attr,s=Zr._getArrowFillStyle(e,t,n,r,i,c)):(o=!1===e.getRenderConfig("$_"+r+"_stroke")?Qr.getStyle(e,c,i):Qr.getStyle(e,c,r+"_stroke"),(a=Qr.getStrokeAttr(e,r+"_stroke"))&&!1===e.getRenderConfig("$_"+r+"_stroke_line_width")&&(a.lineWidth=Qr.getStrokeAttr(e,i).lineWidth)),Un(t,a,function(){jn.render(t,n.points,{fill:s,stroke:o})})},_getArrowFillStyle:function(e,t,n,r,i,o){i=!1===e.getRenderConfig("$_"+r+"_fill")?Qr.getStyle(e,o,i):Qr.getStyle(e,o,r+"_fill");return i}},Qr={getStrokeAttr:function(e,t){return{lineWidth:e.getRenderConfig(t+"_line_width"),lineDash:e.getRenderConfig(t+"_line_dash"),lineDashOffset:e.getRenderConfig(t+"_line_dash_offset")}},getStrokeOpt:function(e,t,n){var r,t=Qr.getStyle(e,t,n);return!t||0<!(r=Qr.getStrokeAttr(e,n)).lineWidth&&(t=null),{stroke:t,attr:r}},getStyle:function(e,t,n){var r=e.getRenderConfig(n);return t={x:t.x,y:t.y,width:at(1,t.width),height:at(1,t.height)},"linear_gradient"===r?Fn.createRectDirectionLinearGradient(t,e.getRenderConfig(n+"_gradient_direction"),e.getRenderConfig(n+"_gradient_colors")):"radial_gradient"===r?Fn.createRectDirectionRadialGradient(t,e.getRenderConfig(n+"_gradient_direction"),e.getRenderConfig(n+"_gradient_colors")):"conic_gradient"===r?Fn.createRectConicGradient(t,e.getRenderConfig(n+"_gradient_colors"),0):"pattern"===r?$n.createPattern(e.getRenderConfig(n+"_pattern_image")):r},drawLabel:function(e,t){var n,r,i,o=Xr.getCalcRenderLabelProperty(e);!o||(n=o.render_props)&&(r=n.bounds,i=Qr.getStrokeOpt(e,r,"label_stroke"),Un(t,i.attr,function(){Kn.render(t,e.getRenderConfig("label"),n.point,{fill:Qr.getStyle(e,r,"label_fill"),stroke:i.stroke},n.direction,{align:e.getRenderConfig("label_align"),font:e.getRenderConfig("label_font"),text_size:n.size,rotation:n.rotation})}))},drawLabelBox:function(n,r){var i,e,t=Xr.getCalcRenderLabelBoxProperty(n);!t||(t=t.render_props)&&(i=t.bounds,t=0|t.rotation,e={x:i.x+i.width/2,y:i.y+i.height/2},Gn(r,t,e,function(){var e=Qr.getStrokeOpt(n,i,"label_box_stroke"),t=Qr.getStyle(n,i,"label_box_fill");Un(r,e.attr,function(){Xn.render(r,i,"rect",{fill:t,stroke:e.stroke})})}))},drawInfo:function(e,t){var n,r,i,o=Xr.getCalcRenderInfoProperty(e);!o||(n=o.render_props)&&(r=n.bounds,i=Qr.getStrokeOpt(e,r,"info_stroke"),Un(t,i.attr,function(){Kn.render(t,e.getRenderConfig("info"),n.point,{fill:Qr.getStyle(e,r,"info_fill"),stroke:i.stroke},n.direction,{align:e.getRenderConfig("info_align"),font:e.getRenderConfig("info_font"),text_size:n.size,rotation:n.rotation})}))},drawInfoBox:function(e,t){var n,r,i,o,a=Xr.getCalcRenderInfoBoxProperty(e);!a||(a=a.render_props)&&(n=a.bounds,r=a.points,i=Qr.getStrokeOpt(e,n,"info_box_stroke"),o=Qr.getStyle(e,n,"info_box_fill"),Un(t,i.attr,function(){jn.render(t,r,{fill:o,stroke:i.stroke})}))}},ei={draw:function(e,t){var n,r=Xr.getCalcRenderBodyBounds(e);r&&("image"===(n=e.getRenderConfig("type"))?ei._drawImage(e,t,r):"path"===n?ei._drawPath(e,t,r):"heatmap"===n?ei._drawHeatMap(e,t,r):ei._drawShape(e,t,r),ei._drawOutline(e,t,r))},_drawImage:function(e,t,n){e=e.getRenderConfig(ni.NODE_IMAGE);e?t.drawImage(e,n.x,n.y,n.width,n.height):Xn.render(t,n,"rect",{strokeStyle:"#ccc",fillStyle:"#eee"},!0)},_drawPath:function(e,t,n){var r=Qr.getStrokeOpt(e,n,"stroke");Un(t,r.attr,function(){jn.render(t,e.getRenderConfig("points"),{fill:Qr.getStyle(e,n,"fill"),stroke:r.stroke},!0)}),Zr.drawNodePathArrow(e,t)},_drawHeatMap:function(e,t,n){$r.drawHM(e,t,n)},_drawShape:function(e,t,n){var r,i=e.getRenderConfig("shape");i&&(r=Qr.getStrokeOpt(e,n,"stroke"),Un(t,r.attr,function(){Xn.render(t,n,i,{fill:Qr.getStyle(e,n,"fill"),stroke:r.stroke},{radius:e.getRenderConfig("roundrect_radius")},!0)}))},_drawOutline:function(e,t,n){var r,i=Xr.getCalcRenderProperty(e,"outline_bounds");!i||(r=Qr.getStrokeOpt(e,n,"outline_stroke")).stroke&&Un(t,r.attr,function(){Xn.render(t,i,"rect",{stroke:r.stroke})})},drawSelectBorder:function(e,t){var n,r;"border"===e.getRenderConfig("select_style")&&(!(n=Xr.getCalcRenderProperty(e,"border_bounds"))||(r=Qr.getStrokeOpt(e,n,"select_border_stroke")).stroke&&Un(t,r.attr,function(){Xn.render(t,n,"rect",{stroke:r.stroke})}))}},ti={draw:function(e,t){var n,r,i=Xr.getCalcRenderProperty(e,"draw_points");null==i||i.length<2||(ti._drawSelectBorder(e,t,i),r=Xr.getCalcRenderBodyBounds(e),n=Qr.getStrokeOpt(e,r,"stroke"),(r=ti._getLinkLinearGradientStroke(e,i))&&(n.stroke=r),Un(t,n.attr,function(){jn.render(t,i,{stroke:n.stroke},!0)}),Zr.drawLinkArrow(e,t))},_getLinkLinearGradientStroke:function(e,t){if(1<t.length&&"linear_gradient"===e.getRenderConfig("stroke"))return Fn.createLinearGradient(t[0],t[t.length-1],e.getRenderConfig("stroke_gradient_colors"))},_drawSelectBorder:function(e,t,n){var r,i,o;"border"===e.getRenderConfig("select_style")&&(r=Xr.getCalcRenderBodyBounds(e),i=0|e.getRenderConfig("stroke_line_width"),(o=Qr.getStrokeOpt(e,r,"select_border_stroke")).attr=o.attr||{},o.attr.lineWidth=i+at(2*(0|o.attr.lineWidth),2),Un(t,o.attr,function(){jn.render(t,n,{stroke:o.stroke},!0)}))}},ni={CALC_RENDER_PROPS:"calc_render_props_$",NODE_IMAGE:"node_image_$",NODE_SELECT_BORDER_BOUNDS:"node_select_border_bounds_$"},ri=(Ge(vr,P,{updateRenderConfig:function(e,t,n){vr.superClass.updateRenderConfig.apply(this,arguments),n.alpha=e.getDataViewProperty(t,"alpha","data_alpha"),n.style=e.getDataViewProperty(t,"style","data_style"),Xr.updateLabelConfig(this,e,t,n),Xr.updateInfoConfig(this,e,t,n),Xr.updateSelectedConfig(this,e,t,n)},doDraw:function(e,t){vr.superClass.doDraw.apply(this,arguments),null!=this.getRenderConfig(ni.CALC_RENDER_PROPS)&&this._updateRenderAttributes(e,t,function(e){this._drawBody(e),!0!==t&&(!0!==this.getRenderConfig("label_in_front")&&this.drawLabel(e),!0!==this.getRenderConfig("info_in_front")&&this.drawInfo(e))})},_updateRenderAttributes:function(e,t,n){var r={globalAlpha:this.getRenderConfig("alpha")},i=this.getRenderConfig("style");return i&&(r=Ue(r,i),!0===t&&delete r.shadowColor),!0!==t&&((i=this.getRenderConfig("hover_style"))&&(r=Ue(r,i)),null!=(t=this.getRenderConfig("select_style"))&&("shadow"===t?(r.shadowBlur=this.getRenderConfig("select_shadow_blur"),r.shadowColor=this.getRenderConfig("select_shadow_color"),i=m.getOffset(this._view,this._data,"select_shadow"),r.shadowOffsetX=i.x,r.shadowOffsetY=i.y):Ne(t)&&(r=Ue(r,t)))),Un(e,r,n,this),r},_drawBody:function(e){var t=this._data.drawBody;t&&!1===t.apply(this._data,[e,this._data,this._view,this])||this.drawBody(e)},drawBody:function(e){},drawLabel:function(e,t){!0===t?this._updateRenderAttributes(e,!1,this._drawLabel):this._drawLabel(e)},_drawLabel:function(e){Un(e,this.getRenderConfig("label_style"),function(){Qr.drawLabelBox(this,e),Qr.drawLabel(this,e)},this)},drawInfo:function(e,t){!0===t?this._updateRenderAttributes(e,!1,this._drawInfo):this._drawInfo(e)},_drawInfo:function(e){Un(e,this.getRenderConfig("info_style"),function(){Qr.drawInfoBox(this,e),Qr.drawInfo(this,e)},this)},hits:function(e,t){var n=Xr.getCalcRenderProperty(this,"bounds");return null!=n&&(n=Be.createGrowRect(n,30,30),!1!==Ie.rectContainsPoint(n,e)&&vr.superClass.hits.apply(this,arguments))}}),function(){ri.superClass.constructor.apply(this,arguments)}),ii=(Ge(ri,vr,{updateRenderConfig:function(e,t,n){ri.superClass.updateRenderConfig.apply(this,arguments),Kr.updateNodeConfig(this,e,t,n)},doDraw:function(e,t){ri.superClass.doDraw.apply(this,arguments),null!=this.getRenderConfig(ni.CALC_RENDER_PROPS)&&ei.drawSelectBorder(this,e)},_updateRenderAttributes:function(e,t,n){var r=arguments,i=this.getRenderConfig("rotation");if(null==i||0===i)return ri.superClass._updateRenderAttributes.apply(this,r);Gn(e,i,Be.getRectCenter(Xr.getCalcRenderBodyBounds(this)),function(e){ri.superClass._updateRenderAttributes.apply(this,r)},this)},drawBody:function(e){ri.superClass.drawBody.apply(this,arguments),ei.draw(this,e)},getBounds:function(e){return!0===e?Xr.getCalcRenderProperty(this,"body_bounds_render"):Xr.getCalcRenderProperty(this,"bounds_render")}}),function(){ii.superClass.constructor.apply(this,arguments)}),oi=(Ge(ii,vr,{updateRenderConfig:function(e,t,n){ii.superClass.updateRenderConfig.apply(this,arguments),Jr.updateLinkConfig(this,e,t,n)},drawBody:function(e){ii.superClass.drawBody.apply(this,arguments),ti.draw(this,e)},getBounds:function(e){return!0===e?Xr.getCalcRenderProperty(this,"body_bounds"):Xr.getCalcRenderProperty(this,"bounds")}}),function(){oi.superClass.constructor.apply(this,arguments)});Ge(oi,ri,{updateRenderConfig:function(e,t,n){oi.superClass.updateRenderConfig.apply(this,arguments),Yr.updateGroupConfig(this,e,t,n)}}),Ge(Cr,et,{getViewDefaultTypes:function(){return["mousedown"]},isDraggable:function(e,t){return!1},onDragStart:function(e,t){},onDragEnd:function(e,t){},onDrag:function(e,t){},getDragCursor:function(e){},reset:function(e,t){},handle_mousedown:function(e,t){this.isDraggable(e,t)&&(this._mousedown_point=this.getView().getEventRelativePoint(e),this._addDragListener(),this.onDragStart(e,t))},handle_drag_mousemove:function(e){null!=this._mousedown_point&&(e.preventDefault(),!0!==this._drag_cursor_set&&(this._drag_cursor_set=!0),lr.setCursor(this,this.getDragCursor()),this.onDrag(e,this.getView()))},handle_drag_mouseup:function(e){var t=this.getView();this.onDragEnd(e,t),this._removeDragListener(),this._reset(e,t)},_reset:function(e,t){lr.setCursor(this,"default"),delete this._mousedown_point,delete this._drag_cursor_set,this.reset(e,t)},_addDragListener:function(){!0!==this._drag_listener_added&&(this._drag_listener_added=!0,wn(cr,"mousemove",this.handle_drag_mousemove,this),wn(cr,"mouseup",this.handle_drag_mouseup,this))},_removeDragListener:function(){!0===this._drag_listener_added&&(this._drag_listener_added=!1,Rn(cr,"mousemove",this.handle_drag_mousemove,this),Rn(cr,"mouseup",this.handle_drag_mouseup,this))}}),Ge(mr,Cr,{getViewDefaultTypes:function(){return["wheel","mousedown"]},handle_wheel:function(e,t){var n,r;0<e.buttons||(e.preventDefault(),n=t.getProperty("zoom_factor"),r=t.getProperty("zoom"),Ln.isWheelDown(e)?r/=n:r*=n,t.zoomByPoint(r,t.getEventRelativePoint(e)))},isDraggable:function(e,t){return!!bn.isMouseAuxiliaryButton(e)||!e.ctrlKey&&!t.getDataAt(e,lr.isInteractBodyOnly(t))},onDragStart:function(e,t){this._mousedown_translate_x=t.getProperty("translate_x"),this._mousedown_translate_y=t.getProperty("translate_y")},onDrag:function(e,t){var n;null!=this._mousedown_translate_x&&(n=(e=t.getEventRelativePoint(e)).x-this._mousedown_point.x,e=e.y-this._mousedown_point.y,n=this._mousedown_translate_x+n,e=this._mousedown_translate_y+e,t.translate(n,e))},getDragCursor:function(){return"grabbing"},reset:function(e,t){this._mousedown_translate_x=null,this._mousedown_translate_y=null}}),Ge(br,et,{getViewDefaultTypes:function(){return["click","dblclick","contextmenu"]},handle_contextmenu:function(e,t){e.preventDefault()},handle_click:function(e,t){var n=t.getDataAt(e,lr.isInteractBodyOnly(t));n&&(t._isDisabled(n)||t._onDataClick(n,e))},handle_dblclick:function(e,t){e.stopPropagation();var n=t.getDataAt(e,lr.isInteractBodyOnly(t));n?t._isDisabled(n)||(Er(n)?this._isSubviewDrillOnDblClick(t,n)&&t.setCurrentSubview(n):Sr(n)?t._isExpandable(n)&&this._isGroupExpandOnDblClick(t,n)&&t.toggleExpand(n):Lr(n)&&t._isLinkBundleable(n)&&this._isLinkBundleOnDblClick(t,n)&&t.toggleLinkBundle(n),t._onDataDblClick(n,e)):!this._isSubviewDrillOnDblClick(t,n)||(e=t.getCurrentSubview())&&t.setCurrentSubview(Mr.getDataSubview(e))},_isGroupExpandOnDblClick:function(e,t){return!1!==e.getDataViewProperty(t,"expand_on_dblclick","group_expand_on_dblclick")},_isSubviewDrillOnDblClick:function(e,t){return t?!1!==e.getDataViewProperty(t,"drill_on_dblclick","subview_drill_on_dblclick"):!1!==e.getProperty("subview_drill_on_dblclick")},_isLinkBundleOnDblClick:function(e,t){return t?!1!==e.getDataViewProperty(t,"bundle_on_dblclick","link_bundle_on_dblclick"):!1!==e.getProperty("bundle_on_dblclick")}}),Ge(xr,Cr,{getViewDefaultTypes:function(){return["mousedown"]},_isMultipleSelect:function(){return"multiple"===this.getView().getSelectMode()},isDraggable:function(e,t){return e.ctrlKey&&!t.getDataAt(e,lr.isInteractBodyOnly(t))&&this._isMultipleSelect()},getDragCursor:function(){return"crosshair"},reset:function(e,t){!(this._mousemove_point=null)===this._drag_draw_added&&(this._drag_draw_added=!1,t.removeControllerDraw(this.drawAreaSelect,this))},handle_mousedown:function(e,t){var n;if(!bn.isMouseAuxiliaryButton(e))return n=t.getDataAt(e,lr.isInteractBodyOnly(t)),n?t._isDisabled(n)||!t.isSelectable(n)?void 0:void(e.ctrlKey?t.isSelected(n)?t.removeSelect(n):this._isMultipleSelect()?t.addSelect(n):t.setSelect(n):t.isSelected(n)||t.setSelect(n)):this.isDraggable(e,t)?xr.superClass.handle_mousedown.apply(this,arguments):void(n||t.clearSelect())},onDrag:function(e,t){this._mousemove_point=t.getEventRelativePoint(e),t.updateControllerCanvas()},onDragStart:function(e,t){!0!==this._drag_draw_added&&(this._drag_draw_added=!0,t.addControllerDraw(this.drawAreaSelect,this))},onDragEnd:function(e,t){var n=this._getSelectRect();n&&(n=t.getDataArrayAtRect(n),e.ctrlKey?n.forEach(function(e){t.isSelected(e)?t.removeSelect(e):t.addSelect(e)}):t.setSelect(n))},drawAreaSelect:function(e){var t=this._getSelectRect();t&&zn.saveAndSet2DAttributes(e,{lineWidth:.6},function(){Xn.render(e,t,"rect",{fill:"rgba(51,153,255,0.2)",stroke:"#3399ff"})})},_getSelectRect:function(){var e=this._mousedown_point,t=this._mousemove_point;if(null==e||null==t)return null;var n=st(e.x,t.x),r=st(e.y,t.y);return{x:n,y:r,width:at(e.x,t.x)-n,height:at(e.y,t.y)-r,intersect:n<t.x&&r<t.y}}}),Ge(Pr,Cr,{isDraggable:function(e,t){if(!bn.isMouseMainButton(e))return!1;e=t.getDataAt(e,lr.isInteractBodyOnly(t));return null!=e&&!t._isDisabled(e)},onDragStart:function(e,t){this._mousemove_point=t.getTransformedPoint(e)},reset:function(){delete this._move_node_arr},onDrag:function(e,n){var r,i,e=n.getTransformedPoint(e);null==this._move_node_arr&&(r=[],(i=n.getSelected(!1)).forEach(function(e){var t;kr(e)&&!n._isDisabled(e)&&n._isMovable(e)&&(t=Mr.getSameSubviewAncestorArray(e),yt(t,function(e){return-1<i.indexOf(e)})||(Sr(e)?pt(r,this._getGroupChildren(e,n)):r.push(e)))},this),this._move_node_arr=r),this._move(e.x-this._mousemove_point.x,e.y-this._mousemove_point.y),this._mousemove_point=e},_getGroupChildren:function(e,t){return gt(Qn.getAddedDescendantArray(t.getProvider(),e),function(e){return kr(e)&&!Sr(e)})},_move:function(n,r){this._move_node_arr.forEach(function(e){var t=e.getPosition();e.setPosition(t.x+n,t.y+r)},this)}}),Ge(wr,t,{___zdefaults_:{movable_on_selected:!1,stop_on_complete:!1,start_on_change:!1},afterSetProperty:function(e,t,n){Je.superClass.afterSetProperty.apply(this,arguments),"start_on_change"===e&&this._updateStartOnChange()},_updateStartOnChange:function(){this._gView&&(!0===this.get("start_on_change")?this._addChangeListener():this._removeChangeListener())},_addChangeListener:function(){!0!==this._on_model_change&&(this._on_model_change=!0,this._gView.onModelChange(this._handleModelChange,this))},_removeChangeListener:function(){!0!==this._on_model_change&&this._gView.offModelChange(this._handleModelChange,this)},_handleModelChange:function(e){var t;!0!==this._is_updating&&"data"===e.type&&(t=(e=e.event).data,"x"!==(e=e.property)&&"y"!==e||!this._isLayoutNode(t)||this.start())},start:function(){},stop:function(){},layout:function(){},rebuild:function(){},step:function(){},onComplete:function(){},getProvider:function(){return this._gView.getProvider()},getNodeBounds:function(e){return e.getBounds(this._gView)},isSelected:function(e){return!!this._gView&&this._gView.isSelected(e)},isVisible:function(e){return!this._gView||this._gView._isVisible(e)},_isLayoutNode:function(e){return!!kr(e)&&(!Sr(e)||!!this._gView&&!this._gView.isExpanded(e))},_getLayoutNodes:function(e){var t=this,n=this.getGView();return(e=null==e&&n?n.getDataArray():e)?gt(e,function(e){return t.isVisible(e)&&t._isLayoutNode(e)}):[]},isMovable:function(e){return!this._gView||!1!==this._gView.isMovable(e)&&((!1!==this.get("movable_on_selected")||!this.isSelected(e))&&(!!kr(e)&&(!Sr(e)||!this._gView.isExpanded(e))))},getGView:function(){return this._gView}}),Ge(Rr,wr,{___zdefaults_:{start_on_change:!0,stop_on_complete:!0,node_repulsion:.8,link_repulsion:.2,link_limit:30,limit_bounds:null,motion_limit:.01},start:function(){this._damper=1,this._timer||(this._hasFix=!1,this._timer=Dt(this._step,this))},stop:function(){this._timer&&(Pt.cancelCallRAFInterval(this._timer),this._timer=null),this._hasFix=!1},layout:function(){for(this._damper=1;"complete"!==this._step(););},_step:function(){if(this._rebuild(),this._doRelax(),this._updatePosition(),this.step(),this._isComplete())return!0===this.get("stop_on_complete")&&this.stop(),this.onComplete(),"complete"},_isComplete:function(){return this._damper<.1&&this._maxMotion<this.get("motion_limit")},_doRelax:function(){for(var e=0;e<8;e++){var t=this._sNodeArr.length;this._sLinkArr.forEach(this._relaxLink,this);for(var n=0;n<t;n++)for(var r=0;r<t;r++){var i=this._sNodeArr[n],o=this._sNodeArr[r];i!==o&&this._relaxNodePair(i,o)}this._adjustNodes()}},_updatePosition:function(){var e=this._sNodeArr.length;this._is_updating=!0;for(var t=0;t<e;t++){var n=this._sNodeArr[t];n.fix||n.data.setPosition(n.x,n.y)}this._is_updating=!1},_adjustNodes:function(){var i,o,a,s,l=this,e=this._maxMotion,c=0,d=this.get("limit_bounds");d&&(i=d.x,o=d.y,a=d.x+d.width,s=d.y+d.height),this._sNodeArr.forEach(function(e){var t=e.dx,n=e.dy,r=(t*=l._damper,n*=l._damper,e.dx=t/2,e.dy=n/2,S.sqrt(t*t+n*n));e.fix||(e.x=e.x+S.max(-30,S.min(30,t)),e.y=e.y+S.max(-30,S.min(30,n)),d?(e.x<i&&(e.x=i,l._adjustLocation(1,0)),e.y<o&&(e.y=o,l._adjustLocation(0,1)),(t=l.getNodeBounds(e.data))&&(e.x+t.width>a&&(e.x=a-t.width,l._adjustLocation(-1,0)),e.y+t.height>s&&(e.y=s-t.height,l._adjustLocation(0,-1)))):!0!==l._hasFix&&(e.x<1&&l._adjustLocation(1,0),e.y<1&&l._adjustLocation(0,1))),c=S.max(r,c)}),this._maxMotion=c,0<this._maxMotion?this._motionRatio=e/this._maxMotion-1:this._motionRatio=0,this._damp()},_damp:function(){this._motionRatio<=.001&&((this._maxMotion<.2||1<this._maxMotion&&this._damper<.9)&&.01<this._damper?this._damper-=.01:this._maxMotion<.4&&.003<this._damper?this._damper-=.003:1e-4<this._damper&&(this._damper-=1e-4)),this._maxMotion<this.get("motion_limit")&&(this._damper=0)},_relaxLink:function(e){var t=e.to.x-e.from.x,n=e.to.y-e.from.y,r=S.sqrt(t*t+n*n),i=100*e.length,t=.25*t/i,n=.25*n/i;e.to.dx=e.to.dx-t*r,e.to.dy=e.to.dy-n*r,e.from.dx=e.from.dx+t*r,e.from.dy=e.from.dy+n*r},_relaxNodePair:function(e,t){var n=0,r=0,i=e.x-t.x,o=e.y-t.y,a=i*i+o*o,i=(0==a?(n=S.random(),r=S.random()):a<36e4&&(n=i/a,r=o/a),e.repulsion*t.repulsion/400);e.dx+=n*i,e.dy+=r*i,t.dx-=n*i,t.dy-=r*i},_rebuild:function(){var n=this._sNodeMap={},r=this._sNodeArr=[],t=this._sLinkArr=[],i=this.getGView(),o=this,a=[],s=[],l={};i.eachData(function(e){var t,n;i._isVisible(e)&&(kr(e)?Sr(e)&&i.isExpanded(e)||a.push(e):Lr(e)&&(n=Or.getFromNodeAgent(i,e),t=Or.getToNodeAgent(i,e),n&&t&&((n=[n.id(),t.id()]).sort(),n=n.join(","),l.hasOwnProperty(n)||(l[n]=!0,s.push(e)))))}),a.forEach(function(e){var t=o._createNode(e);n[e.id()]=t,r.push(t)}),s.forEach(function(e){e=o._createLink(e);e&&t.push(e)})},_createLink:function(e){if(!e.isLoop()){var t=Or.getFromNodeAgent(this._gView,e),n=Or.getToNodeAgent(this._gView,e);if(t&&n){var r=this._sNodeMap[t.id()],i=this._sNodeMap[n.id()];if(r&&i)return e={data:e,from:r,to:i},r=this.getNodeBounds(t),i=this.getNodeBounds(n),t=r.width+i.width,n=r.height+r.height,(i=S.floor(S.sqrt(t*t+n*n)*this.get("link_repulsion")))<=this.get("link_limit")&&(i=this.get("link_limit")),e.length=i,e}}},_createNode:function(e){var t=e.getPosition(),t={data:e,x:t.x,y:t.y,dx:0,dy:0,fix:!this.isMovable(e),repulsion:this._getRepulsion(e)};return this._hasFix=t.fix||this._hasFix,t},_getRepulsion:function(e){var t,e=this.getNodeBounds(e);return t=!e||(t=S.floor(S.sqrt(e.width*e.width+e.height*e.height)*this.get("node_repulsion")))<=0?100:t},_adjustLocation:function(e,t){for(var n=this.get("limit_bounds"),r=0,i=this._sNodeArr.length;r<i;r++){var o=this._sNodeArr[r],a=this.getNodeBounds(o.data);if(!a)return;0!==e&&(0<e?(null==n||o.x+a.width+e<n.x+n.width)&&(o.x+=e):(null==n||o.x+e>n.x)&&(o.x+=e)),0!==t&&(0<t?(null==n||o.y+a.height+t<n.y+n.height)&&(o.y+=t):(null==n||o.y+t>n.y)&&(o.y+=t))}}}),Ge(Dr,R,Ue({__toTypeString_GView_$:function(){return ne},__className_:"GView",___zdefaults_:{link_gap:ze("GVIEW_LINK_GAP"),label_in_front:!1,info_in_front:!1,hit_padding:ze("GVIEW_HIT_PADDING"),movable:!0,select_mode:"multiple",group_expand_on_dblclick:ze("GVIEW_GROUP_EXPAND_ON_DBLCLICK"),subview_drill_on_dblclick:ze("GVIEW_SUBVIEW_DRILL_ON_DBLCLICK"),link_bundleable:!1,link_bundle_on_dblclick:ze("GVIEW_SUBVIEW_DRILL_ON_DBLCLICK")},_drawData:function(t){var e;Dr.superClass._drawData.apply(this,arguments),!0===this.getProperty("label_in_front")&&(e=this.getDrawDataArray()).forEach(function(e){e=this.getDataRenderer(e);e&&e.drawLabel(t,!0)},this),!0===this.getProperty("info_in_front")&&(e||this.getDrawDataArray()).forEach(function(e){e=this.getDataRenderer(e);e&&e.drawInfo(t,!0)},this)},getDrawDataArray:function(){return pt(Ar.getDrawGroupArray(this),gt(this.getDataArray(!1),function(e){return Lr(e)}),Ar.getDrawNodeArray(this))},getDataRendererClass:function(e){if(e.getRendererClass)return e.getRendererClass()},toImage:function(e){var t=new Image;return t.src=m.toDataURL(this,e),t},eachNode:function(e,t,n){var r=this.filterData(function(e){return(!0!==n||!Sr(e))&&kr(e)});0<r.length&&ft(r,e,t)},eachLink:function(e,t){var n=this.filterData(function(e){return Lr(e)});0<n.length&&ft(n,e,t)},makeVisible:function(e){var t;e&&(kr(e)?(t=Mr.getDataSubview(e),this.setCurrentSubview(t),Mr.expandSameSubviewGroup(this,e)):Lr(e)&&(t=Or.getFromNodeAgent(this,e),e=Or.getToNodeAgent(this,e),this.setCurrentSubview(Mr.getSpanSubview(t,e)),t===e?Mr.expandSameSubviewGroup(this,t,!0):(Mr.expandSameSubviewGroup(this,t),Mr.expandSameSubviewGroup(this,e))))}},{translateCenter:function(e,t){null!=t&&(dt(t)||(t=[t])),!0===e?Rt(function(){this._transformFit(!0,t)},this):this._transformFit(!0,t)},zoomFit:function(e,t){null!=t&&(dt(t)||(t=[t])),!0===e?Rt(function(){this._transformFit(!1,t)},this):this._transformFit(!1,t)},_transformFit:function(e,t){var n,r,i,o,a,s,t=m.getVisibleDataBounds(this,t);t&&(n=t.width,r=t.height,o=this.getRootSize(),i=st(30,st(o.width,o.height)/10),s=o.width-2*i,o=o.height-2*i,0<n&&0<r&&0<s&&0<o&&(!0===e?a=this.get("zoom"):(a=st(s/n,o/r),(a=(e=this.get("max_zoom"))<a?e:a)<(e=this.get("min_zoom"))&&(a=e)),e=i+(s-n*a)/2-t.x*a,s=i+(o-r*a)/2-t.y*a,this.set("zoom",a),this.translate(e,s)))}},dr(Dr),hr(),{_onProviderChange:function(){Dr.superClass._onProviderChange.apply(this,arguments),this._updateLinkBundleProvider()}})),Ue(tt.$,{gview:{ArrowCalculator:Gr,GroupCalculator:Hr,InfoCalculator:Fr,LabelCalculator:Wr,LinkCalculator:jr,NodeCalculator:qr,CurveLinkPathCalculator:Ur,DefaultLinkPathCalculator:Br,LoopLinkPathCalculator:zr,RALinkPathCalculator:Nr,GVLevelInterface:dr,LinkBundleInterface:hr,DefaultController:br,DragController:Cr,MoveController:Pr,SelectController:xr,TransformController:mr,ForceLayout:Rr,GVLayout:wr,Group:fr,GVData:ur,GVDataProperties:s,Link:pr,LinkSubview:yr,Node:_r,Subview:gr,GroupRendererConfig:Yr,GVRendererConfig:Xr,LinkRendererConfig:Jr,NodeRendererConfig:Kr,ArrowDraw:Zr,GVRendererDraw:Qr,LinkRendererDraw:ti,NodeRendererDraw:ei,HeatMapUtil:$r,GroupRenderer:oi,GVRenderer:vr,LinkRenderer:ii,NodeRenderer:ri,RendererProperties:ni,GroupUtil:Ir,GVDrawIndexUtil:Ar,GViewUtil:m,ModelTypeCheck:Jn,LinkUtil:Or,NodeUtil:Vr,SubviewUtil:Mr,GView:Dr}}),tt.gv={GView:Dr,Node:_r,Link:pr,Group:fr,Subview:gr,LinkSubview:yr,isNode:kr,isLink:Lr,isGroup:Sr,isSubview:Er,isLinkSubview:Tr,layout:{Layout:wr,ForceLayout:Rr},renderer:{GVRenderer:vr,NodeRenderer:ri,LinkRenderer:ii,GroupRenderer:oi}},Ue(tt.type,{isNode:kr,isLink:Lr,isGroup:Sr,isSubview:Er,isLinkSubview:Tr})}(window),"undefined"!=typeof module&&module.exports&&(module.exports=z);